/*! For license information please see envision.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?exports.envision=t(require("jquery")):e.envision=t(e.jQuery)}(this,(e=>(()=>{"use strict";var t,i,n,s,o={47:t=>{t.exports=e}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var i=a[e]={exports:{}};return o[e].call(i.exports,i,i.exports,r),i.exports}r.m=o,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);r.r(s);var o={};t=t||[null,i({}),i([]),i(i)];for(var a=2&n&&e;"object"==typeof a&&!~t.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,r.d(s,o),s},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>({400:"swipejs",448:"popper",462:"tom-select"}[e]+"-"+{400:"07b2a16629874eef0290",448:"8269852faad6d9029074",462:"69688c39429631fe9e77"}[e]+".js"),r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},s="envision:",r.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var a,l;if(void 0!==i)for(var h=document.getElementsByTagName("script"),d=0;d<h.length;d++){var c=h[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==s+i){a=c;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",s+i),a.src=e),n[e]=[t];var u=(t,i)=>{a.onerror=a.onload=null,clearTimeout(v);var s=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(i))),t)return t(i)},v=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={179:0};r.f.j=(t,i)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise(((i,s)=>n=e[t]=[i,s]));i.push(n[2]=s);var o=r.p+r.u(t),a=new Error;r.l(o,(i=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var n,s,o=i[0],a=i[1],l=i[2],h=0;if(o.some((t=>0!==e[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(l)l(r)}for(t&&t(i);h<o.length;h++)s=o[h],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=this.webpackChunkenvision=this.webpackChunkenvision||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var l={};return(()=>{r.r(l),r.d(l,{accordion:()=>Ft,collapse:()=>Xt,dialog:()=>bt,imageSlider:()=>Bt,imageViewer:()=>de,imageViewer2:()=>Fe,popover:()=>C,rangeSlider:()=>Ze,select:()=>D,tabs:()=>K,tooltip:()=>q});r.p;var e=r(47),t=r.n(e);const i=function(e,t){const i=[];if(t=t||document,e&&"string"==typeof e){let n=t.querySelectorAll(e);if(n&&n.length>0)for(let e=0;e<n.length;e++)i.push(n[e])}else if(e&&"object"==typeof e)if(1===e.nodeType)i.push(e);else if(e.length>0)for(let t=0;t<e.length;t++)i.push(e[t]);return i},n=function(e,t){return i(e,t)[0]},s=function(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild},o="data-env-prev-style",a=function(e,t){const i=e.getAttribute(`${o}-${t}-val`);i?e.style.setProperty(t,i,e.getAttribute(`${o}-${t}-prio`)):e.style.removeProperty(t),e.removeAttribute(`${o}-${t}-val`),e.removeAttribute(`${o}-${t}-prio`)},h=function(e,t,i,n){if(e.style.getPropertyValue(t)){const i=e.style.getPropertyValue(t);i&&(e.setAttribute(`${o}-${t}-val`,i),e.setAttribute(`${o}-${t}-prio`,e.style.getPropertyPriority(t)))}e.style.setProperty(t,i,n)},d=(e,t)=>{Object.keys(t).forEach((i=>{e.setAttribute(i,t[i])}))},c=function(){h(document.body,"overflow-x",""),h(document.body,"overflow-y",""),h(document.body,"overflow","hidden","important")},u=function(){["overflow","overflow-x","overflow-y"].forEach((e=>{a(document.body,e)}))},v=function(e){i(e).forEach((e=>{h(e,"display","none","important")}))},g=function(e){i(e).forEach((e=>{const t=document.createElement(e.tagName);document.body.appendChild(t);const i=getComputedStyle(t).display;t.remove(),h(e,"display",i)}))},p=function(e){i(e).forEach((e=>{a(e,"display")}))},m=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},f=function(e){const t=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details:not([disabled])","summary:not([disabled])",'[tabindex]:not([tabindex="-1"]):not([disabled])',"[contenteditable]"].join(","),n=i(t,e),s=[];for(let e=0;e<n.length;e++)m(n[e])&&s.push(n[e]);return s},b=(()=>{let e=0;const t=()=>(e+=1,"env-"+e);return e=>{i(e).forEach((e=>{if(!e.id){let i=t();for(;document.getElementById(i);)i=t();e.id=i}}))}})();let _;const y=async()=>{if(_)return _;const{createPopper:e}=await r.e(448).then(r.bind(r,628));return _=e,_},E=(()=>{const e={consoleWarning:function(e){const t="https://envisionui.io/",i={jQuery:e=>{let i=e.replace(/^env/,"").replace(/Imageslider/,"imageSlider").replace(/Imageviewer/,"imageWiewer");return i=i.charAt(0).toLowerCase()+i.slice(1),`WARNING: $.fn.${e} is deprecated. Please update your code with new method envision.${i}. Refer to ${t}warnings/#jquery for documentation.`},component:(e,i,n)=>`WARNING: The component "${e}" is deprecated. ${n?`Please update your code with new component "${n}".`:""} Refer to ${t}warnings/#${i} for documentation.`};if(Object.prototype.hasOwnProperty.call(i,e)){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];console.warn(i[e](...s))}},getLanguageOptions(e,t,i){let n={};const s=()=>{let e=(i=i||document.documentElement).closest("[lang]").getAttribute("lang").substring(0,2);return Object.prototype.hasOwnProperty.call(t,e)||(e="en"),Object.prototype.hasOwnProperty.call(t,e)?t[e]:{}};return n="string"==typeof e&&Object.prototype.hasOwnProperty.call(t,e)?Object.assign({},t[e]):this.isPlainObject(e)?Object.assign({},s(),e):Object.assign({},s()),n},isPlainObject(e){if("object"==typeof e&&null!==e){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return!1},extend(){const t={};let i=!1;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(i=arguments[0]);const n=function(n){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i&&"[object Object]"===Object.prototype.toString.call(n[s])?t[s]=e.extend(!0,t[s],n[s]):t[s]=n[s])};for(let e=0;e<arguments.length;e++)n(arguments[e]);return t},normalizeOptions(e,t){if(e=this.isPlainObject(e)?e:{},!this.isPlainObject(t))return console.error("defaults is not an object"),e;for(let i in e)Object.prototype.hasOwnProperty.call(t,i)||delete e[i];return e}};return e})(),w=E,x="envPopover",A="env-popover__header__title",I="env-popover__content",L="env-popover__menu",T={clickOutside:!1,constraints:[],container:"body",content:"",delay:0,escapeContent:!0,placement:"top",template:(e,t)=>`<div class="env-popover ${e}" role="tooltip">\n   <div class="env-popover__arrow"></div>\n   <div class="env-popover__header">\n   <h4 class="env-ui-text-overline ${A}"></h4>\n   </div>\n   <div class="${t}"></div>\n   </div>`,title:"",trigger:"click",type:null};class S{constructor(e,t){this.el=e,this.config={...T,...this.el.dataset,...t},this.bindEvents()}handleClick(){this.isShowing?this.hide():this.show()}handleInEvent(){this.config.delay>0?(this.hidetimeout&&clearTimeout(this.hidetimeout),this.showtimeout&&clearTimeout(this.showtimeout),this.isShowing||(this.showtimeout=setTimeout((()=>{this.show()}),this.config.delay))):this.isShowing||this.show()}handleOutEvent(){this.config.delay>0?(this.bindPopoverEvents(),this.showtimeout&&clearTimeout(this.showtimeout),this.isShowing&&(this.hidetimeout=setTimeout((()=>{this.hide()}),this.config.delay))):this.isShowing&&this.hide()}handleKeyboardEvent(e){"Escape"===e.key&&this.hide()}bindEvents(){const e=this.config.trigger.split(" ");this.handleClick=this.handleClick.bind(this),this.handleInEvent=this.handleInEvent.bind(this),this.handleOutEvent=this.handleOutEvent.bind(this),this.handlePopoverMouseEnter=this.handlePopoverMouseEnter.bind(this),this.handlePopoverMouseLeave=this.handlePopoverMouseLeave.bind(this),this.clickOutsideHandler=this.clickOutsideHandler.bind(this),this.handleKeyboardEvent=this.handleKeyboardEvent.bind(this),e.forEach((e=>{if("click"===e)this.el.addEventListener("click",this.handleClick);else{const t="hover"===e,i=t?"mouseenter":"focusin",n=t?"mouseleave":"focusout";this.el.addEventListener(i,this.handleInEvent),this.el.addEventListener(n,this.handleOutEvent)}}))}removeEvents(){this.config.trigger.split(" ").forEach((e=>{if("click"===e)this.el.removeEventListener("click",this.handleClick);else{const t="hover"===e,i=t?"mouseenter":"focusin",n=t?"mouseleave":"focusout";this.el.removeEventListener(i,this.handleInEvent),this.el.removeEventListener(n,this.handleOutEvent)}}))}handlePopoverMouseEnter(){this.hidetimeout&&clearTimeout(this.hidetimeout),this.showtimeout&&clearTimeout(this.showtimeout),this.isShowing||(this.showtimeout=setTimeout((()=>{this.show()}),this.config.delay))}handlePopoverMouseLeave(){this.showtimeout&&clearTimeout(this.showtimeout),this.isShowing&&(this.hidetimeout=setTimeout((()=>{this.hide()}),this.config.delay))}clickOutsideHandler(e){const t=e.target;!this.isShowing||this.el.contains(t)||t.closest(".env-popover")||this.hide()}bindPopoverEvents(){const e=this.getPopoverElement();e.removeEventListener("mouseenter",this.handlePopoverMouseEnter),e.addEventListener("mouseenter",this.handlePopoverMouseEnter,{once:!0}),e.removeEventListener("mouseleave",this.handlePopoverMouseLeave),e.addEventListener("mouseleave",this.handlePopoverMouseLeave,{once:!0})}getPopoverTemplate(){const e="tooltip"===this.config.type?"env-popover--tooltip":"",t="menu"===this.config.type?L:I;return"function"==typeof this.config.template&&(this.config.template=this.config.template(e,t)),this.config.template}getPopoverElement(){if(!this.popoverElement){const e=document.createElement("div");e.innerHTML=this.getPopoverTemplate(),this.popoverElement=e.firstChild,b(this.popoverElement)}return this.popoverElement}setText(e,t,i){this.config.escapeContent?e.querySelector(`.${t}`).textContent=i:e.querySelector(`.${t}`).innerHTML=i}setTitle(e){if(this.config.title)this.setText(e,A,this.config.title);else{const e=this.popoverElement.querySelector(".env-popover__header");e&&e.remove()}}setContent(e){this.config.content instanceof HTMLElement&&(this.config.content=this.config.content.innerHTML),this.setText(e,"menu"===this.config.type?L:I,this.config.content)}updateConfig(e){return Object.assign(this.config,e),this}render(){const e=this.getPopoverElement();this.setTitle(e),this.setContent(e)}hide(){const e=this.getPopoverElement();this.el.removeAttribute("aria-describedby"),e.remove(),this.config.clickOutside&&document.body.removeEventListener("click",this.clickOutsideHandler),document.removeEventListener("keyup",this.handleKeyboardEvent),this.isShowing=!1}show(){this.render();const e=this.getPopoverElement();this.el.setAttribute("aria-describedby",this.popoverElement.id),document.body.appendChild(e),y().then((t=>{this._popper=t(this.el,e,{placement:this.config.placement,modifiers:[{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:".env-popover__arrow"}}]}),this._popper.update(),this.config.clickOutside&&document.body.addEventListener("click",this.clickOutsideHandler),document.addEventListener("keyup",this.handleKeyboardEvent),this.isShowing=!0}))}destroy(){this.hide(),this._popper&&this._popper.destroy(),this._popper=void 0,this.isShowing=!1,this.removeEvents()}static async _init(e,t){const n=i(e);if(n.length>0)return await y(),n.map((e=>{if(e[x]||(e[x]=new S(e,t)),"string"==typeof t){if(!e[x][t])throw new Error(`No method named "${t}"`);e[x][t].call(e[x])}return e[x]}))}static _jQueryInterface(e){return w.consoleWarning("jQuery",x),this.each((()=>{i(this).forEach((t=>{S._init(t,e)}))}))}}if("undefined"!=typeof document){const e=t().fn[x];t().fn[x]=S._jQueryInterface,t().fn[x].Constructor=S,t().fn[x].noConflict=()=>(t().fn[x]=e,S._jQueryInterface)}const C=async(e,t)=>S._init(e,t),k="http://www.w3.org/2000/svg",$={sv:{add:"Lägg till",remove_button:"Ta bort val",clear_button:"Ta bort alla val",no_results:"Inga alternativ matchar"},en:{add:"Add",remove_button:"Remove",clear_button:"Clear all",no_results:"No results found"}},O={staticConfig:{wrapperClass:"env-select",inputClass:"env-select__input",dropdownClass:"env-select__dropdown",dropdownContentClass:"env-select__dropdown__content",itemClass:"env-select__item",optionClass:"env-select__dropdown__option",plugins:{caret_position:{},remove_button:{title:`${$.sv.remove_button}`,className:"env-select__item__remove"},clear_button:{title:`${$.sv.clear_button}`,className:"env-select__input__clear"}}},userConfig:{allowEmptyOption:!1,valueField:"value",labelField:"text",searchField:["text"],dropdownParent:null,maxItems:null,options:null,maxOptions:null,items:null,create:!1,clearButton:!0,placeholder:null,sortField:function(e,t){const i=this.items[e.id].text,n=this.items[t.id].text;return i&&n?i.localeCompare(n):0},createFilter:function(e){return!((e=e.toLowerCase())in this.options)},preload:!1,render:{option:function(e,t){return"<div>"+t(e[this.settings.labelField])+"</div>"},item:function(e,t){return"<div>"+t(e[this.settings.labelField])+"</div>"},option_create:function(e,t){return`<div class="create">${this.settings.i18n.add} <strong>${t(e.input)}</strong>&hellip;</div>`},no_results:function(){return`<div class="no-results">${this.settings.i18n.no_results}</div>`},loading:function(){return'<div class="env-select__spinner env-spinner-bounce"><div class="env-bounce1"></div><div class="env-bounce2"></div><div class="env-bounce3"></div></div>'}},load:null,onInitialize:null,onChange:null,onItemAdd:null,onItemRemove:null,onClear:null,onOptionAdd:null,onOptionRemove:null,onOptionClear:null,onDropdownOpen:null,onDropdownClose:null,onType:null,onFocus:null,onBlur:null,onLoad:null,i18n:"sv"}},P=function(e,t,i){this.el=e,this.settings=t,this.el.classList.remove("env-form-input");let n=new i(this.el,this.settings);if(n.control.classList.add("env-select__input"),n.input.classList.add("env-assistive-text"),1===this.settings.maxItems){const e=document.createElementNS(k,"svg"),t=document.createElementNS(k,"use");t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","/sitevision/envision-icons.svg#icon-angle-down"),e.appendChild(t),e.classList.add("env-icon"),n.wrapper.appendChild(e)}return this.addOptions=n.addOption.bind(n),this.load=n.load.bind(n),this.getOption=n.getOption.bind(n),this.updateOption=n.updateOption.bind(n),this.removeOption=n.removeOption.bind(n),this.getItem=n.getItem.bind(n),this.addItem=n.addItem.bind(n),this.refreshOptions=n.refreshOptions.bind(n),this.getValue=n.getValue.bind(n),this.setValue=n.setValue.bind(n),this.open=n.open.bind(n),this.close=n.close.bind(n),this.clear=n.clear.bind(n),this.clearOptions=n.clearOptions.bind(n),this.clearFilter=n.clearFilter.bind(n),this.lock=function(){n.lock(),"SELECT"===n.input.tagName&&(n.input.disabled=!0),n.input.readOnly=!0,n.control_input.readOnly=!0},this.unlock=function(){n.unlock(),"SELECT"===n.input.tagName&&(n.input.disabled=!1),n.input.readOnly=!1,n.control_input.readOnly=!1},this.focus=n.focus.bind(n),this.blur=n.blur.bind(n),this.disable=n.disable.bind(n),this.enable=n.enable.bind(n),this.destroy=function(){n.destroy();for(let e in this)Object.prototype.hasOwnProperty.call(this,e)&&delete this[e];n=null},(this.el.classList.contains("env-select--locked")||null!==this.el.getAttribute("readonly"))&&(n.control_input.classList.remove("env-select--locked"),n.input.classList.remove("env-select--locked"),this.lock()),this},D=async(e,t)=>{const n=i(e);if(n.length>0){const{default:e}=await r.e(462).then(r.t.bind(r,592,23));return n.map((i=>(i.envSelect||(i.envSelect=new P(i,((e,t)=>{e=w.normalizeOptions(e,O.userConfig);let i=w.extend(!0,{},O.staticConfig,O.userConfig,e);1===i.maxItems?(delete i.plugins.clear_button,delete i.plugins.remove_button):delete i.allowEmptyOption,i.clearButton||delete i.plugins.clear_button,["items","placeholder","options"].forEach((e=>{i[e]||delete i[e]})),i.i18n=w.getLanguageOptions(i?.i18n,$,t);for(let e in i.plugins)i.plugins[e].title&&i.i18n[e]&&(i.plugins[e].title=i.i18n[e]);return i})(t,i),e)),i.envSelect)))}},B="aria-selected",j="aria-hidden",N="data-env-tabs-index",M="env-tabs__link--active",H="envTabs",V={active:0};class R{constructor(e,t){this.el=e,this.tabs=i(this.el.querySelectorAll('[role="tab"]')),this.panels={},this.activeTab=void 0,this.config=Object.assign({},V,w.normalizeOptions(t,V)),this._clickHandler=(e=>{e.preventDefault(),this._setActive(e.currentTarget,!0)}).bind(this),this._keydownHandler=(e=>{const t=this.el.querySelector(".env-tabs--column");if("Enter"===e.key||" "===e.key)e.preventDefault(),this._setActive(e.currentTarget,!0);else if(t&&("ArrowUp"===e.key||"ArrowDown"===e.key)||!t&&("ArrowLeft"===e.key||"ArrowRight"===e.key)){e.preventDefault();let t=this._getIndex(e.currentTarget)+("ArrowLeft"===e.key||"ArrowUp"===e.key?-1:1);t>this.tabs.length-1?t=0:t<0&&(t=this.tabs.length-1),this._setFocus(this.tabs[t])}}).bind(this),this._bindEvents()}initialize(){this.tabs.forEach(((e,t)=>{b(e);let i=document.getElementById(e.getAttribute("aria-controls"));i||document.querySelector(e.getAttribute("href")),this.panels[e.getAttribute("id")]=i,("true"===e.getAttribute(B)||e.classList.contains(M))&&(this.config.active=t),e.classList.remove(M),e.setAttribute(B,!1),e.setAttribute(N,t),e.setAttribute("tabindex","-1"),i&&(i.setAttribute("tabindex","0"),i.setAttribute("role","tabpanel"),i.setAttribute(j,!0),i.classList.add("env-tabs__panel"),v(i))})),this.tabs[this.config.active].setAttribute("tabindex","0"),this._setActive(this.tabs[this.config.active],!1)}activate(e){e>=0&&e<this.tabs.length&&this._setActive(this.tabs[e],!0)}destroy(){this.tabs.forEach((e=>{e.removeEventListener("click",this._clickHandler,!1),e.removeEventListener("keydown",this._keydownHandler,!1),e.removeAttribute(N)}));for(let e in this)delete this[e]}_bindEvents(){this.tabs.forEach((e=>{e.addEventListener("click",this._clickHandler,!1),e.addEventListener("keydown",this._keydownHandler,!1)}))}_setFocus(e){this.tabs.forEach((e=>{e.setAttribute("tabindex","-1")})),e.setAttribute("tabindex","0"),e.focus()}_setActive(e,t){this._resetActive(),e.classList.add(M),e.setAttribute(B,!0),t&&this._setFocus(e);const i=this._getPanelForTab(e);i&&(i.setAttribute(j,!1),p(i)),this.activeTab=e,this.activeTab.dispatchEvent(new CustomEvent("envision.tabs.activated",{bubbles:!0,cancelable:!0,detail:{tab:this.activeTab,panel:this._getPanelForTab(this.activeTab)}}))}_getIndex(e){return parseInt(e.getAttribute(N),10)}_getPanelForTab(e){return this.panels[e.getAttribute("id")]}_resetActive(){if(this.activeTab){this.activeTab.classList.remove(M),this.activeTab.setAttribute(B,!1);const e=this._getPanelForTab(this.activeTab);e&&(e.setAttribute(j,!0),v(e))}}static _init(e,t,n){const s=i(e);if(s.length>0){return s.map((e=>{if(e.envTabs||(e.envTabs=new R(e,t),e.envTabs.initialize()),"string"==typeof t){if(!e.envTabs[t])throw new Error(`Invalid method name "${t}"`);e.envTabs[t].call(e.envTabs,n)}return e.envTabs}))}}static _jQueryInterface(e,t){return w.consoleWarning("jQuery",H),this.each((()=>{i(this).forEach((i=>{R._init(i,e,t)}))}))}}if("undefined"!=typeof document){const e=t().fn.envTabs;t().fn.envTabs=R._jQueryInterface,t().fn.envTabs.Constructor=R,t().fn.envTabs.noConflict=()=>(t().fn.envTabs=e,R._jQueryInterface)}const K=async(e,t,i)=>R._init(e,t,i),Q="env-tooltip",F={placement:"top",delay:200,modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"flip",enabled:!0}]};class U{constructor(e,t){this.container=e,this.el=e.querySelector(':not([role="tooltip"])'),this.tooltip=e.querySelector('[role="tooltip"]'),this.el&&this.tooltip&&(this.config={...F,...this.container.dataset,...t},this.container.classList.add(Q),"inline"===getComputedStyle(this.container).getPropertyValue("display")&&this.container.classList.add("env-tooltip--inline"),b(this.tooltip),this.el.setAttribute("aria-describedby",this.tooltip.id),h(this.tooltip,"display","none"),this.tooltip.innerHTML=this.tooltip.textContent,this.handleShowEvent=this.handleShowEvent.bind(this),this.handleHideEvent=this.handleHideEvent.bind(this),this.handleHoverIntent=this.handleHoverIntent.bind(this),this.handleKeyboardEvent=this.handleKeyboardEvent.bind(this),this.bindEvents())}handleShowEvent(){this.hidetimeout&&clearTimeout(this.hidetimeout),this.showtimeout&&clearTimeout(this.showtimeout),this.isShowing||(this.showtimeout=setTimeout((()=>{this.show()}),this.config.delay))}handleHideEvent(){this.showtimeout&&clearTimeout(this.showtimeout),this.isShowing&&(this.hidetimeout=setTimeout((()=>{this.hide()}),this.config.delay))}handleKeyboardEvent(e){"Escape"===e.key&&this.hide()}handleHoverIntent(){this.tooltip.removeEventListener("mouseenter",this.handleShowEvent),this.tooltip.addEventListener("mouseenter",this.handleShowEvent),this.tooltip.removeEventListener("mouseleave",this.handleHideEvent),this.tooltip.addEventListener("mouseleave",this.handleHideEvent)}bindEvents(){this.el.addEventListener("mouseenter",this.handleShowEvent),this.el.addEventListener("focusin",this.handleShowEvent),this.el.addEventListener("mouseleave",this.handleHoverIntent),this.el.addEventListener("focusout",this.handleHoverIntent),this.el.addEventListener("mouseleave",this.handleHideEvent),this.el.addEventListener("focusout",this.handleHideEvent)}hide(){h(this.tooltip,"display","none"),this.isShowing=!1,document.removeEventListener("keyup",this.handleKeyboardEvent)}show(){h(this.tooltip,"display","block"),y().then((e=>{this._popper=e(this.container,this.tooltip,{placement:this.config.placement,modifiers:this.config.modifiers}),this._popper.update(),this.isShowing=!0})),document.addEventListener("keyup",this.handleKeyboardEvent)}destroy(){this.hide(),this._popper&&this._popper.destroy(),this._popper=void 0,this.isShowing=!1,this.el.removeEventListener("mouseenter",this.handleShowEvent),this.el.removeEventListener("focusin",this.handleShowEvent),this.el.removeEventListener("mouseleave",this.handleHideEvent),this.el.removeEventListener("focusout",this.handleHideEvent),this.el.removeEventListener("mouseleave",this.handleHoverIntent),this.el.removeEventListener("focusout",this.handleHoverIntent)}static async _init(e,t){const n=i(e=e||".env-tooltip");if(n.length>0)return await y(),n.map((e=>{if(e.envTooltip||(e.envTooltip=new U(e,t)),"string"==typeof t){if(!e.envTooltip[t])throw new Error(`No method named "${t}"`);e.envTooltip[t].call(e.envTooltip)}return e.envTooltip}))}}"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",U._init);const q=async(e,t)=>U._init(e,t),z="env-animation-in-progress",W="env-image-viewer__backdrop--in",J=".env.image-viewer",X={sv:{prev:"Föregående",next:"Nästa",moveto:"Gå till bild"},en:{prev:"Previous",next:"Next",moveto:"Move to image"}},G=".env-is-active",Y="[data-move-to]",Z="[data-move]",ee="[data-image-viewer]",te=".env-image-viewer__images",ie=".env-image-viewer__indicators",ne=".env-spinner",se="env-is-active",oe="env-image-viewer--hidden",ae="env-spinner--hide",re={CLICK_DATA_API:`click${J}.data-api`,TOUCHEND:`touchend${J}`,TOUCHMOVE:`touchmove${J}`,TOUCHSTART:`touchstart${J}`},le=0;class he{constructor(e,i){this.$el=t()(e),this.$images=this.$el.find(te),this._isShown=!1,this.config=t().extend({},{i18n:w.getLanguageOptions(i?.i18n,X,e)},this.$el.data());const n=i&&this.$images.length>i.index?i.index:le;this.config.index=n,this.$el.on(re.CLICK_DATA_API,this._click.bind(this))}next(){this.show(this._getNextItemIndex())}prev(){this.show(this._getPrevItemIndex())}show(e){e=e||0,this.config.index=Number(e);const i=t()(this.$images[e])[0].getAttribute("href");if(this._isShown){t()(ne).removeClass(ae),this.$btnContainer.addClass(oe);const e=this._loadImage(i);this.$imgContainer.html(e),this._setActiveIndicatorElement()}else{this.$modal=t()("<div/>",{class:"env-image-viewer__modal"}),this.$btnContainer=t()("<div/>",{class:"env-image-viewer__dialog"}),this.$imgContainer=t()("<div/>",{class:"env-image-viewer__modal-container"}),this.$modal.append(this.$btnContainer),this.$btnContainer.append(this.$imgContainer),this.$modal.appendTo(document.body),this.$images.length>1&&(this.$btnContainer.append(this._getButtons()),this.$btnContainer.append(this._getIndicators())),this.$btnContainer.addClass(oe);const e=this._loadImage(i);this.$imgContainer.html(e),this._isShown=!0,c(),this._bindContainerEvents(),this._bindEvents(),this._showBackdrop(),t()('<div class="env-spinner">\n                                <div class="env-rect1"></div>\n                                <div class="env-rect2"></div>\n                                <div class="env-rect3"></div>\n                                <div class="env-rect4"></div>\n                                <div class="env-rect5"></div>\n                             </div>').prependTo(this.$modal)}}hide(){this.$backdrop.one("transitionend",(()=>{this.$backdrop.remove(),this.$modal.remove(),this.$btnContainer.remove(),this.$imgContainer.remove(),u()})).removeClass(W),this._isShown=!1}_click(e){e.preventDefault();const i=t()(e.target);i.is("img")?this.show(this.$images.index(i.parent())):i.is("a.env-image-viewer__images")&&this.show(this.$images.index(i))}_loadImage(e){const i=t()("<img>"),n=t()(".env-image-viewer__dialog");return i.addClass("env-image-viewer__img").attr({tabindex:"-1",src:e}).on("load",(()=>{const e=i.height(),s=i.width(),o=window.innerHeight;s>800&&n.css({"max-width":"80%"}),o<e&&i.css({"max-height":.8*o}),t()(ne).addClass(ae),this.$btnContainer.removeClass(oe),this.$imgContainer.children().eq(0).trigger("focus")})),i}_bindContainerEvents(){this.$btnContainer.on(re.CLICK_DATA_API,Z,(e=>{e.preventDefault(),"next"===t()(e.currentTarget).data("move")?this.next():this.prev()})),this.$btnContainer.on(re.CLICK_DATA_API,Y,(e=>{const t=e.currentTarget.getAttribute("data-move-to");t&&this.show(t)}))}_getButtons(){return`<button type="button" class="env-image-viewer--prev" data-move="prev">\n               <svg class="env-image-viewer__prev-icon env-icon env-icon-small">\n               <use xlink:href="/sitevision/envision-icons.svg#icon-arrow-left"></use>\n               </svg>\n               <span class="env-assistive-text">${this.config.i18n.prev}</span>\n            </button>\n            <button type="button" class="env-image-viewer--next" data-move="next">\n               <svg class="env-image-viewer__next-icon env-icon env-icon-small">\n               <use xlink:href="/sitevision/envision-icons.svg#icon-arrow-right"></use>\n               </svg>\n               <span class="env-assistive-text">${this.config.i18n.next}</span>\n            </button>`}_getIndicators(){return`<div class="env-image-viewer__indicators">\n                  ${this._getIndicatorItems()}\n               </div>`}_getIndicatorItems(){const e=this.config.index;let t="";return this.$images.each((i=>{const n=i===e;t+=`<button type="button" title="${this.config.i18n.moveto} ${i+1}" data-move-to="${i}" class="${n?"env-is-active":""}"></button>`})),t}_showBackdrop(){this.$backdrop=t()("<div/>",{class:"env-image-viewer__backdrop"}),this.$modal.on(re.CLICK_DATA_API,(e=>{this.$backdrop.hasClass(z)||e.target===e.currentTarget&&this._isShown&&this.hide()})),this.$backdrop.appendTo(document.body),this.$backdrop.one("animationend",this._removeBackdropAnimation).addClass(`${W} ${z}`)}_removeBackdropAnimation(e){t()(e.currentTarget).removeClass(z)}_bindEvents(){const e=this.$modal.find("button"),t=e[0],i=e[e.length-1];this.$modal.on("keydown",(e=>this._keydown(e,t,i)))}_keydown(e,t,i){if(!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":e.preventDefault(),this.prev();break;case"ArrowRight":e.preventDefault(),this.next();break;case"Escape":e.preventDefault(),this.$backdrop.hasClass(z)||this.hide();break;case"Tab":"IMG"===e.target.tagName?(e.preventDefault(),t.focus()):e.shiftKey?e.target===t&&(e.preventDefault(),i.focus()):e.target===i&&(e.preventDefault(),t.focus());break;default:return}}_getNextItemIndex(){return this.config.index===this.$images.length-1?0:this.config.index+1}_getPrevItemIndex(){return 0===this.config.index?this.$images.length-1:this.config.index-1}_setActiveIndicatorElement(){if(this.$images.length>0){this.$btnContainer.find(G).removeClass(se);const e=this.$btnContainer.find(ie).children()[this.config.index];e&&t()(e).addClass(se)}}static _init(e,t){w.consoleWarning("component","Image viewer","image-viewer","Image viewer 2");const n=i(e);if(n.length>0)return n.map((e=>(e.envImageviewer||(e.envImageviewer=new he(e,t)),e.envImageviewer)))}static _jQueryInterface(e){return this.each((()=>{i(this).forEach((t=>{he._init(t,e)}))}))}}if("undefined"!=typeof document){window.addEventListener("load",(()=>{const e=i(ee);e.length>0&&he._init(e)}));const e=t().fn.envImageviewer;t().fn.envImageviewer=he._jQueryInterface,t().fn.envImageviewer.Constructor=he,t().fn.envImageviewer.noConflict=()=>(t().fn.envImageviewer=e,he._jQueryInterface)}const de=async(e,t)=>he._init(e,t);let ce;const ue=async()=>{if(ce)return ce;const{default:e}=await r.e(400).then(r.t.bind(r,905,23));return ce=e,ce},ve="env-image-viewer-2",ge="env-animation-in-progress",pe="env-image-viewer-2__viewer__item",me="env-image-viewer-2__viewer__items",fe="env-image-viewer-2__lightbox",be="env-image-viewer-2__lightbox--in",_e="env-button--icon-before",ye="env-button--icon-after",Ee="STOP",we="PAUSE",xe="PAUSE",Ae="PLAY",Ie="arrow-fill-right",Le="pause",Te="arrow-left",Se="arrow-right",Ce="delete",ke="zoom-in",$e="download",Oe=e=>`<svg class="env-icon">\n      <use xlink:href="/sitevision/envision-icons.svg#icon-${e}"></use>\n      </svg>`,Pe=e=>{(e=Object.assign({},{as:"button",text:"",icon:"",className:"",controls:"",dataset:null},e)).controls=e.controls?`aria-controls="${e.controls}"`:"";const t=s(`<${e.as} type="button"\n      ${e.controls} class="env-button env-button--icon ${e.className}">\n      ${e.text} ${Oe(e.icon)}</${e.as}>`);for(const i in e.dataset)t.dataset[i]=e.dataset[i];return t},De={LIGHTBOX:`<dialog class="${fe}">\n      <div class="${fe}__panel"></div>\n      <div class="${fe}__panel__header-gradient ${fe}__showOnActive"></div>\n      <div class="${fe}__panel__footer-gradient ${fe}__showOnActive"></div>\n      <div class="${fe}__image-container" aria-live="polite"></div>\n      </dialog>`,SPINNER:'<div class="env-spinner env-spinner--fade-in"><div class="env-rect1"></div>\n      <div class="env-rect2"></div><div class="env-rect3"></div>\n      <div class="env-rect4"></div><div class="env-rect5"></div></div>'},Be=`<div class="${ve}__viewer" aria-live="off">\n<div class="${me}"></div>\n<div class="env-assistive-text ${ve}__assistive"></div>\n</div>`,je=`<div class="${pe}" role="group" aria-roledescription="slide"></div>`,Ne=`<div class="${ve}__viewer__controls"></div>`;class Me{#e;#t;#i;#n;#s;#o;constructor(e,t){this.#e=e,this.#t=t,this.#n=[],i("[data-zoom]",this.#e).forEach((e=>{this.#n.push(this.#a(e))})),this.bindThis(),this.#t.slides||this.#e?.addEventListener("click",this.#r)}#a(e){const t=e.href||e.dataset.href;let i;e.href&&!e.href.startsWith("#")&&(e.dataset.href=t,e.href="#0");let n="";return i=e.hasAttribute("alt")||e.dataset.alt?e:e.querySelector("[alt], [data-alt]"),i&&i.dataset.alt?n=i.dataset.alt:i&&i.hasAttribute("alt")&&(n=i.getAttribute("alt")),{src:t,alt:n}}getImageCount(){return this.#n.length}bindThis(){this.#r=this.#r.bind(this),this.#l=this.#l.bind(this),this.#h=this.#h.bind(this),this.#d=this.#d.bind(this)}loadImage(){const e=n(`.${fe}__image-container`,this.#i),t=n(`.${fe}__panel`,this.#i);e.innerHTML=De.SPINNER;const i=new Image,s=this.#n.find((e=>e.src===this.#s));i.src=s.src,i.alt=s.alt,i.classList.add(`${fe}__image`),i.onload=()=>{this.#t.buttons.download&&(this.#o.href=i.src),h(t,"background-image",`url('${i.src}')`),e.replaceChildren(i)},this.setVisibleButtons()}createLightbox(){this.#i=s(De.LIGHTBOX);const e=this.#t.buttons.showText;this.#n.length>1&&(this.#i.appendChild(Pe({text:this.#t.i18n.prev,icon:Te,className:`${fe}__prev ${fe}__showOnActive`,dataset:{move:"prev"}})),this.#i.appendChild(Pe({text:this.#t.i18n.next,icon:Se,className:`${fe}__next ${fe}__showOnActive`,dataset:{move:"next"}}))),this.#i.appendChild(Pe({text:this.#t.i18n.close,icon:Ce,className:`${fe}__close  ${e&&_e} ${fe}__showOnActive`,dataset:{close:""}})),this.#t.buttons.download&&(this.#o=Pe({text:this.#t.i18n.download,icon:$e,className:`${fe}__download ${e&&_e} ${fe}__showOnActive`,as:"a"}),this.#o.setAttribute("download",""),this.#o.removeAttribute("type"),this.#i.appendChild(this.#o))}fadeIn(){this.#i.addEventListener("transitionend",(e=>{e.currentTarget?.classList.remove(ge)}),{once:!0}),this.#i.classList.add(be,ge)}showLightbox(){this.#i||(this.createLightbox(),this.bindEvents()),document.body.appendChild(this.#i),this.loadImage(),c(),this.#i.showModal(),this.fadeIn(),this.#t.slides?.auto&&this.#e.dispatchEvent(new Event("pause"))}show(e){((e=e||0)<0||e>this.#n.length-1)&&(e=0),this.#s=this.#n[e].src,this.showLightbox()}#r=e=>{e.preventDefault(),e.target.closest("[data-zoom]")&&e.target.closest("[data-zoom]").dataset.href&&(this.#s=e.target.closest("[data-zoom]").dataset.href),this.showLightbox()};close(){this.#i.addEventListener("transitionend",(()=>{this.#i.close(),this.#i.remove(),u()}),{once:!0}),this.#i.classList.remove(be)}getCurrentIndex(){const e=this.#n.findIndex((e=>e.src===this.#s));return e>=0?e:0}goTo(e){this.#s=this.#n[e].src,this.loadImage()}#c(){let e=this.getCurrentIndex();e++,e>=this.#n.length?(e=this.#n.length-1,this.#s=this.#n[e].src):this.goTo(e)}#u=()=>{let e=this.getCurrentIndex();e--,e<0?this.#s=this.#n[0].src:this.goTo(e)};setVisibleButtons(){const e=this.getCurrentIndex(),t=this.#n.length;if(1===t||0===e&&t>1?v(n('[data-move="prev"]',this.#i)):p(n('[data-move="prev"]',this.#i)),1===t||e===t-1&&t>1?v(n('[data-move="next"]',this.#i)):p(n('[data-move="next"]',this.#i)),!m(document.activeElement)){f(this.#i)[0].focus()}}#l=e=>{if(e.target.isEqualNode(e.currentTarget))return void this.close();const t=e.target.closest("button");if(!t)return;let i=this.getCurrentIndex();t.dataset.move&&("prev"===t.dataset.move?i--:i++,i<0&&(i=0),i>=this.#n.length-1&&(i=this.#n.length-1),this.goTo(i)),"close"in t.dataset&&this.close()};#h=e=>{if(/input|textarea/i.test(e.target.tagName))return;const t=f(this.#i),i=t[0],n=t[t.length-1];switch(e.key){case"ArrowLeft":e.preventDefault(),this.#u();break;case"ArrowRight":e.preventDefault(),this.#c();break;case"Escape":e.preventDefault(),this.#i.classList.contains(ge)||this.close();break;case"Tab":e.shiftKey?e.target===i&&(e.preventDefault(),n.focus()):e.target===n&&(e.preventDefault(),i.focus());break;default:return}};#d=e=>{this.#i.classList.toggle(`${fe}--active`,"mouseleave"!==e.type)};bindEvents(){this.#i.addEventListener("click",this.#l),this.#i.addEventListener("keydown",this.#h),this.#i.addEventListener("mouseenter",this.#d),this.#i.addEventListener("mouseleave",this.#d),this.#i.addEventListener("keydown",this.#d)}}class He{#e;#i;#t;#v;#g;#p;#m;#f;constructor(e,t,i,n){this.#e=e,this.#t=t,this.#i=i,this.bindThis(),this.setupSlider(),this.setupSliderControls();const s=window.matchMedia("(prefers-reduced-motion: reduce)").matches;this.#t.slides.auto=!s&&this.#t.slides.auto>0?this.#t.slides.auto:0,this.#v=this.#t.slides.auto?Ae:Ee,this.setSliderAriaLive(),this.setPlayButton(),this.#t.slides.overlay&&this.#e.classList.add(`${ve}--overlay`),this.#g=new n(this.#m,{speed:s?1:this.#t.slides.speed,draggable:this.#t.slides.draggable,auto:this.#t.slides.auto,stopPropagation:!0,transitionEnd:this.#b}),this.#t.slides.auto&&!1===this.#t.slides.playing&&this.#_(Ee),this.#y(this.#m,this.#m.querySelector(`.${pe}`)),this.prev=this.#g.prev,this.next=this.#g.next,this.goTo=this.#g.slide,this.getPos=this.#g.getPos}bindThis(){this.#_=this.#_.bind(this),this.#E=this.#E.bind(this),this.#u=this.#u.bind(this),this.#c=this.#c.bind(this),this.#w=this.#w.bind(this),this.#x=this.#x.bind(this),this.#b=this.#b.bind(this),this.#A=this.#A.bind(this),this.#I=this.#I.bind(this)}setupSlider(){this.#e.classList.add(ve),"SECTION"!==this.#e.tagName&&this.#e.setAttribute("role","region"),this.#e.setAttribute("aria-roledescription",this.#t.i18n.roledescription),this.#m=s(Be),this.#p=n(`.${me}`,this.#m),b(this.#p);const e=this.#e.children.length;for(let n=this.#e.children.length-1;n>=0;n--){const o=(t=this.#e.children[n],"string"==typeof(i=je)&&(i=s(i)),i=i||document.createElement("div"),t.replaceWith(i),i.appendChild(t),i);o.setAttribute("aria-label",`${this.#t.i18n.image} ${n+1} ${this.#t.i18n.of} ${e}`),this.#p.prepend(o)}var t,i;this.#e.replaceChildren(this.#m)}getSliderButtonClassNames(){let e=`${ve}__viewer__controls__button`;return this.#t.slides.overlay||(this.#t.slides.buttons?.type&&(e=`env-button--${this.#t.slides.buttons.type} ${e}`),this.#t.slides.buttons?.ghost&&(e=`env-button--ghost ${e}`)),this.#t.slides.buttons?.size&&(e=`env-button--${this.#t.slides.buttons.size} ${e}`),e}setupSliderControls(){const e=s(Ne),t=this.getSliderButtonClassNames(),i=this.#t.buttons.showText,n=Pe({text:this.#t.i18n.prev,icon:Te,className:`${t} ${i?_e:""}`,controls:this.#p.id}),o=Pe({text:this.#t.i18n.next,icon:Se,className:`${t} ${i?ye:""}`,controls:this.#p.id});let a;this.#m.querySelectorAll(`.${pe}`)?.length>1&&(e.appendChild(n),e.appendChild(o)),this.#t.slides.auto&&(this.#f=Pe({text:`${this.#t.i18n.pause} <span class="env-assistive-text">${this.#t.i18n.slideshow}</span>`,icon:Ie,className:`${t} ${i?_e:""}`}),this.#m.querySelectorAll(`.${pe}`)?.length>1&&e.prepend(this.#f)),this.#i?.getImageCount()>0&&(a=Pe({text:`${this.#t.i18n.zoom} <span class="env-assistive-text">${this.#t.i18n.largeImage}</span>`,icon:ke,className:`${t} ${i&&_e}`}),e.prepend(a)),this.bindEvents(n,o,a),this.#e.prepend(e)}#_=e=>{e===we?this.#v!==Ee&&(this.#v=we,this.#g.stop()):e===xe?this.#v!==Ee&&this.#t.slides.auto&&(this.#v=Ae,this.#g.restart()):e===Ee?(this.#v=Ee,this.#g.stop()):e===Ae&&this.#t.slides.auto&&(this.#v=Ae,this.#g.restart()),this.setPlayButton(),this.setSliderAriaLive()};#c=()=>{this.#g.next(),this.#_(we)};#u=()=>{this.#g.prev(),this.#_(we)};#y(e,t){e.querySelectorAll("a, button, input").forEach((e=>{"-1"!==e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),e.dataset.tabindex="true")})),t.querySelectorAll("[data-tabindex]").forEach((e=>{e.removeAttribute("tabindex"),e.dataset.tabindex="true"}));const i=`${t.querySelector("img")?.alt} ${t.textContent.trim()}`;i&&(e.querySelector(`.${ve}__assistive`).textContent=i)}setSliderAriaLive(){const e=this.#t.slides.auto&&this.#v===Ae?"off":"polite";this.#m.setAttribute("aria-live",e)}setPlayButton(){this.#f&&(this.#v===Ae?this.#f.innerHTML=`${this.#t.i18n.pause} <span class="env-assistive-text">${this.#t.i18n.slideshow}</span>${Oe(Le)}`:this.#f.innerHTML=`${this.#t.i18n.play} <span class="env-assistive-text">${this.#t.i18n.slideshow}</span>${Oe(Ie)}`)}#E=e=>{e.preventDefault(),e.stopPropagation(),this.#v!==Ae?this.#_(Ae):this.#_(Ee)};#I=()=>{this.#_(we)};#b=(e,t)=>{this.#y(this.#m,t)};#w=e=>{"BUTTON"!==e.target.tagName&&this.#e.contains(document.activeElement)&&this.#_(we)};#x=e=>{"BUTTON"===e.target.tagName||this.#e.contains(e.target)||this.#_(xe)};#A=()=>{this.#i?.show(this.#g.getPos())};pause(){this.#_(Ee)}play(){this.#_(Ae)}bindEvents(e,t,i){this.#f?.addEventListener("click",this.#E),e.addEventListener("click",this.#u),t.addEventListener("click",this.#c),i?.addEventListener("click",this.#A),this.#t.slides.auto&&(this.#e.addEventListener("focus",this.#w,!0),this.#e.addEventListener("blur",this.#x,!0),this.#e.addEventListener("pause",this.#I))}}const Ve={sv:{roledescription:"karusell",prev:"Visa föregående",next:"Visa nästa",pause:"Stoppa",play:"Starta",slideshow:"automatiskt bläddring",zoom:"Visa",largeImage:"stor bild",close:"Stäng",download:"Ladda ner bild",image:"Bild",of:"av"},en:{roledescription:"carousel",prev:"Previous",next:"Next",pause:"Stop",play:"Start",slideshow:"automatic slide show",zoom:"Show",largeImage:"large image",close:"Close",download:"Download image",image:"Image",of:"of"}},Re={slides:!1,buttons:{download:!0,showText:!1},i18n:"sv"},Ke={auto:0,speed:300,draggable:!0,playing:!1,overlay:!0,buttons:{type:null,ghost:!1,size:null}};class Qe{constructor(e,t){this.el=e,this.config=t,this.lightbox=new Me(this.el,this.config),this.config.slides&&ue().then((e=>{this.slider=new He(this.el,this.config,this.lightbox,e)}))}}const Fe=async(e,t)=>{const n=i(e);if(n.length>0)return await ue(),n.map((e=>(e.envImageviewer2||(e.envImageviewer2=new Qe(e,((e,t)=>{let i=e?.slides;!0===i&&(i={}),e=w.normalizeOptions(e,Re);let n=w.extend(!0,{},Re,e);return i&&(n.slides=w.extend(!0,{},Ke,i)),n.i18n=w.getLanguageOptions(n?.i18n,Ve,t),w.normalizeOptions(n.i18n,Ve.sv),n})(t,e))),e.envImageviewer2)))},Ue="rangeHandleIndex",qe="envRangeSlider",ze="slide",We="slidestop",Je="input",Xe="change",Ge={min:0,max:100,step:1,values:[0,0],visibleValues:!0};class Ye{constructor(e,t){this.config=w.extend(!0,{},Ge,t),this.el=e,this.handlesEl=i(".env-range-slider__handle",this.el),this.rangeEl=n(".env-range-slider__range",this.el),this.config.visibleValues&&(this.valueHoldersEl=i(".env-range-slider__values__value",this.el))}initialize(){this._setupHandles(),this._refreshRange(),this._bindEvents()}values(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++)this.config.values[t]=this._trimAlignValue(e[t]);this._refreshRange()}}_setupHandles(){this.handlesEl.forEach(((e,t)=>{e.dataset[Ue]=t}))}_refreshRange(){let e,t,i;this.handlesEl.forEach(((n,s)=>{i=this._getValue(s),t=(i-this.config.min)/(this.config.max-this.config.min)*100,h(n,"left",`${t}%`),0===s?h(this.rangeEl,"left",`${t}%`):h(this.rangeEl,"width",t-e+"%"),this.config.visibleValues&&(this.valueHoldersEl[s].innerText=i),e=t}))}_bindEvents(){this.handlesEl.forEach((e=>{e.removeEventListener("mousedown",this._initSlide),e.removeEventListener("touchstart",this._initSlide),e.removeEventListener("keydown",this._initKeySlide),e.removeEventListener("keyup",this._stopKeySlide),e.addEventListener("mousedown",this._initSlide.bind(this)),e.addEventListener("touchstart",this._initSlide.bind(this)),e.addEventListener("keydown",this._initKeySlide.bind(this)),e.addEventListener("keyup",this._stopKeySlide.bind(this))}))}#L(e){const t=e.getBoundingClientRect(),i=document.documentElement;return{top:t.top+window.scrollY-i.clientTop,left:t.left+window.scrollX-i.clientLeft}}_initSlide(e){const t=this._getPosition(e),i=this._normValueFromMouse(t);let n,s,o,a,r=this.config.max-this.config.min+1;"touchstart"===e.type?(document.addEventListener("touchmove",this._handleSlide.bind(this)),document.addEventListener("touchend",this._stopSlide.bind(this),{once:!0})):(document.addEventListener("mousemove",this._handleSlide.bind(this)),document.addEventListener("mouseup",this._stopSlide.bind(this),{once:!0})),this.handlesEl.forEach(((e,t)=>{o=this._getValue(t),a=Math.abs(i-o),(r>a||r===a&&(t===this._lastChangedValue||o===this.config.min))&&(r=a,n=e,s=t)})),this._handleIndex=s,n.focus();const l=this.#L(n),h=n.getBoundingClientRect(),d=getComputedStyle(n);this._clickOffset={left:t.x-l.left-h.width/2,top:t.y-l.top-h.height/2-(parseInt(d.borderTopWidth,10)||0)-(parseInt(d.borderBottomWidth,10)||0)+(parseInt(d.marginTop,10)||0)},this._slide(e,s,i)}_handleSlide(e){const t=this._normValueFromMouse(this._getPosition(e));return this._slide(e,this._handleIndex,t),!1}_slide(e,t,i){const n=this._getValue(t?0:1),s=this._getValue(t),o=this._getValues();i=0===t?Math.min(n,i):Math.max(n,i),o[t]=i,i!==s&&(this._trigger(Je,e,{values:o}),this._setValue(t,i))}_stopSlide(e){return document.removeEventListener("mousemove",this._handleSlide),document.removeEventListener("touchmove",this._handleSlide),this._trigger(Xe,e,{values:this._getValues()}),this._handleIndex=null,this._clickOffset=null,!1}_initKeySlide(e){switch(e.key){case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":e.preventDefault(),this._keySliding||(this._keySliding=!0);break;default:return}const t=parseInt(e.target.dataset[Ue],10),i=this._getValue(t);let n;switch(e.key){case"ArrowUp":case"ArrowRight":if(i===this.config.max)return;n=this._trimAlignValue(i+this.config.step);break;case"ArrowDown":case"ArrowLeft":if(i===this.config.min)return;n=this._trimAlignValue(i-this.config.step)}this._slide(e,t,n)}_stopKeySlide(e){this._keySliding&&(this._keySliding=!1,this._trigger(Xe,e,{values:this._getValues()}))}_normValueFromMouse(e){const t=this.el.offsetWidth,i=this.config.max-this.config.min;let n=(e.x-this.#L(this.el).left-(this._clickOffset?this._clickOffset.left:0))/t;n>1&&(n=1),n<0&&(n=0);const s=this.config.min+n*i;return this._trimAlignValue(s)}_getPosition(e){const t={};if(e.originalEvent?.touches){const i=e.originalEvent.touches[0];t.x=i.pageX,t.y=i.pageY}else t.x=e.pageX,t.y=e.pageY;return t}_trimAlignValue(e){if(e<=this.config.min)return this.config.min;if(e>=this.config.max)return this.config.max;const t=this.config.step,i=(e-this.config.min)%t;let n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))}_getValues(){return this.config.values.slice()}_getValue(e){return this.config.values[e]}_setValue(e,t){this.config.values[e]=this._trimAlignValue(t),this._refreshRange()}_trigger(e,i,n){const s=new CustomEvent(e,{bubbles:!1,detail:n});let o;this.el.dispatchEvent(s);const a=t()._data(this.el,"events");e===Je?o=ze:e===Xe&&(o=We),a&&(a[ze]||a[We])&&((i=t().Event(i)).type=o,i.target=this.el,t()(this.el).trigger(i,n)),this.config[o]&&this.config[o]instanceof Function&&this.config[o].call(this.el,i,n)}static _init(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o];const a=i(e);if(a.length>0)return a.map((e=>{if(e.envRangeSlider||(e.envRangeSlider=new Ye(e,t),e.envRangeSlider.initialize()),"string"==typeof t){if(!e.envRangeSlider[t])throw new Error(`No method named "${t}"`);e.envRangeSlider[t].call(e.envRangeSlider,...s)}return e.envRangeSlider}))}static _jQueryInterface(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return w.consoleWarning("jQuery",qe),this.each((()=>{i(this).forEach((t=>{Ye._init(t,e,...n)}))}))}}if("undefined"!=typeof document){const e=t().fn.envRangeSlider;t().fn.envRangeSlider=Ye._jQueryInterface,t().fn.envRangeSlider.Constructor=Ye,t().fn.envRangeSlider.noConflict=()=>(t().fn.envRangeSlider=e,Ye._jQueryInterface)}const Ze=async(e,t)=>Ye._init(e,t),et={reflow:e=>e.offsetHeight,getToggleSpeed(e,t){let i,n=300;return i=e?getComputedStyle(e).getPropertyValue(t):getComputedStyle(document.documentElement).getPropertyValue(t),i&&parseFloat(i)>0&&(i.includes("ms")?n=parseInt(i,10):i.includes("s")&&(n=1e3*parseFloat(i))),n}},tt="env-dialog--fade",it="env-dialog--in";class nt{#T;#S;#C;#k;constructor(e,t){this.options=t,this.#S||(this._bindThis(),this.el=e,this.el.classList.add(tt),this.el.classList.remove(it),this.#k=document.createElement("span"),this.#k.dataset.envDialogPlaceholder="",t.opener&&(this.#T=i(t.opener),this._bindOpenEvent()),this.#S=!0)}_bindThis(){this.show=this.show.bind(this),this.close=this.close.bind(this),this.#r=this.#r.bind(this)}_fadeIn(){this.el.classList.add(it)}_bindModalEvents(){this.el.addEventListener("close",this.close),this.el.addEventListener("click",this.#r,{capture:!1}),this.el.addEventListener("keydown",this.#h),this.#C=!0}_bindOpenEvent(){this.#T.map((e=>{e.addEventListener("click",this.show)}),this)}#h=e=>{if(/input|textarea/i.test(e.target.tagName))return;const t=f(this.el),i=t[0],n=t[t.length-1];"Escape"===e.key&&"alertdialog"===this.el.getAttribute("role")?e.preventDefault():"Tab"===e.key&&(e.shiftKey?e.target===i&&(e.preventDefault(),n.focus()):e.target===n&&(e.preventDefault(),i.focus()))};#r=e=>{this.options.backdropClick&&e.target.isEqualNode(this.el)&&"alertdialog"!==this.el.getAttribute("role")&&this.close()};show(e){e&&e.preventDefault(),this.el.after(this.#k),document.body.append(this.el),c(),this.el.showModal(),this._fadeIn(),this.#C||this._bindModalEvents()}close(){this.el.classList.contains(it)&&(this.el.classList.remove(it),this.el.close(),this.#k.after(this.el),this.#k.remove(),u())}}const st={opener:null,backdropClick:!0},ot="env-animation-in-progress",at="env-modal-dialog__backdrop--in",rt="[data-modal-dialog-dismiss]",lt="focusin.env-modal-dialog",ht="envDialog",dt="[data-modal-dialog]",ct="[data-modal-alert]",ut="show",vt="hide.env-modal-dialog",gt="hidden.env-modal-dialog",pt="show.env-modal-dialog",mt="shown.env-modal-dialog";class ft{constructor(e){this.$el=t()(e),this.el=this.$el.get(0),this.$body=t()(document.body),this.$placeholder=t()("<span />"),this._isShown=!1,this.placementBody=this.el.hasAttribute("data-modal-dialog-placement-body"),this.$el.after(this.$placeholder)}toggle(){return this._isShown?this.hide():this.show()}show(){if(this._isShown)return;et.reflow(this.el);const e=t().Event(pt,{});c(),this.placementBody&&this.$body.append(this.$el),this.$el.trigger(e);const i=t().Event(mt,{});this.$el.one("transitionend",(()=>{this.$el.trigger(i)})).addClass(this._getModifierBase()+ut).removeAttr("aria-hidden").css("opacity",1),this._showBackdrop(),this._isShown=!0,this.$el.trigger("focus"),this._bindEvents()}hide(){if(!this._isShown)return;const e=t().Event(vt,{});this.$el.trigger(e),this.$el.one("transitionend",(()=>{this.$el.removeClass(this._getModifierBase()+ut);const e=t().Event(gt,{});this.$el.trigger(e)})).attr("aria-hidden","true").css("opacity",0).off("click",rt),this.$backdrop.one("transitionend",(()=>{this.$backdrop.remove(),u(),this.placementBody&&this.$placeholder.before(this.$el)})).removeClass(at),this._isShown=!1,this._unbindEvents()}_bindEvents(){this.$el.on("click",rt,(e=>this.hide(e))),t()(document).off(lt).one(lt,(e=>{document===e.target||this.el===e.target||this.$el.has(e.target).length||this.$el.trigger("focus")}));const e=this.$el.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]'),i=e[0],n=e[e.length-1];this.$el.on("keydown",(e=>{"Tab"===e.key&&(e.shiftKey?e.target===i&&(e.preventDefault(),n.focus()):e.target===n&&(e.preventDefault(),i.focus())),"Escape"===e.key&&this.hide()}))}_getModifierBase(){return this.$el.hasClass("env-modal-alert")?"env-modal-alert--":"env-modal-dialog--"}_unbindEvents(){this.$el.off("click keydown"),t()(document).off(lt)}_showBackdrop(){this.$backdrop=t()("<div/>",{class:"env-modal-dialog__backdrop"}),this.$el.on("click",(e=>{this.$backdrop.hasClass(ot)||e.target===e.currentTarget&&this._isShown&&this.hide()})),this.$backdrop.appendTo(document.body),this.$backdrop.one("animationend",this._removeBackdropAnimation).addClass("env-modal-dialog__backdrop--in env-animation-in-progress")}_removeBackdropAnimation(e){t()(e.currentTarget).removeClass(ot)}static _init(e,t){const n=i(e);if(n.length>0)return n.map((e=>{if("DIALOG"===e.tagName&&e.classList.contains("env-dialog"))return e.envDialog||(e.envDialog=new nt(e,(e=>(e=w.normalizeOptions(e,st),w.extend(!0,{},st,e)))(t))),e.envDialog;if(e.envDialog||(e.envDialog=new ft(e)),"string"==typeof t){if(!e.envDialog[t])throw new Error(`No method named "${t}"`);e.envDialog[t].call(e.envDialog)}return e.envDialog}))}static _jQueryInterface(e){return w.consoleWarning("jQuery",ht),this.each((()=>{i(this).forEach((t=>{ft._init(t,e)}))}))}}if("undefined"!=typeof document){const e=t().fn.envDialog;t().fn.envDialog=ft._jQueryInterface,t().fn.envDialog.Constructor=ft,t().fn.envDialog.noConflict=()=>(t().fn.envDialog=e,ft._jQueryInterface),document.addEventListener("click",(e=>{const t=e.target.closest(ct+","+dt);if(!t)return;e.preventDefault();const i=t.dataset.target;ft._init(document.querySelector(i),"show")}))}const bt=async(e,t)=>ft._init(e,t),_t={sv:{prev:"Föregående",next:"Nästa"},en:{prev:"Previous",next:"Next"}},yt={buttons:!0,imageSlider:!1,interval:5e3,keyboard:!0,pause:"hover",slide:!1,swipe:!0,wrap:!0},Et={ACTIVE:".env-image-slider__item--active",ACTIVE__CHILD:".env-image-slider__item--active > *",ACTIVE_DOT:".env-is-active",ACTIVE_ITEM:".env-image-slider__item--active.env-image-slider__item",DATA_SLIDE:"[data-move], [data-move-to]",SLIDER_DATA_ATTRIBUTE:"[data-image-slider]",INDICATORS:".env-image-slider__indicators",INDICATOR_ITEMS:".env-image-slider__indicators > *",INNER:".env-image-slider__inner",NEXT_PREV:".env-image-slider--next, .env-image-slider--prev",ITEM:".env-image-slider__item",THUMBNAILS:".env-image-slider__thumbnails",THUMBNAIL__ITEMS:".env-image-slider__thumbnails > *"},wt="env-image-slider__item--active",xt="env-is-active",At="env-image-slider__item--left",It="env-image-slider__item--next",Lt="env-image-slider__item--prev",Tt="env-image-slider__item--right",St="env-image-slider--slide",Ct="left",kt="next",$t="prev",Ot="right",Pt={KEYDOWN:"keydown",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SLID:"slid",SLIDE:"slide",JQSLID:"slid.env.image-slider",JQSLIDE:"slide.env.image-slider",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOUCHSTART:"touchstart"};class Dt{#n;#$;#O;#P;#D;#B;#t;constructor(e,t){this.el=e,this.isPaused=!1,this.#n=i(Et.ITEM,this.el),this.#$=n(Et.INDICATORS,this.el),this.#O=n(Et.THUMBNAILS,this.el),this.#D=!1,this.#P=null,this.#B=null,void 0===this.el.dataset.imageSlider&&this.el.setAttribute("data-image-slider",""),this.settings(t),this.#n.length>1&&t.buttons&&this._addSlideButtons(),this.#n.forEach(((e,t)=>{e.setAttribute("data-env-imageslider-index",t)})),this._bindEvents()}next(){this.#D||this._slide(kt)}prev(){this.#D||this._slide($t)}nextWhenVisible(){document.hidden||this.next()}pause(e){e||(this.isPaused=!0),clearInterval(this.#P),this.#P=null}cycle(e){e||(this.isPaused=!1),this.#P&&(clearInterval(this.#P),this.#P=null),this.#t.interval&&!this.isPaused&&(this.#P=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this.#t.interval))}goTo(e){this.#B=n(Et.ACTIVE_ITEM,this.el);const t=this._getItemIndex(this.#B);if(e>this.#n.length-1||e<0)return;if(this.#D)return;if(t===e)return this.pause(),void this.cycle();const i=e>t?kt:$t;this._slide(i,this.#n[e])}startTouchSlide(e){this.touchstartx=e.touches[0].pageX}moveTouchSlide(e){this.touchmovex=e.touches[0].pageX,this.movex=-(this.touchstartx-this.touchmovex),this.moved=!1;const t=n(Et.ACTIVE__CHILD,this.el);h(t,"transform",`translate3d(${this.movex}px, 0, 0)`),this.movex>80?(this.prev(),this.moved=!0,setTimeout((()=>{h(t,"transform","translate3d(0, 0, 0)")}),500)):this.movex<-80&&(this.next(),this.moved=!0,setTimeout((()=>{h(t,"transform","translate3d(0, 0, 0)")}),500))}endTouchSlide(){this.moved||h(n(Et.ACTIVE__CHILD,this.el),"transform","translate3d(0, 0, 0)")}dispose(){this.el=this.el.cloneNode(!0),delete this.el.envImageslider,delete this.el.envImagesliderJQ,this.el=null,this.#n=null,this.#P=null,this.isPaused=null,this.#D=null,this.#B=null,this.#$=null,this.#O=null}settings(e){this.#t=w.extend({},yt,this.el.dataset,w.isPlainObject(this.#t)?this.#t:{},e)}_addSlideButtons(){const e=this.el.id,t=n(Et.INNER,this.el),i=document.createElement("button");d(i,{type:"button",class:"env-image-slider--prev","data-move":"prev","data-target":`#${e}`}),i.innerHTML=`<svg class="env-image-slider__previous-icon env-icon env-icon-small">\n               <use xlink:href="/sitevision/envision-icons.svg#icon-arrow-left"></use></svg>\n               <span class="env-assistive-text">${this.#t.i18n.prev}</span>`;const s=document.createElement("button");d(s,{type:"button",class:"env-image-slider--next","data-move":"next","data-target":`#${e}`}),s.innerHTML=`<svg class="env-image-slider__previous-icon env-icon env-icon-small">\n               <use xlink:href="/sitevision/envision-icons.svg#icon-arrow-right"></use></svg>\n               <span class="env-assistive-text">${this.#t.i18n.next}</span>`,t.appendChild(i),t.appendChild(s)}_getItemByDirection(e,t){const i=e===kt,n=this._getItemIndex(t),s=this.#n.length-1;if((!i&&0===n||i&&n===s)&&!this.#t.wrap)return t;const o=(n+(i?1:-1))%this.#n.length;return-1===o?this.#n[s]:this.#n[o]}_bindEvents(){this.el.addEventListener("click",(e=>this._click(e))),this.#t.keyboard&&this.el.addEventListener(Pt.KEYDOWN,(e=>this._keydown(e))),"hover"===this.#t.pause&&"cycle"===this.#t.imageSlider&&(this.el.addEventListener(Pt.MOUSEENTER,(e=>this.pause(e))),this.el.addEventListener(Pt.MOUSELEAVE,(e=>this.cycle(e))),this.el.addEventListener(Pt.TOUCHEND,(()=>{this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((e=>this.cycle(e)),500,this.#t.interval)}))),this.#t.swipe&&this._bindTouchSlider()}_bindTouchSlider(){const e=n(Et.INNER,this.el);e.addEventListener(Pt.TOUCHSTART,(e=>{this.startTouchSlide(e)})),e.addEventListener(Pt.TOUCHMOVE,(e=>{this.moveTouchSlide(e)})),e.addEventListener(Pt.TOUCHEND,(e=>{this.endTouchSlide(e)}))}_keydown(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":e.preventDefault(),this.prev();break;case"ArrowRight":e.preventDefault(),this.next();break;default:return}}_click(e){const t=e.target.closest(Et.DATA_SLIDE);if(!t)return;let i=t.dataset;if(!i.target||!document.querySelector(i.target))return;const n=document.querySelector(i.target);if(n&&void 0!==n.dataset.imageSlider){if(i.moveTo){const e=parseInt(i.moveTo,10);this.settings({interval:!1}),this.goTo(e)}else i.move!==$t&&i.move!==kt||this[i.move]();e.preventDefault()}}_getItemIndex(e){return parseInt(e.dataset.envImagesliderIndex,10)}_triggerSlideEvent(e,i){const s=this._getItemIndex(e),o=this._getItemIndex(n(Et.ACTIVE_ITEM,this.el));let a;return this.el.envImagesliderJQ?(a=t().Event(Pt.JQSLIDE,{targetElement:e,direction:i,from:o,to:s}),t()(this.el).trigger(a),a.defaultPrevented=a.isDefaultPrevented()):(a=new CustomEvent(Pt.SLIDE,{bubbles:!0,cancelable:!0,detail:{direction:i,from:o,to:s}}),e.dispatchEvent(a)),a}_setActiveIndicatorElement(e){if(this.#$){const t=n(Et.ACTIVE_DOT,this.#$),s=i(Et.INDICATOR_ITEMS,this.#$)[this._getItemIndex(e)];t&&t.classList.remove(xt),s&&s.classList.add(xt)}else if(this.#O){const t=n(Et.ACTIVE,this.#O),s=i(Et.ACTIVE,this.#O)[this._getItemIndex(e)];t&&t.classList.remove(wt),s&&s.classList.add(wt)}}_slide(e,i){const s=n(Et.ACTIVE_ITEM,this.el),o=this._getItemIndex(s),a=n(i||s&&this._getItemByDirection(e,s)),r=this._getItemIndex(a);let l,h,d;if(e===kt?(l=At,h=It,d=Ct):(l=Tt,h=Lt,d=Ot),a&&a.classList.contains(wt))return void(this.#D=!1);const c=this._triggerSlideEvent(a,d);if(c.defaultPrevented)return;if(!s||!a)return;let u;this.#D=!0,this._setActiveIndicatorElement(a),this.el.envImagesliderJQ?(u=t().Event(Pt.JQSLID,{relatedTarget:a,direction:d,from:o,to:r}),u.defaultPrevented=c.isDefaultPrevented()):u=new CustomEvent(Pt.SLID,{bubbles:!0,cancelable:!0,detail:{relatedTarget:a,direction:d,from:o,to:r}}),this.el.classList.contains(St)?(a.classList.add(h),et.reflow(a),s.classList.add(l),a.classList.add(l),s.addEventListener("transitionend",(()=>{a.classList.remove(l,h),a.classList.add(wt),s.classList.remove(wt,h,l),this.#D=!1,this.el.envImagesliderJQ?t()(this.el).trigger(u):this.el.dispatchEvent(u)}),{once:!0})):(s.classList.remove(wt),a.classList.add(wt),this.#D=!1,this.el.envImagesliderJQ?t()(this.el).trigger(c):this.el.dispatchEvent(c))}static _init(e,t,n){w.consoleWarning("component","Image slider","image-slider","Image viewer 2");const s=i(e);if(s.length>0)return s.map((e=>{let i;b(e),i="object"==typeof t?{...yt,...e.dataset,...t,i18n:w.getLanguageOptions(t?.i18n,_t,e)}:{...yt,...e.dataset,i18n:w.getLanguageOptions({},_t,e)},e.envImageslider?e.envImageslider.settings(w.extend({},{...e.dataset,...t})):(e.envImagesliderJQ=n,e.envImageslider=new Dt(e,i));const s="string"==typeof t?t:i.move;if("number"==typeof t)e.envImageslider.goTo(t);else if("string"==typeof s){if(void 0===e.envImageslider[s])throw new Error(`No method named "${s}"`);e.envImageslider[s]()}return i.interval&&"cycle"===i.imageSlider&&(e.envImageslider.pause(),e.envImageslider.cycle()),e.envImageslider}))}static _jQueryInterface(e){return this.each((()=>{i(this).forEach((t=>{Dt._init(t,e,!0)}))}))}}if("undefined"!=typeof document){window.addEventListener("load",(()=>{const e=i(Et.SLIDER_DATA_ATTRIBUTE);e.length>0&&Dt._init(e)}));const e=t().fn.envImageslider;t().fn.envImageslider=Dt._jQueryInterface,t().fn.envImageslider.Constructor=Dt,t().fn.envImageslider.noConflict=()=>(t().fn.envImageslider=e,Dt._jQueryInterface)}const Bt=async(e,t)=>Dt._init(e,t),jt=(e,t)=>{t=Object.assign({duration:300},t),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t.duration+"ms";const i=getComputedStyle(e);if("border-box"===i.boxSizing)e.style.height=e.offsetHeight+"px";else{const t=parseFloat(i.paddingTop),n=parseFloat(i.paddingBottom),s=parseFloat(i.borderTopWidth),o=parseFloat(i.borderBottomWidth);e.style.height=e.offsetHeight-t-n-s-o+"px"}e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),t.complete&&t.complete instanceof Function&&t.complete.call()}),t.duration)},Nt=(e,t)=>{t=Object.assign({duration:300},t),e.style.removeProperty("display");let i=window.getComputedStyle(e).display;"none"===i&&(i="block"),e.style.display=i;let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t.duration+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),t.complete&&t.complete instanceof Function&&t.complete.call()}),t.duration)},Mt="aria-expanded",Ht="data-expanded",Vt="envAccordion",Rt="env-accordion--show",Kt="[data-env-accordion]";class Qt{#j;constructor(e,t){this.el=e,this.parentEl=n(this.el.dataset.parent),this.togglerEl=t||this.parentEl&&n(`${Kt}[aria-controls="${this.el.id}"]`,this.parentEl),this.el.classList.contains(Rt)?(this.el.classList.remove(Rt),this.el.setAttribute(Ht,"true"),g(this.el),this.togglerEl&&this.togglerEl.setAttribute(Mt,"true")):this.togglerEl&&this.togglerEl.setAttribute(Mt,"false"),this.el.removeAttribute(Mt),this.speed=et.getToggleSpeed(this.el,"--env-collapse-toggle-duration")}toggle(){"true"===this.el.getAttribute(Ht)?this.hide():this.show()}show(){this.#j||(this.parentEl&&i(`[data-expanded="true"], .${Rt}`,this.parentEl).forEach((e=>{e.isEqualNode(this.el)||this._hide(e,this.speed,!0)})),this.#j=!0,Nt(this.el,{duration:this.speed,complete:()=>{this.togglerEl&&this.togglerEl.setAttribute(Mt,"true"),this.el.setAttribute(Ht,"true"),this.#j=!1}}))}hide(){this.#j||this._hide(this.el,this.speed)}_hide(e,t,i){i||(this.#j=!0),jt(e,{duration:t,complete:()=>{this.togglerEl&&this.togglerEl.setAttribute(Mt,"false"),e.setAttribute(Ht,"false"),e.classList.remove(Rt),i||(this.#j=!1)}})}static _init(e,t){const n=i(e);if(n.length>0)return n.map((e=>{if(e.envAccordion||(t instanceof Element?e.envAccordion=new Qt(e,t):e.envAccordion=new Qt(e)),"string"==typeof t){if(!e.envAccordion[t])throw new Error(`No method named "${t}"`);e.envAccordion[t].call(e.envAccordion)}else e.envAccordion.toggle.call(e.envAccordion);return e.envAccordion}))}static _jQueryInterface(e){return w.consoleWarning("jQuery",Vt),this.each((()=>{i(this).forEach((t=>{Qt._init(t,e)}))}))}}if("undefined"!=typeof document){const e=t().fn.envAccordion;t().fn.envAccordion=Qt._jQueryInterface,t().fn.envAccordion.Constructor=Qt,t().fn.envAccordion.noConflict=()=>(t().fn.envAccordion=e,Qt._jQueryInterface),document.addEventListener("click",(e=>{const t=e.target.closest(Kt);if(!t)return;e.preventDefault();const i=t.dataset.target||t.getAttribute("href");Qt._init(document.querySelector(i),t)}))}const Ft=async(e,t)=>Qt._init(e,t),Ut="aria-expanded",qt="envCollapse",zt="env-collapse--expanded",Wt="env-collapse--show";class Jt{constructor(e){this.el=e,this.togglerEl=n(`[data-env-collapse][href="#${e.id}"], [data-env-collapse][data-target="#${e.id}"]`),this.el.classList.contains(Wt)&&(g(this.el),this.togglerEl.classList.add(zt),this.togglerEl.setAttribute(Ut,"true")),this.speed=et.getToggleSpeed(this.togglerEl,"--env-collapse-toggle-duration")}toggle(){this.el.classList.contains(Wt)?this.hide():this.show()}show(){this.el.getAnimations().length>0||(this.togglerEl&&(this.togglerEl.classList.add(zt),this.togglerEl.setAttribute(Ut,"true")),this.el.classList.add(Wt),Nt(this.el,{duration:this.speed}))}hide(){this.el.getAnimations().length>0||(this.togglerEl&&(this.togglerEl.classList.remove(zt),this.togglerEl.setAttribute(Ut,"false")),jt(this.el,{duration:this.speed,complete:()=>{this.el.classList.remove(Wt)}}))}static _init(e,t){const n=i(e);if(n.length>0)return n.map((e=>{if(e.envCollapse||(e.envCollapse=new Jt(e)),"string"==typeof t){if(!e.envCollapse[t])throw new Error(`No method named "${t}"`);e.envCollapse[t].call(e.envCollapse)}else e.envCollapse.toggle.call(e.envCollapse);return e.envCollapse}))}static _jQueryInterface(e){return w.consoleWarning("jQuery",qt),this.each((()=>{i(this).forEach((t=>{Jt._init(t,e)}))}))}}if("undefined"!=typeof document){const e=t().fn.envCollapse;t().fn.envCollapse=Jt._jQueryInterface,t().fn.envCollapse.Constructor=Jt,t().fn.envCollapse.noConflict=()=>(t().fn.envCollapse=e,Jt._jQueryInterface),document.addEventListener("click",(e=>{const t=e.target.closest("[data-env-collapse]");if(!t)return;e.preventDefault();const i=t.dataset.target||t.getAttribute("href");Jt._init(document.querySelector(i))}))}const Xt=async(e,t)=>Jt._init(e,t);class Gt{constructor(e,t,n){this.button=n,this.container=e,this.placeholder=document.createElement("span"),this.menu=t,this.menuitems=i(".env-dropdown__item",this.menu),b(this.button),b(this.menu),this.button.setAttribute("aria-haspopup","true"),this.button.setAttribute("aria-controls",this.menu.id),this.menu.insertAdjacentElement("beforebegin",this.placeholder),this.menu.setAttribute("aria-labelledby",this.button.id),this.menu.setAttribute("role","menu"),this.menuitems.forEach(((e,t)=>{const i=e.closest("li");e.dataset.envDropdownIndex=t,e.setAttribute("role","menuitem"),e!==i&&this.menu.contains(e.closest("li"))&&i.setAttribute("role","none")})),this.openInBody="body"===this.button.dataset.container||void 0!==this.button.dataset.dropdownPlacementBody,this.handleButtonClick=this.handleButtonClick.bind(this),this.handleButtonKeyDown=this.handleButtonKeyDown.bind(this),this.handleMenuKeyDown=this.handleMenuKeyDown.bind(this),this.handleOutsideClick=this.handleOutsideClick.bind(this),this.handleOutsideKeyUp=this.handleOutsideKeyUp.bind(this),this._bindEventsOnInit()}handleButtonClick(){"true"===this.button.getAttribute("aria-expanded")?this.hide():this.show()}handleButtonKeyDown(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key&&" "!==e.key||(e.preventDefault(),this.show("ArrowUp"===e.key?this.menuitems.length-1:0))}show(e){e=e||0,this.button.setAttribute("aria-expanded","true"),this.openInBody&&document.body.appendChild(this.menu),p(this.menu),this._bindMenuEvents(),y().then((t=>{const i="end"===this.button.dataset.placement,n=i?"bottom-end":"bottom-start";this._popper=t(i?this.button:this.container,this.menu,{placement:n,modifiers:{name:"flip",enabled:!1}}),this._popper.update(),setTimeout((()=>{this.menuitems[e].focus()}),1)}))}hide(){this.button.setAttribute("aria-expanded","false"),this._unbindMenuEvents(),v(this.menu),this.openInBody&&this.placeholder.insertAdjacentElement("afterend",this.menu)}_bindEventsOnInit(){this.button.addEventListener("click",this.handleButtonClick),this.button.addEventListener("keydown",this.handleButtonKeyDown)}_bindMenuEvents(){this._unbindMenuEvents(),document.addEventListener("click",this.handleOutsideClick),document.addEventListener("keydown",this.handleMenuKeyDown),document.addEventListener("keyup",this.handleOutsideKeyUp)}_unbindMenuEvents(){document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("keydown",this.handleMenuKeyDown),document.removeEventListener("keyup",this.handleOutsideKeyUp)}handleOutsideClick(e){const t=e.target;this.button.contains(t)||this.menu.contains(t)||this.hide()}handleOutsideKeyUp(e){const t=e.target;this.button.contains(t)||this.menu.contains(t)||this.hide()}handleMenuKeyDown(e){const t=e.target,i=this.menuitems.length;if("Escape"===e.key)this.hide(),this.button.focus();else if(this.menu.contains(t)&&i>0){const i=parseInt(t.dataset.envDropdownIndex,10);if(" "===e.key&&"BUTTON"!==t.tagName){e.preventDefault();const i=t.closest("[role=menuitem]");i&&i.click()}else if("Tab"===e.key){if(e.shiftKey)e.preventDefault(),this.button.focus();else if(this.openInBody){e.preventDefault();((e,t)=>{t=t||document;const i=f(t);let n=e;for(let t=0;t<i.length;t++)if(i[t]===e){n=t===i.length-1?i[0]:i[t+1];break}return n})(this.button).focus()}this.hide()}else if("Home"===e.key)e.preventDefault(),this.menuitems[0].focus();else if("End"===e.key)e.preventDefault(),this.menuitems[this.menuitems.length-1].focus();else if("ArrowUp"===e.key){e.preventDefault();const t=i>0?i-1:this.menuitems.length-1;this.menuitems[t].focus()}else if("ArrowDown"===e.key){e.preventDefault();const t=i<this.menuitems.length-1?i+1:0;this.menuitems[t].focus()}}}}const Yt=async e=>{const t=e.target.closest("[data-dropdown]");if(t&&!t.envDropdown){let i=t.dataset.target&&e.target.closest(t.dataset.target);i||(i=t.parentNode),t.envDropdown=!0;const n=i.querySelector(".env-dropdown__menu");n&&(await y(),t.envDropdown=new Gt(i,n,t),n.dataset.envDropdown="true",v(n),"click"===e.type&&t.envDropdown.handleButtonClick())}};document&&(document.addEventListener("focusin",Yt),document.addEventListener("click",Yt))})(),l})()));
//# sourceMappingURL=envision.js.map