{"version":3,"sources":["webpack://envision/webpack/universalModuleDefinition","webpack://envision/../node_modules/svgxuse/svgxuse.js","webpack://envision/../node_modules/tom-select/dist/js/tom-select.complete.js","webpack://envision/external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack://envision/webpack/bootstrap","webpack://envision/webpack/runtime/compat get default export","webpack://envision/webpack/runtime/define property getters","webpack://envision/webpack/runtime/global","webpack://envision/webpack/runtime/hasOwnProperty shorthand","webpack://envision/webpack/runtime/make namespace object","webpack://envision/webpack/runtime/publicPath","webpack://envision/./src/icons/envision-icons.svg","webpack://envision/./src/js/util/util.js","webpack://envision/./src/js/util/nodes.js","webpack://envision/./src/js/select.js","webpack://envision/./src/js/util/css-util.js","webpack://envision/./src/js/accordion.js","webpack://envision/./src/js/collapse.js","webpack://envision/./src/js/dropdown.js","webpack://envision/./src/js/image-slider.js","webpack://envision/./src/js/image-viewer.js","webpack://envision/./src/js/modal-dialog.js","webpack://envision/../node_modules/popper.js/dist/esm/popper.js","webpack://envision/./src/js/popover.js","webpack://envision/./src/js/range-slider.js","webpack://envision/./src/js/tabs.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__254__","window","addEventListener","checkUseElems","tid","winLoad","cache","Object","create","debouncedCheck","clearTimeout","setTimeout","unobserveChanges","createRequest","url","getOrigin","loc","a","undefined","protocol","document","createElement","href","replace","host","Request","origin","origin2","XMLHttpRequest","location","withCredentials","XDomainRequest","xlinkNS","base","bcr","hash","i","isHidden","uses","xhr","inProgressCount","observeIfDone","observer","MutationObserver","observe","documentElement","childList","subtree","attributes","disconnect","removeEventListener","ignore","attrUpdateFunc","spec","useEl","setAttributeNS","hasAttribute","setAttribute","onloadFunc","svg","body","x","onload","innerHTML","responseText","getElementsByTagName","style","position","width","height","overflow","insertBefore","firstChild","onErrorTimeout","onerror","ontimeout","length","getBoundingClientRect","getAttribute","getAttributeNS","split","left","right","top","bottom","open","send","abort","readyState","forEvents","events","callback","forEach","event","MicroEvent","_events","fct","push","n","arguments","splice","indexOf","args","self","apply","MicroPlugin","Interface","plugins","name","fn","key","queue","names","settings","requested","loaded","Array","isArray","options","hasOwnProperty","shift","plugin","Error","loadPlugin","code_points","asciifold","str","normalize","toLowerCase","generateDiacritics","latin_convert","diacritics","code_range","diacritic","String","fromCharCode","latin","toUpperCase","diacriticRegexPoints","regex","RegExp","getAttr","obj","getAttrNesting","scoreValue","value","token","weight","score","pos","search","string","escape_regex","propToArray","iterate","object","cmp","b","Sifter","items","query","respect_word_boundaries","weights","tokens","words","field_regex","keys","map","join","word","field_match","field","match","prepareSearch","_getScoreFunction","token_count","fields","field_count","getAttrFn","scoreObject","data","sum","conjunction","_getSortFunction","sort_fld","sort_flds_count","multiplier","implicit_score","sort","sort_empty","sort_flds","multipliers","get_field","result","id","unshift","direction","optsUser","assign","fld_name","field_params","trim","tokenize","total","nesting","fn_sort","fn_score","item","filter","limit","slice","highlight","element","node","skip","nodeType","spannode","className","middlebit","splitText","middleclone","cloneNode","appendChild","parentNode","replaceChild","childNodes","test","tagName","removeHighlight","el","elements","querySelectorAll","prototype","call","parent","KEY_A","KEY_RETURN","KEY_ESC","KEY_LEFT","KEY_UP","KEY_RIGHT","KEY_DOWN","KEY_BACKSPACE","KEY_DELETE","KEY_TAB","KEY_SHORTCUT","navigator","userAgent","defaults","optgroups","delimiter","splitOn","persist","createOnBlur","createFilter","openOnFocus","shouldOpen","maxOptions","maxItems","hideSelected","duplicates","addPrecedence","selectOnTab","preload","allowEmptyOption","closeAfterSelect","loadThrottle","loadingClass","dataAttr","optgroupField","valueField","labelField","disabledField","optgroupLabelField","optgroupValueField","lockOptgroupOrder","sortField","searchField","searchConjunction","mode","wrapperClass","inputClass","dropdownClass","dropdownContentClass","itemClass","optionClass","dropdownParent","controlInput","copyClassesToDropdown","placeholder","hidePlaceholder","shouldLoad","render","hash_key","escape_html","loadDebounce","delay","timeout","loading","Math","max","loadedSearches","debounce_events","types","type","trigger","event_args","getSelection","input","start","selectionStart","selectionEnd","preventDefault","evt","stop","stopPropagation","addEvent","target","isKeyDown","key_name","altKey","ctrlKey","shiftKey","metaKey","getId","existing_id","addSlashes","getSettings","settings_user","attr_data","field_label","field_value","field_disabled","field_optgroup","field_optgroup_label","field_optgroup_value","tag_name","option","querySelector","textContent","settings_element","init_textbox","values","data_raw","JSON","parse","opt","_value","optionsMap","group_count","readData","dataset","json","addOption","group","arr","option_data","disabled","$option","selected","addGroup","optgroup","optgroup_data","children","child","init_select","getDom","jquery","HTMLElement","div","escapeQuery","triggerEvent","dom_el","event_name","createEvent","initEvent","dispatchEvent","applyCSS","css","addClasses","elmts","classes","norm_classes","classesArray","castAsArray","cls","classList","add","removeClasses","remove","_classes","concat","Boolean","arg","parentMatch","selector","wrapper","contains","matches","getTail","list","isEmptyObject","nodeIndex","amongst","nodeName","previousElementSibling","setAttr","attrs","attr","instance_i","TomSelect","input_arg","dir","super","control_input","dropdown","control","dropdown_content","order","tabIndex","is_select_tag","rtl","inputId","_destroy","sifter","tab_key","isOpen","isDisabled","isRequired","isInvalid","isLocked","isFocused","isInputHidden","isSetup","ignoreFocus","hasOptions","currentResults","lastValue","caretPos","activeOption","activeItems","userOptions","renderCache","tomselect","getComputedStyle","getPropertyValue","required","setupOptions","initializePlugins","setupCallbacks","setupTemplates","setup","inputMode","classes_plugins","control_id","passive_event","passive","listboxId","append","role","haspopup","label","for","multiple","load","onOptionSelect","target_match","onItemSelect","onClick","e","onKeyDown","onKeyUp","onKeyPress","positionDropdown","onBlur","onFocus","onPaste","doc_mousedown","blur","inputState","win_scroll","revertSettings","hidden","insertAdjacentElement","setValue","refreshState","updateOriginalInput","refreshItems","disable","on","onChange","registerOption","registerOptionGroup","templates","escape","callbacks","clearActiveItems","focus","isFull","pastedText","inputValue","splitInput","piece","createItem","character","keyCode","which","selectAll","close","next","getAdjacent","setActiveOption","prev","advanceSelection","deleteSelection","refreshOptions","wasFocused","showInput","setActiveItem","deactivate","setCaret","parentElement","lastQuery","addItem","getOption","canLoad","loadCallback","bind","clearActiveOption","silent","clear","addItems","eventName","begin","end","swap","last","getLastActive","setActiveItemClass","removeActiveItem","hideInput","last_active","idx","height_menu","height_item","y","clientHeight","scrollTop","offsetHeight","removeAttribute","controlChildren","setTextboxValue","getScoreFunction","getSearchOptions","calculateScore","triggerDropdown","j","k","groups_order","html","has_create_option","active","groups","results","active_before_hash","show_dropdown","min","opt_value","option_el","toggle","includes","createDocumentFragment","$order","group_options","group_html","tok","add_template","template","content","canCreate","active_index","selectable","dat","$id","hashed_id","clearCache","item_new","value_new","index_item","cache_items","cache_options","order_old","getItem","removeItem","all","buffer","isPending","wasFull","insertAtCaret","removeOption","output","caret","lock","created","unlock","refreshValidityState","checkValidity","invalid","opts","prepend","getValue","visibility","display","context","rect","scrollY","scrollX","selection","onDelete","pop","adjacent","nextElementSibling","new_pos","from","getElementsByClassName","off","templateName","when","method","new_fn","orig_method","result_new","changed","orig_onOptionSelect","UpdateCheckbox","checkbox","checked","hook","orig_render_option","rendered","title","button","$","sortable","orig_lock","orig_unlock","enable","$control","forcePlaceholderSize","ui","helper","each","headerClass","titleRowClass","labelClass","closeClass","header","close_link","tabindex","test_input","cssText","transfer_styles","style_name","resize","clientWidth","orig_deleteSelection","orig_keydown","index","previousSibling","nextSibling","orig_render_item","close_button","text","orig_canLoad","orig_clearActiveOption","orig_loadCallback","pagination","loading_more","firstUrl","canLoadMore","setNextUrl","next_url","getUrl","clearOptions","no_more_results","scrollHeight","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","o","defineProperty","enumerable","get","g","globalThis","Function","prop","r","Symbol","toStringTag","p","getSelectorFromElement","error","isPlainObject","proto","getPrototypeOf","normalizeOptions","console","lang","sv","remove_button","clear_button","no_results","en","staticConfig","option_create","i18n","userConfig","clearButton","onInitialize","onItemAdd","onItemRemove","onClear","onOptionAdd","onOptionRemove","onOptionClear","onDropdownOpen","onDropdownClose","onType","onLoad","SelectPlugin","select","addOptions","updateOption","destroy","nodes","domNodes","getNodes","Util","reflow","isTouch","matchMedia","getToggleSpeed","durationCustomProperty","duration","speed","parseFloat","parseInt","ARIA_EXPANDED","NAME","SHOW","MODIFIER_BASE","Accordion","$el","hasClass","removeClass","show","CssUtil","config","hide","find","_hide","slideDown","slideUp","NO_CONFLICT","_jQuery","Constructor","noConflict","$this","EXPANDED","Collapse","$trigger","is","addClass","$target","ENV_DROPDOWN_OPEN","TOGGLE_DROPDOWN","ENV_DROPDOWN","ENV_CLICK_EVENT","ENV_KEYDOWN_EVENT","ENV_DROPDOWN_MENU","KEYS","REGEXP_KEYDOWN","Dropdown","_id","_bindEvents","_unbindEvents","ENV_CLICK","ENV_KEYDOWN","one","clearMenus","$toggles","len","closest","dropdownMenu","originalEvent","path","keydownHandler","isActive","getToggleButton","$items","selectMenuItem","click","DATA_KEY","EVENT_KEY","DATA_API_KEY","DEFAULTS","buttons","imageSlider","interval","keyboard","pause","slide","swipe","wrap","SELECTORS","ClassName","Direction","Events","CLICK_DATA_API","KEYDOWN","LOAD_DATA_API","MOUSEENTER","MOUSELEAVE","SLID","SLIDE","TOUCHEND","TOUCHMOVE","TOUCHSTART","Imageslider","$images","_isSliding","_isPaused","_interval","_activeElement","_indicatorsElement","_thumbnailElements","_addSlideButtons","_config","action","move","goTo","cycle","eq","slideIndex","_jQueryInterface","_slide","clearInterval","setInterval","visibilityState","nextWhenVisible","activeIndex","_getItemIndex","touchstartx","touches","pageX","touchmovex","movex","moved","activeItem","removeData","sliderId","buttonHTML","activeElement","isNextDirection","lastImageIndex","itemIndex","_keydown","touchTimeout","_bindTouchSlider","container","startTouchSlide","moveTouchSlide","endTouchSlide","targetElement","eventDirectionName","targetIndex","fromIndex","slideEvent","to","nextIndicator","firstElementChild","directionalClassName","orderClassName","activeElementIndex","nextElement","_getItemByDirection","nextElementIndex","$nextElement","_triggerSlideEvent","isDefaultPrevented","_setActiveIndicatorElement","slidEvent","relatedTarget","$activeElement","_dataApiClickHandler","slider","$slider","ANIMATION","BACKDROP_ANIMATION","Imageviewer","$image","_isShown","_getNextItemIndex","_getPrevItemIndex","Number","$btnContainer","$downloadingImage","_loadImage","$imgContainer","$modal","class","appendTo","_getButtons","_getIndicators","_bindContainerEvents","_showBackdrop","prependTo","$backdrop","$imageModal","src","imageHeight","imageWidth","windowHeight","innerHeight","currentTarget","viewerIndex","indicatorItems","_getIndicatorItems","_removeBackdropAnimation","focusableElements","firstElement","lastElement","indicator","envImageviewer","DISMISS_SELECTOR","FOCUSIN","EVENTS","ModalDialog","showEvent","shownEvent","_getModifierBase","removeAttr","hideEvent","hiddenEvent","has","isBrowser","timeoutDuration","longerTimeoutBrowsers","debounce","Promise","called","resolve","then","scheduled","isFunction","functionToCheck","toString","getStyleComputedProperty","property","ownerDocument","defaultView","getParentNode","getScrollParent","_getStyleComputedProp","overflowX","overflowY","getReferenceNode","reference","referenceNode","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","version","getOffsetParent","noOffsetParent","offsetParent","getRoot","findCommonOffsetParent","element1","element2","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","range","createRange","setStart","setEnd","commonAncestorContainer","element1root","getScroll","side","upperSide","scrollingElement","includeScroll","subtract","scrollLeft","modifier","getBordersSize","styles","axis","sideA","sideB","getSize","computedStyle","getWindowSizes","classCallCheck","instance","TypeError","createClass","defineProperties","props","descriptor","configurable","writable","protoProps","staticProps","_extends","source","getClientRect","offsets","sizes","horizScrollbar","offsetWidth","vertScrollbar","getOffsetRectRelativeToArbitraryNode","fixedPosition","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","getViewportOffsetRectRelativeToArtbitraryNode","excludeScroll","relativeOffset","innerWidth","offset","isFixed","getFixedPositionOffsetParent","getBoundaries","popper","padding","boundariesElement","boundaries","boundariesNode","_getWindowSizes","isPaddingNumber","getArea","_ref","computeAutoPlacement","placement","refRect","rects","sortedAreas","area","filteredAreas","_ref2","computedPlacement","variation","getReferenceOffsets","state","commonOffsetParent","getOuterSizes","marginBottom","marginRight","getOppositePlacement","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","check","runModifiers","modifiers","ends","findIndex","cur","warn","enabled","update","isDestroyed","arrowStyles","flipped","positionFixed","flip","originalPlacement","isCreated","onUpdate","onCreate","isModifierEnabled","modifierName","some","getSupportedPropertyName","prefixes","upperProp","charAt","prefix","toCheck","willChange","disableEventListeners","removeOnDestroy","removeChild","getWindow","attachToScrollParents","scrollParents","isBody","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","scheduleUpdate","cancelAnimationFrame","isNumeric","isNaN","isFinite","setStyles","unit","isFirefox","isModifierRequired","requestingName","requestedName","requesting","_requesting","placements","validPlacements","clockwise","counter","reverse","BEHAVIORS","parseOffset","basePlacement","useHeight","fragments","frag","divider","splitRegex","ops","op","mergeWithPrevious","reduce","toValue","index2","Defaults","shiftvariation","_data$offsets","isVertical","shiftOffsets","preventOverflow","transformProp","popperStyles","transform","priority","primary","escapeWithReference","secondary","keepTogether","floor","opSide","arrow","_data$offsets$arrow","arrowElement","sideCapitalized","altSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","round","placementOpposite","flipOrder","behavior","step","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","getOppositeVariation","inner","subtractLength","bound","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","shouldRound","noRound","v","referenceWidth","popperWidth","isVariation","horizontalToInteger","verticalToInteger","getRoundedOffsets","devicePixelRatio","prefixedProperty","invertTop","invertLeft","applyStyle","modifierOptions","Popper","_this","requestAnimationFrame","Utils","PopperUtils","IDENTIFIER","EVENT_NAMESPACE","attachmentMapping","clickOutside","constraints","escapeContent","Popover","bindEvents","isShowing","hoverTrigger","inEvent","outEvent","hidetimeout","showtimeout","hoverPopover","$popoverElement","getPopoverElement","setText","setTitle","setContent","setArrowPosition","detach","oldClassNames","_cleanTipClass","_addAttachmentClass","_popper","_handlePopperPlacementChange","clickOutsideHandler","HANDLE_INDEX","visibleValues","RangeSlider","$document","handles","$range","valueHolders","handleEvents","mousedown","_initSlide","touchstart","keydown","_initKeySlide","keyup","_stopKeySlide","rangeSlider","initialize","_setupHandles","_refreshRange","_trimAlignValue","handle","lastValPercent","valPercent","val","_getValue","$closestHandle","thisDistance","_getPosition","normValue","_normValueFromMouse","distance","_handleSlide","_stopSlide","abs","_lastChangedValue","_handleIndex","_clickOffset","newVal","otherVal","currentValue","newValues","_getValues","_trigger","_setValue","_keySliding","curVal","pixelTotal","outerWidth","valueTotal","percentMouse","valueMouse","pageY","valModStep","alignValue","toFixed","newValue","cb","ARIA_SELECTED","ARIA_HIDDEN","IS_ACTIVE","Tabs","$tabs","$panels","$activeTab","argument","tabs","tab","$tab","$panel","_setActive","initialized","_resetActive","_getPanelForTab"],"mappings":"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","file":"envision.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"envision\"] = factory(require(\"jquery\"));\n\telse\n\t\troot[\"envision\"] = factory(root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__254__) {\nreturn ","/*!\n * @copyright Copyright (c) 2017 IcoMoon.io\n * @license   Licensed under MIT license\n *            See https://github.com/Keyamoon/svgxuse\n * @version   1.2.6\n */\n/*jslint browser: true */\n/*global XDomainRequest, MutationObserver, window */\n(function () {\n    \"use strict\";\n    if (typeof window !== \"undefined\" && window.addEventListener) {\n        var cache = Object.create(null); // holds xhr objects to prevent multiple requests\n        var checkUseElems;\n        var tid; // timeout id\n        var debouncedCheck = function () {\n            clearTimeout(tid);\n            tid = setTimeout(checkUseElems, 100);\n        };\n        var unobserveChanges = function () {\n            return;\n        };\n        var observeChanges = function () {\n            var observer;\n            window.addEventListener(\"resize\", debouncedCheck, false);\n            window.addEventListener(\"orientationchange\", debouncedCheck, false);\n            if (window.MutationObserver) {\n                observer = new MutationObserver(debouncedCheck);\n                observer.observe(document.documentElement, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true\n                });\n                unobserveChanges = function () {\n                    try {\n                        observer.disconnect();\n                        window.removeEventListener(\"resize\", debouncedCheck, false);\n                        window.removeEventListener(\"orientationchange\", debouncedCheck, false);\n                    } catch (ignore) {}\n                };\n            } else {\n                document.documentElement.addEventListener(\"DOMSubtreeModified\", debouncedCheck, false);\n                unobserveChanges = function () {\n                    document.documentElement.removeEventListener(\"DOMSubtreeModified\", debouncedCheck, false);\n                    window.removeEventListener(\"resize\", debouncedCheck, false);\n                    window.removeEventListener(\"orientationchange\", debouncedCheck, false);\n                };\n            }\n        };\n        var createRequest = function (url) {\n            // In IE 9, cross origin requests can only be sent using XDomainRequest.\n            // XDomainRequest would fail if CORS headers are not set.\n            // Therefore, XDomainRequest should only be used with cross origin requests.\n            function getOrigin(loc) {\n                var a;\n                if (loc.protocol !== undefined) {\n                    a = loc;\n                } else {\n                    a = document.createElement(\"a\");\n                    a.href = loc;\n                }\n                return a.protocol.replace(/:/g, \"\") + a.host;\n            }\n            var Request;\n            var origin;\n            var origin2;\n            if (window.XMLHttpRequest) {\n                Request = new XMLHttpRequest();\n                origin = getOrigin(location);\n                origin2 = getOrigin(url);\n                if (Request.withCredentials === undefined && origin2 !== \"\" && origin2 !== origin) {\n                    Request = XDomainRequest || undefined;\n                } else {\n                    Request = XMLHttpRequest;\n                }\n            }\n            return Request;\n        };\n        var xlinkNS = \"http://www.w3.org/1999/xlink\";\n        checkUseElems = function () {\n            var base;\n            var bcr;\n            var fallback = \"\"; // optional fallback URL in case no base path to SVG file was given and no symbol definition was found.\n            var hash;\n            var href;\n            var i;\n            var inProgressCount = 0;\n            var isHidden;\n            var Request;\n            var url;\n            var uses;\n            var xhr;\n            function observeIfDone() {\n                // If done with making changes, start watching for chagnes in DOM again\n                inProgressCount -= 1;\n                if (inProgressCount === 0) { // if all xhrs were resolved\n                    unobserveChanges(); // make sure to remove old handlers\n                    observeChanges(); // watch for changes to DOM\n                }\n            }\n            function attrUpdateFunc(spec) {\n                return function () {\n                    if (cache[spec.base] !== true) {\n                        spec.useEl.setAttributeNS(xlinkNS, \"xlink:href\", \"#\" + spec.hash);\n                        if (spec.useEl.hasAttribute(\"href\")) {\n                            spec.useEl.setAttribute(\"href\", \"#\" + spec.hash);\n                        }\n                    }\n                };\n            }\n            function onloadFunc(xhr) {\n                return function () {\n                    var body = document.body;\n                    var x = document.createElement(\"x\");\n                    var svg;\n                    xhr.onload = null;\n                    x.innerHTML = xhr.responseText;\n                    svg = x.getElementsByTagName(\"svg\")[0];\n                    if (svg) {\n                        svg.setAttribute(\"aria-hidden\", \"true\");\n                        svg.style.position = \"absolute\";\n                        svg.style.width = 0;\n                        svg.style.height = 0;\n                        svg.style.overflow = \"hidden\";\n                        body.insertBefore(svg, body.firstChild);\n                    }\n                    observeIfDone();\n                };\n            }\n            function onErrorTimeout(xhr) {\n                return function () {\n                    xhr.onerror = null;\n                    xhr.ontimeout = null;\n                    observeIfDone();\n                };\n            }\n            unobserveChanges(); // stop watching for changes to DOM\n            // find all use elements\n            uses = document.getElementsByTagName(\"use\");\n            for (i = 0; i < uses.length; i += 1) {\n                try {\n                    bcr = uses[i].getBoundingClientRect();\n                } catch (ignore) {\n                    // failed to get bounding rectangle of the use element\n                    bcr = false;\n                }\n                href = uses[i].getAttribute(\"href\")\n                        || uses[i].getAttributeNS(xlinkNS, \"href\")\n                        || uses[i].getAttribute(\"xlink:href\");\n                if (href && href.split) {\n                    url = href.split(\"#\");\n                } else {\n                    url = [\"\", \"\"];\n                }\n                base = url[0];\n                hash = url[1];\n                isHidden = bcr && bcr.left === 0 && bcr.right === 0 && bcr.top === 0 && bcr.bottom === 0;\n                if (bcr && bcr.width === 0 && bcr.height === 0 && !isHidden) {\n                    // the use element is empty\n                    // if there is a reference to an external SVG, try to fetch it\n                    // use the optional fallback URL if there is no reference to an external SVG\n                    if (fallback && !base.length && hash && !document.getElementById(hash)) {\n                        base = fallback;\n                    }\n                    if (uses[i].hasAttribute(\"href\")) {\n                        uses[i].setAttributeNS(xlinkNS, \"xlink:href\", href);\n                    }\n                    if (base.length) {\n                        // schedule updating xlink:href\n                        xhr = cache[base];\n                        if (xhr !== true) {\n                            // true signifies that prepending the SVG was not required\n                            setTimeout(attrUpdateFunc({\n                                useEl: uses[i],\n                                base: base,\n                                hash: hash\n                            }), 0);\n                        }\n                        if (xhr === undefined) {\n                            Request = createRequest(base);\n                            if (Request !== undefined) {\n                                xhr = new Request();\n                                cache[base] = xhr;\n                                xhr.onload = onloadFunc(xhr);\n                                xhr.onerror = onErrorTimeout(xhr);\n                                xhr.ontimeout = onErrorTimeout(xhr);\n                                xhr.open(\"GET\", base);\n                                xhr.send();\n                                inProgressCount += 1;\n                            }\n                        }\n                    }\n                } else {\n                    if (!isHidden) {\n                        if (cache[base] === undefined) {\n                            // remember this URL if the use element was not empty and no request was sent\n                            cache[base] = true;\n                        } else if (cache[base].onload) {\n                            // if it turns out that prepending the SVG is not necessary,\n                            // abort the in-progress xhr.\n                            cache[base].abort();\n                            delete cache[base].onload;\n                            cache[base] = true;\n                        }\n                    } else if (base.length && cache[base]) {\n                        setTimeout(attrUpdateFunc({\n                            useEl: uses[i],\n                            base: base,\n                            hash: hash\n                        }), 0);\n                    }\n                }\n            }\n            uses = \"\";\n            inProgressCount += 1;\n            observeIfDone();\n        };\n        var winLoad;\n        winLoad = function () {\n            window.removeEventListener(\"load\", winLoad, false); // to prevent memory leaks\n            tid = setTimeout(checkUseElems, 0);\n        };\n        if (document.readyState !== \"complete\") {\n            // The load event fires when all resources have finished loading, which allows detecting whether SVG use elements are empty.\n            window.addEventListener(\"load\", winLoad, false);\n        } else {\n            // No need to add a listener if the document is already loaded, initialize immediately.\n            winLoad();\n        }\n    }\n}());\n","/**\n* Tom Select v1.7.0\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n*/\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.TomSelect = factory());\n}(this, (function () { 'use strict';\n\n\t/**\n\t * MicroEvent - to make any js object an event emitter\n\t *\n\t * - pure javascript - server compatible, browser compatible\n\t * - dont rely on the browser doms\n\t * - super simple - you get it immediatly, no mistery, no magic involved\n\t *\n\t * @author Jerome Etienne (https://github.com/jeromeetienne)\n\t */\n\n\t/**\n\t * Execute callback for each event in space separated list of event names\n\t *\n\t */\n\tfunction forEvents(events, callback) {\n\t  events.split(/\\s+/).forEach(event => {\n\t    callback(event);\n\t  });\n\t}\n\n\tclass MicroEvent {\n\t  constructor() {\n\t    this._events = {};\n\t  }\n\n\t  on(events, fct) {\n\t    forEvents(events, event => {\n\t      this._events[event] = this._events[event] || [];\n\n\t      this._events[event].push(fct);\n\t    });\n\t  }\n\n\t  off(events, fct) {\n\t    var n = arguments.length;\n\n\t    if (n === 0) {\n\t      this._events = {};\n\t      return;\n\t    }\n\n\t    forEvents(events, event => {\n\t      if (n === 1) return delete this._events[event];\n\t      if (event in this._events === false) return;\n\n\t      this._events[event].splice(this._events[event].indexOf(fct), 1);\n\t    });\n\t  }\n\n\t  trigger(events, ...args) {\n\t    var self = this;\n\t    forEvents(events, event => {\n\t      if (event in self._events === false) return;\n\n\t      for (let fct of self._events[event]) {\n\t        fct.apply(self, args);\n\t      }\n\t    });\n\t  }\n\n\t}\n\n\t/**\n\t * microplugin.js\n\t * Copyright (c) 2013 Brian Reavis & contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t * @author Brian Reavis <brian@thirdroute.com>\n\t */\n\tfunction MicroPlugin(Interface) {\n\t  Interface.plugins = {};\n\t  return class mixin extends Interface {\n\t    /**\n\t     * Registers a plugin.\n\t     *\n\t     * @param {string} name\n\t     * @param {function} fn\n\t     */\n\t    static define(name, fn) {\n\t      Interface.plugins[name] = {\n\t        'name': name,\n\t        'fn': fn\n\t      };\n\t    }\n\t    /**\n\t     * Initializes the listed plugins (with options).\n\t     * Acceptable formats:\n\t     *\n\t     * List (without options):\n\t     *   ['a', 'b', 'c']\n\t     *\n\t     * List (with options):\n\t     *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n\t     *\n\t     * Hash (with options):\n\t     *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n\t     *\n\t     * @param {array|object} plugins\n\t     */\n\n\n\t    initializePlugins(plugins) {\n\t      var i, n, key;\n\t      var self = this;\n\t      var queue = [];\n\t      self.plugins = {\n\t        names: [],\n\t        settings: {},\n\t        requested: {},\n\t        loaded: {}\n\t      };\n\n\t      if (Array.isArray(plugins)) {\n\t        for (i = 0, n = plugins.length; i < n; i++) {\n\t          if (typeof plugins[i] === 'string') {\n\t            queue.push(plugins[i]);\n\t          } else {\n\t            self.plugins.settings[plugins[i].name] = plugins[i].options;\n\t            queue.push(plugins[i].name);\n\t          }\n\t        }\n\t      } else if (plugins) {\n\t        for (key in plugins) {\n\t          if (plugins.hasOwnProperty(key)) {\n\t            self.plugins.settings[key] = plugins[key];\n\t            queue.push(key);\n\t          }\n\t        }\n\t      }\n\n\t      while (queue.length) {\n\t        self.require(queue.shift());\n\t      }\n\t    }\n\n\t    loadPlugin(name) {\n\t      var self = this;\n\t      var plugins = self.plugins;\n\t      var plugin = Interface.plugins[name];\n\n\t      if (!Interface.plugins.hasOwnProperty(name)) {\n\t        throw new Error('Unable to find \"' + name + '\" plugin');\n\t      }\n\n\t      plugins.requested[name] = true;\n\t      plugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\n\t      plugins.names.push(name);\n\t    }\n\t    /**\n\t     * Initializes a plugin.\n\t     *\n\t     * @param {string} name\n\t     */\n\n\n\t    require(name) {\n\t      var self = this;\n\t      var plugins = self.plugins;\n\n\t      if (!self.plugins.loaded.hasOwnProperty(name)) {\n\t        if (plugins.requested[name]) {\n\t          throw new Error('Plugin has circular dependency (\"' + name + '\")');\n\t        }\n\n\t        self.loadPlugin(name);\n\t      }\n\n\t      return plugins.loaded[name];\n\t    }\n\n\t  };\n\t}\n\n\t/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */\n\t// https://github.com/andrewrk/node-diacritics/blob/master/index.js\n\t/**\n\t * code points generated from toCodePoints();\n\t * removed 65339 to 65345\n\t */\n\n\tvar code_points = [[67, 67], [160, 160], [192, 438], [452, 652], [961, 961], [1019, 1019], [1083, 1083], [1281, 1289], [1984, 1984], [5095, 5095], [7429, 7441], [7545, 7549], [7680, 7935], [8580, 8580], [9398, 9449], [11360, 11391], [42792, 42793], [42802, 42851], [42873, 42897], [42912, 42922], [64256, 64260], [65313, 65338], [65345, 65370]];\n\t/**\n\t * Remove accents\n\t * via https://github.com/krisk/Fuse/issues/133#issuecomment-318692703\n\t *\n\t */\n\n\tfunction asciifold(str) {\n\t  return str.normalize('NFD').replace(/[\\u0300-\\u036F]/g, '').normalize('NFKD').toLowerCase();\n\t}\n\t/**\n\t * Generate a list of diacritics from the list of code points\n\t *\n\t */\n\n\n\tfunction generateDiacritics() {\n\t  var latin_convert = {\n\t    'l': 'l',\n\t    'n': 'n',\n\t    '': 'ae',\n\t    '': 'o',\n\t    'a': 'a',\n\t    'dz': 'dz'\n\t  };\n\t  var diacritics = {}; //var no_latin\t= [];\n\n\t  code_points.forEach(code_range => {\n\t    for (let i = code_range[0]; i <= code_range[1]; i++) {\n\t      let diacritic = String.fromCharCode(i);\n\t      let latin = diacritic.normalize('NFD').replace(/[\\u0300-\\u036F]/g, '').normalize('NFKD');\n\n\t      if (latin == diacritic) {\n\t        //no_latin.push(diacritic);\n\t        continue;\n\t      }\n\n\t      latin = latin.toLowerCase();\n\n\t      if (latin in latin_convert) {\n\t        latin = latin_convert[latin];\n\t      }\n\n\t      if (!(latin in diacritics)) {\n\t        diacritics[latin] = latin + latin.toUpperCase();\n\t      }\n\n\t      diacritics[latin] += diacritic;\n\t    }\n\t  }); //console.log('no_latin',JSON.stringify(no_latin));\n\n\t  return diacritics;\n\t}\n\t/**\n\t * Expand a regular expression pattern to include diacritics\n\t * \teg /a/ becomes /aA/\n\t *\n\t */\n\n\tvar diacritics = null;\n\tfunction diacriticRegexPoints(regex) {\n\t  if (diacritics === null) {\n\t    diacritics = generateDiacritics();\n\t  }\n\n\t  for (let latin in diacritics) {\n\t    if (diacritics.hasOwnProperty(latin)) {\n\t      regex = regex.replace(new RegExp(latin, 'g'), '[' + diacritics[latin] + ']');\n\t    }\n\t  }\n\n\t  return regex;\n\t}\n\n\t/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */\n\n\t// @ts-ignore\n\t/**\n\t * A property getter resolving dot-notation\n\t * @param  {Object}  obj     The root object to fetch property on\n\t * @param  {String}  name    The optionally dotted property name to fetch\n\t * @return {Object}          The resolved property value\n\t */\n\n\tfunction getAttr(obj, name) {\n\t  if (!obj) return;\n\t  return obj[name];\n\t}\n\t/**\n\t * A property getter resolving dot-notation\n\t * @param  {Object}  obj     The root object to fetch property on\n\t * @param  {String}  name    The optionally dotted property name to fetch\n\t * @return {Object}          The resolved property value\n\t */\n\n\tfunction getAttrNesting(obj, name) {\n\t  if (!obj) return;\n\t  var names = name.split(\".\");\n\n\t  while (names.length && (obj = obj[names.shift()]));\n\n\t  return obj;\n\t}\n\t/**\n\t * Calculates how close of a match the\n\t * given value is against a search token.\n\t *\n\t * @param {object} token\n\t * @return {number}\n\t */\n\n\tfunction scoreValue(value, token, weight) {\n\t  var score, pos;\n\t  if (!value) return 0;\n\t  value = value + '';\n\t  pos = value.search(token.regex);\n\t  if (pos === -1) return 0;\n\t  score = token.string.length / value.length;\n\t  if (pos === 0) score += 0.5;\n\t  return score * weight;\n\t}\n\tfunction escape_regex(str) {\n\t  return (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\t}\n\t/**\n\t * Cast object property to an array if it exists and has a value\n\t *\n\t */\n\n\tfunction propToArray(obj, key) {\n\t  var value = obj[key];\n\n\t  if (value && !Array.isArray(value)) {\n\t    obj[key] = [value];\n\t  }\n\t}\n\t/**\n\t * Iterates over arrays and hashes.\n\t *\n\t * ```\n\t * iterate(this.items, function(item, id) {\n\t *    // invoked for each item\n\t * });\n\t * ```\n\t *\n\t * @param {array|object} object\n\t */\n\n\tfunction iterate(object, callback) {\n\t  if (Array.isArray(object)) {\n\t    object.forEach(callback);\n\t  } else {\n\t    for (var key in object) {\n\t      if (object.hasOwnProperty(key)) {\n\t        callback(object[key], key);\n\t      }\n\t    }\n\t  }\n\t}\n\tfunction cmp(a, b) {\n\t  if (typeof a === 'number' && typeof b === 'number') {\n\t    return a > b ? 1 : a < b ? -1 : 0;\n\t  }\n\n\t  a = asciifold(a + '').toLowerCase();\n\t  b = asciifold(b + '').toLowerCase();\n\t  if (a > b) return 1;\n\t  if (b > a) return -1;\n\t  return 0;\n\t}\n\n\t/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */\n\n\t/**\n\t * sifter.js\n\t * Copyright (c) 20132020 Brian Reavis & contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t * @author Brian Reavis <brian@thirdroute.com>\n\t */\n\tclass Sifter {\n\t  /**\n\t   * Textually searches arrays and hashes of objects\n\t   * by property (or multiple properties). Designed\n\t   * specifically for autocomplete.\n\t   *\n\t   * @constructor\n\t   * @param {array|object} items\n\t   * @param {object} items\n\t   */\n\t  constructor(items, settings) {\n\t    this.items = void 0;\n\t    this.settings = void 0;\n\t    this.items = items;\n\t    this.settings = settings || {\n\t      diacritics: true\n\t    };\n\t  }\n\n\t  /**\n\t   * Splits a search string into an array of individual\n\t   * regexps to be used to match results.\n\t   *\n\t   */\n\t  tokenize(query, respect_word_boundaries, weights) {\n\t    if (!query || !query.length) return [];\n\t    const tokens = [];\n\t    const words = query.split(/\\s+/);\n\t    var field_regex;\n\n\t    if (weights) {\n\t      field_regex = new RegExp('^(' + Object.keys(weights).map(escape_regex).join('|') + ')\\:(.*)$');\n\t    }\n\n\t    words.forEach(word => {\n\t      let field_match;\n\t      let field = null;\n\t      let regex = null; // look for \"field:query\" tokens\n\n\t      if (field_regex && (field_match = word.match(field_regex))) {\n\t        field = field_match[1];\n\t        word = field_match[2];\n\t      }\n\n\t      if (word.length > 0) {\n\t        regex = escape_regex(word);\n\n\t        if (this.settings.diacritics) {\n\t          regex = diacriticRegexPoints(regex);\n\t        }\n\n\t        if (respect_word_boundaries) regex = \"\\\\b\" + regex;\n\t        regex = new RegExp(regex, 'i');\n\t      }\n\n\t      tokens.push({\n\t        string: word,\n\t        regex: regex,\n\t        field: field\n\t      });\n\t    });\n\t    return tokens;\n\t  }\n\n\t  /**\n\t   * Returns a function to be used to score individual results.\n\t   *\n\t   * Good matches will have a higher score than poor matches.\n\t   * If an item is not a match, 0 will be returned by the function.\n\t   *\n\t   * @returns {function}\n\t   */\n\t  getScoreFunction(query, options) {\n\t    var search = this.prepareSearch(query, options);\n\t    return this._getScoreFunction(search);\n\t  }\n\n\t  _getScoreFunction(search) {\n\t    const tokens = search.tokens,\n\t          token_count = tokens.length;\n\n\t    if (!token_count) {\n\t      return function () {\n\t        return 0;\n\t      };\n\t    }\n\n\t    const fields = search.options.fields,\n\t          weights = search.weights,\n\t          field_count = fields.length,\n\t          getAttrFn = search.getAttrFn;\n\n\t    if (!field_count) {\n\t      return function () {\n\t        return 1;\n\t      };\n\t    }\n\t    /**\n\t     * Calculates the score of an object\n\t     * against the search query.\n\t     *\n\t     * @param {TToken} token\n\t     * @param {object} data\n\t     * @return {number}\n\t     */\n\n\n\t    const scoreObject = function () {\n\t      if (field_count === 1) {\n\t        return function (token, data) {\n\t          const field = fields[0].field;\n\t          return scoreValue(getAttrFn(data, field), token, weights[field]);\n\t        };\n\t      }\n\n\t      return function (token, data) {\n\t        var sum = 0; // is the token specific to a field?\n\n\t        if (token.field) {\n\t          const value = getAttrFn(data, token.field);\n\n\t          if (!token.regex && value) {\n\t            sum += 1 / field_count;\n\t          } else {\n\t            sum += scoreValue(value, token, 1);\n\t          }\n\t        } else {\n\t          iterate(weights, (weight, field) => {\n\t            sum += scoreValue(getAttrFn(data, field), token, weight);\n\t          });\n\t        }\n\n\t        return sum / field_count;\n\t      };\n\t    }();\n\n\t    if (token_count === 1) {\n\t      return function (data) {\n\t        return scoreObject(tokens[0], data);\n\t      };\n\t    }\n\n\t    if (search.options.conjunction === 'and') {\n\t      return function (data) {\n\t        var i = 0,\n\t            score,\n\t            sum = 0;\n\n\t        for (; i < token_count; i++) {\n\t          score = scoreObject(tokens[i], data);\n\t          if (score <= 0) return 0;\n\t          sum += score;\n\t        }\n\n\t        return sum / token_count;\n\t      };\n\t    } else {\n\t      return function (data) {\n\t        var sum = 0;\n\t        iterate(tokens, token => {\n\t          sum += scoreObject(token, data);\n\t        });\n\t        return sum / token_count;\n\t      };\n\t    }\n\t  }\n\n\t  /**\n\t   * Returns a function that can be used to compare two\n\t   * results, for sorting purposes. If no sorting should\n\t   * be performed, `null` will be returned.\n\t   *\n\t   * @return function(a,b)\n\t   */\n\t  getSortFunction(query, options) {\n\t    var search = this.prepareSearch(query, options);\n\t    return this._getSortFunction(search);\n\t  }\n\n\t  _getSortFunction(search) {\n\t    var i, n, sort_fld, sort_flds_count, multiplier, implicit_score;\n\t    const self = this,\n\t          options = search.options,\n\t          sort = !search.query && options.sort_empty || options.sort,\n\t          sort_flds = [],\n\t          multipliers = [];\n\t    /**\n\t     * Fetches the specified sort field value\n\t     * from a search result item.\n\t     *\n\t     * @param  {string} name\n\t     * @param  {object} result\n\t     * @return {string}\n\t     */\n\n\t    const get_field = function get_field(name, result) {\n\t      if (name === '$score') return result.score;\n\t      return search.getAttrFn(self.items[result.id], name);\n\t    }; // parse options\n\n\n\t    if (sort) {\n\t      for (i = 0, n = sort.length; i < n; i++) {\n\t        if (search.query || sort[i].field !== '$score') {\n\t          sort_flds.push(sort[i]);\n\t        }\n\t      }\n\t    } // the \"$score\" field is implied to be the primary\n\t    // sort field, unless it's manually specified\n\n\n\t    if (search.query) {\n\t      implicit_score = true;\n\n\t      for (i = 0, n = sort_flds.length; i < n; i++) {\n\t        if (sort_flds[i].field === '$score') {\n\t          implicit_score = false;\n\t          break;\n\t        }\n\t      }\n\n\t      if (implicit_score) {\n\t        sort_flds.unshift({\n\t          field: '$score',\n\t          direction: 'desc'\n\t        });\n\t      }\n\t    } else {\n\t      for (i = 0, n = sort_flds.length; i < n; i++) {\n\t        if (sort_flds[i].field === '$score') {\n\t          sort_flds.splice(i, 1);\n\t          break;\n\t        }\n\t      }\n\t    }\n\n\t    for (i = 0, n = sort_flds.length; i < n; i++) {\n\t      multipliers.push(sort_flds[i].direction === 'desc' ? -1 : 1);\n\t    } // build function\n\n\n\t    sort_flds_count = sort_flds.length;\n\n\t    if (!sort_flds_count) {\n\t      return null;\n\t    } else if (sort_flds_count === 1) {\n\t      sort_fld = sort_flds[0].field;\n\t      multiplier = multipliers[0];\n\t      return function (a, b) {\n\t        return multiplier * cmp(get_field(sort_fld, a), get_field(sort_fld, b));\n\t      };\n\t    } else {\n\t      return function (a, b) {\n\t        var i, result, field;\n\n\t        for (i = 0; i < sort_flds_count; i++) {\n\t          field = sort_flds[i].field;\n\t          result = multipliers[i] * cmp(get_field(field, a), get_field(field, b));\n\t          if (result) return result;\n\t        }\n\n\t        return 0;\n\t      };\n\t    }\n\t  }\n\n\t  /**\n\t   * Parses a search query and returns an object\n\t   * with tokens and fields ready to be populated\n\t   * with results.\n\t   *\n\t   */\n\t  prepareSearch(query, optsUser) {\n\t    const weights = {};\n\t    var options = Object.assign({}, optsUser);\n\t    propToArray(options, 'sort');\n\t    propToArray(options, 'sort_empty'); // convert fields to new format\n\n\t    if (options.fields) {\n\t      propToArray(options, 'fields');\n\n\t      if (Array.isArray(options.fields) && typeof options.fields[0] !== 'object') {\n\t        var fields = [];\n\t        options.fields.forEach(fld_name => {\n\t          fields.push({\n\t            field: fld_name\n\t          });\n\t        });\n\t        options.fields = fields;\n\t      }\n\n\t      options.fields.forEach(field_params => {\n\t        weights[field_params.field] = 'weight' in field_params ? field_params.weight : 1;\n\t      });\n\t    }\n\n\t    query = asciifold(query + '').toLowerCase().trim();\n\t    return {\n\t      options: options,\n\t      query: query,\n\t      tokens: this.tokenize(query, options.respect_word_boundaries, weights),\n\t      total: 0,\n\t      items: [],\n\t      weights: weights,\n\t      getAttrFn: options.nesting ? getAttrNesting : getAttr\n\t    };\n\t  }\n\n\t  /**\n\t   * Searches through all items and returns a sorted array of matches.\n\t   *\n\t   */\n\t  search(query, options) {\n\t    var self = this,\n\t        score,\n\t        search;\n\t    var fn_sort;\n\t    var fn_score;\n\t    search = this.prepareSearch(query, options);\n\t    options = search.options;\n\t    query = search.query; // generate result scoring function\n\n\t    fn_score = options.score || self._getScoreFunction(search); // perform search and sort\n\n\t    if (query.length) {\n\t      iterate(self.items, (item, id) => {\n\t        score = fn_score(item);\n\n\t        if (options.filter === false || score > 0) {\n\t          search.items.push({\n\t            'score': score,\n\t            'id': id\n\t          });\n\t        }\n\t      });\n\t    } else {\n\t      iterate(self.items, (item, id) => {\n\t        search.items.push({\n\t          'score': 1,\n\t          'id': id\n\t        });\n\t      });\n\t    }\n\n\t    fn_sort = self._getSortFunction(search);\n\t    if (fn_sort) search.items.sort(fn_sort); // apply limits\n\n\t    search.total = search.items.length;\n\n\t    if (typeof options.limit === 'number') {\n\t      search.items = search.items.slice(0, options.limit);\n\t    }\n\n\t    return search;\n\t  }\n\n\t}\n\n\t/**\n\t * highlight v3 | MIT license | Johann Burkard <jb@eaio.com>\n\t * Highlights arbitrary terms in a node.\n\t *\n\t * - Modified by Marshal <beatgates@gmail.com> 2011-6-24 (added regex)\n\t * - Modified by Brian Reavis <brian@thirdroute.com> 2012-8-27 (cleanup)\n\t */\n\tfunction highlight(element, regex) {\n\t  if (regex === null) return; // convet string to regex\n\n\t  if (typeof regex === 'string') {\n\t    if (!regex.length) return;\n\t    regex = new RegExp(regex, 'i');\n\t  }\n\n\t  var highlight = function highlight(node) {\n\t    var skip = 0; // Wrap matching part of text node with highlighting <span>, e.g.\n\t    // Soccer  ->  <span class=\"highlight\">Soc</span>cer  for regex = /soc/i\n\n\t    if (node.nodeType === 3) {\n\t      var pos = node.data.search(regex);\n\n\t      if (pos >= 0 && node.data.length > 0) {\n\t        var match = node.data.match(regex);\n\t        var spannode = document.createElement('span');\n\t        spannode.className = 'highlight';\n\t        var middlebit = node.splitText(pos);\n\t        middlebit.splitText(match[0].length);\n\t        var middleclone = middlebit.cloneNode(true);\n\t        spannode.appendChild(middleclone);\n\t        middlebit.parentNode.replaceChild(spannode, middlebit);\n\t        skip = 1;\n\t      }\n\t    } // Recurse element node, looking for child text nodes to highlight, unless element\n\t    // is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\n\t    else if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && (node.className !== 'highlight' || node.tagName !== 'SPAN')) {\n\t        for (var i = 0; i < node.childNodes.length; ++i) {\n\t          i += highlight(node.childNodes[i]);\n\t        }\n\t      }\n\n\t    return skip;\n\t  };\n\n\t  highlight(element);\n\t}\n\t/**\n\t * removeHighlight fn copied from highlight v5 and\n\t * edited to remove with(), pass js strict mode, and use without jquery\n\t */\n\n\tfunction removeHighlight(el) {\n\t  var elements = document.querySelectorAll(\"span.highlight\");\n\t  Array.prototype.forEach.call(elements, function (el, i) {\n\t    var parent = el.parentNode;\n\t    parent.replaceChild(el.firstChild, el);\n\t    parent.normalize();\n\t  });\n\t}\n\n\tconst KEY_A = 65;\n\tconst KEY_RETURN = 13;\n\tconst KEY_ESC = 27;\n\tconst KEY_LEFT = 37;\n\tconst KEY_UP = 38;\n\tconst KEY_RIGHT = 39;\n\tconst KEY_DOWN = 40;\n\tconst KEY_BACKSPACE = 8;\n\tconst KEY_DELETE = 46;\n\tconst KEY_TAB = 9;\n\tconst IS_MAC = typeof navigator === 'undefined' ? false : /Mac/.test(navigator.userAgent);\n\tconst KEY_SHORTCUT = IS_MAC ? 'metaKey' : 'ctrlKey'; // ctrl key or apple key for ma\n\n\tvar defaults = {\n\t  options: [],\n\t  optgroups: [],\n\t  plugins: [],\n\t  delimiter: ',',\n\t  splitOn: null,\n\t  // regexp or string for splitting up values from a paste command\n\t  persist: true,\n\t  diacritics: true,\n\t  create: null,\n\t  createOnBlur: false,\n\t  createFilter: null,\n\t  highlight: true,\n\t  openOnFocus: true,\n\t  shouldOpen: null,\n\t  maxOptions: 50,\n\t  maxItems: null,\n\t  hideSelected: null,\n\t  duplicates: false,\n\t  addPrecedence: false,\n\t  selectOnTab: false,\n\t  preload: null,\n\t  allowEmptyOption: false,\n\t  closeAfterSelect: false,\n\t  loadThrottle: 300,\n\t  loadingClass: 'loading',\n\t  dataAttr: null,\n\t  //'data-data',\n\t  optgroupField: 'optgroup',\n\t  valueField: 'value',\n\t  labelField: 'text',\n\t  disabledField: 'disabled',\n\t  optgroupLabelField: 'label',\n\t  optgroupValueField: 'value',\n\t  lockOptgroupOrder: false,\n\t  sortField: '$order',\n\t  searchField: ['text'],\n\t  searchConjunction: 'and',\n\t  mode: null,\n\t  wrapperClass: 'ts-control',\n\t  inputClass: 'ts-input',\n\t  dropdownClass: 'ts-dropdown',\n\t  dropdownContentClass: 'ts-dropdown-content',\n\t  itemClass: 'item',\n\t  optionClass: 'option',\n\t  dropdownParent: null,\n\t  controlInput: null,\n\t  copyClassesToDropdown: true,\n\t  placeholder: null,\n\t  hidePlaceholder: null,\n\t  shouldLoad: function (query) {\n\t    return query.length > 0;\n\t  },\n\n\t  /*\n\t  load                 : null, // function(query, callback) { ... }\n\t  score                : null, // function(search) { ... }\n\t  onInitialize         : null, // function() { ... }\n\t  onChange             : null, // function(value) { ... }\n\t  onItemAdd            : null, // function(value, $item) { ... }\n\t  onItemRemove         : null, // function(value) { ... }\n\t  onClear              : null, // function() { ... }\n\t  onOptionAdd          : null, // function(value, data) { ... }\n\t  onOptionRemove       : null, // function(value) { ... }\n\t  onOptionClear        : null, // function() { ... }\n\t  onOptionGroupAdd     : null, // function(id, data) { ... }\n\t  onOptionGroupRemove  : null, // function(id) { ... }\n\t  onOptionGroupClear   : null, // function() { ... }\n\t  onDropdownOpen       : null, // function(dropdown) { ... }\n\t  onDropdownClose      : null, // function(dropdown) { ... }\n\t  onType               : null, // function(str) { ... }\n\t  onDelete             : null, // function(values) { ... }\n\t  */\n\t  render: {\n\t    /*\n\t    item: null,\n\t    optgroup: null,\n\t    optgroup_header: null,\n\t    option: null,\n\t    option_create: null\n\t    */\n\t  }\n\t};\n\n\t/**\n\t * Converts a scalar to its best string representation\n\t * for hash keys and HTML attribute values.\n\t *\n\t * Transformations:\n\t *   'str'     -> 'str'\n\t *   null      -> ''\n\t *   undefined -> ''\n\t *   true      -> '1'\n\t *   false     -> '0'\n\t *   0         -> '0'\n\t *   1         -> '1'\n\t *\n\t */\n\tfunction hash_key(value) {\n\t  if (typeof value === 'undefined' || value === null) return null;\n\t  if (typeof value === 'boolean') return value ? '1' : '0';\n\t  return value + '';\n\t}\n\t/**\n\t * Escapes a string for use within HTML.\n\t *\n\t */\n\n\tfunction escape_html(str) {\n\t  return (str + '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n\t}\n\t/**\n\t * Debounce the user provided load function\n\t *\n\t */\n\n\tfunction loadDebounce(fn, delay) {\n\t  var timeout;\n\t  return function (value, callback) {\n\t    var self = this;\n\n\t    if (timeout) {\n\t      self.loading = Math.max(self.loading - 1, 0);\n\t    }\n\n\t    clearTimeout(timeout);\n\t    timeout = setTimeout(function () {\n\t      timeout = null;\n\t      self.loadedSearches[value] = true;\n\t      fn.call(self, value, callback);\n\t    }, delay);\n\t  };\n\t}\n\t/**\n\t * Debounce all fired events types listed in `types`\n\t * while executing the provided `fn`.\n\t *\n\t */\n\n\tfunction debounce_events(self, types, fn) {\n\t  var type;\n\t  var trigger = self.trigger;\n\t  var event_args = {}; // override trigger method\n\n\t  self.trigger = function () {\n\t    var type = arguments[0];\n\n\t    if (types.indexOf(type) !== -1) {\n\t      event_args[type] = arguments;\n\t    } else {\n\t      return trigger.apply(self, arguments);\n\t    }\n\t  }; // invoke provided function\n\n\n\t  fn.apply(self, []);\n\t  self.trigger = trigger; // trigger queued events\n\n\t  for (type in event_args) {\n\t    trigger.apply(self, event_args[type]);\n\t  }\n\t}\n\t/**\n\t * Determines the current selection within a text input control.\n\t * Returns an object containing:\n\t *   - start\n\t *   - length\n\t *\n\t */\n\n\tfunction getSelection(input) {\n\t  return {\n\t    start: input.selectionStart,\n\t    length: input.selectionEnd - input.selectionStart\n\t  };\n\t}\n\t/**\n\t * Prevent default\n\t *\n\t */\n\n\tfunction preventDefault(evt, stop = false) {\n\t  if (evt) {\n\t    evt.preventDefault();\n\n\t    if (stop) {\n\t      evt.stopPropagation();\n\t    }\n\t  }\n\t}\n\t/**\n\t * Prevent default\n\t *\n\t */\n\n\tfunction addEvent(target, type, callback, options) {\n\t  target.addEventListener(type, callback, options);\n\t}\n\t/**\n\t * Return true if the requested key is down\n\t * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n\t * The current evt may not always set ( eg calling advanceSelection() )\n\t *\n\t */\n\n\tfunction isKeyDown(key_name, evt) {\n\t  if (!evt) {\n\t    return false;\n\t  }\n\n\t  if (!evt[key_name]) {\n\t    return false;\n\t  }\n\n\t  var count = (evt.altKey ? 1 : 0) + (evt.ctrlKey ? 1 : 0) + (evt.shiftKey ? 1 : 0) + (evt.metaKey ? 1 : 0);\n\n\t  if (count === 1) {\n\t    return true;\n\t  }\n\n\t  return false;\n\t}\n\t/**\n\t * Get the id of an element\n\t * If the id attribute is not set, set the attribute with the given id\n\t *\n\t */\n\n\tfunction getId(el, id) {\n\t  const existing_id = el.getAttribute('id');\n\n\t  if (existing_id) {\n\t    return existing_id;\n\t  }\n\n\t  el.setAttribute('id', id);\n\t  return id;\n\t}\n\t/**\n\t * Quote string with slashes\n\t *\n\t */\n\n\tfunction addSlashes(str) {\n\t  return str.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"').replace(/'/g, \"\\\\'\");\n\t}\n\n\tfunction getSettings(input, settings_user) {\n\t  var settings = Object.assign({}, defaults, settings_user);\n\t  var attr_data = settings.dataAttr;\n\t  var field_label = settings.labelField;\n\t  var field_value = settings.valueField;\n\t  var field_disabled = settings.disabledField;\n\t  var field_optgroup = settings.optgroupField;\n\t  var field_optgroup_label = settings.optgroupLabelField;\n\t  var field_optgroup_value = settings.optgroupValueField;\n\t  var tag_name = input.tagName.toLowerCase();\n\t  var placeholder = input.getAttribute('placeholder') || input.getAttribute('data-placeholder');\n\n\t  if (!placeholder && !settings.allowEmptyOption) {\n\t    let option = input.querySelector('option[value=\"\"]');\n\n\t    if (option) {\n\t      placeholder = option.textContent;\n\t    }\n\t  }\n\n\t  var settings_element = {\n\t    placeholder: placeholder,\n\t    options: [],\n\t    optgroups: [],\n\t    items: [],\n\t    maxItems: null\n\t  };\n\t  /**\n\t   * Initialize from a <select> element.\n\t   *\n\t   */\n\n\t  var init_select = () => {\n\t    var tagName;\n\t    var options = settings_element.options;\n\t    var optionsMap = {};\n\t    var group_count = 1;\n\n\t    var readData = el => {\n\t      var data = Object.assign({}, el.dataset); // get plain object from DOMStringMap\n\n\t      var json = attr_data && data[attr_data];\n\n\t      if (typeof json === 'string' && json.length) {\n\t        data = Object.assign(data, JSON.parse(json));\n\t      }\n\n\t      return data;\n\t    };\n\n\t    var addOption = (option, group) => {\n\t      var value = hash_key(option.value);\n\t      if (!value && !settings.allowEmptyOption) return; // if the option already exists, it's probably been\n\t      // duplicated in another optgroup. in this case, push\n\t      // the current group to the \"optgroup\" property on the\n\t      // existing option so that it's rendered in both places.\n\n\t      if (optionsMap.hasOwnProperty(value)) {\n\t        if (group) {\n\t          var arr = optionsMap[value][field_optgroup];\n\n\t          if (!arr) {\n\t            optionsMap[value][field_optgroup] = group;\n\t          } else if (!Array.isArray(arr)) {\n\t            optionsMap[value][field_optgroup] = [arr, group];\n\t          } else {\n\t            arr.push(group);\n\t          }\n\t        }\n\n\t        return;\n\t      }\n\n\t      var option_data = readData(option);\n\t      option_data[field_label] = option_data[field_label] || option.textContent;\n\t      option_data[field_value] = option_data[field_value] || value;\n\t      option_data[field_disabled] = option_data[field_disabled] || option.disabled;\n\t      option_data[field_optgroup] = option_data[field_optgroup] || group;\n\t      option_data.$option = option;\n\t      optionsMap[value] = option_data;\n\t      options.push(option_data);\n\n\t      if (option.selected) {\n\t        settings_element.items.push(value);\n\t      }\n\t    };\n\n\t    var addGroup = optgroup => {\n\t      var id, optgroup_data;\n\t      optgroup_data = readData(optgroup);\n\t      optgroup_data[field_optgroup_label] = optgroup_data[field_optgroup_label] || optgroup.getAttribute('label') || '';\n\t      optgroup_data[field_optgroup_value] = optgroup_data[field_optgroup_value] || group_count++;\n\t      optgroup_data[field_disabled] = optgroup_data[field_disabled] || optgroup.disabled;\n\t      settings_element.optgroups.push(optgroup_data);\n\t      id = optgroup_data[field_optgroup_value];\n\n\t      for (const option of optgroup.children) {\n\t        addOption(option, id);\n\t      }\n\t    };\n\n\t    settings_element.maxItems = input.hasAttribute('multiple') ? null : 1;\n\n\t    for (const child of input.children) {\n\t      tagName = child.tagName.toLowerCase();\n\n\t      if (tagName === 'optgroup') {\n\t        addGroup(child);\n\t      } else if (tagName === 'option') {\n\t        addOption(child);\n\t      }\n\t    }\n\t  };\n\t  /**\n\t   * Initialize from a <input type=\"text\"> element.\n\t   *\n\t   */\n\n\n\t  var init_textbox = () => {\n\t    var values, option;\n\t    var data_raw = input.getAttribute(attr_data);\n\n\t    if (!data_raw) {\n\t      var value = input.value.trim() || '';\n\t      if (!settings.allowEmptyOption && !value.length) return;\n\t      values = value.split(settings.delimiter);\n\n\t      for (const _value of values) {\n\t        option = {};\n\t        option[field_label] = _value;\n\t        option[field_value] = _value;\n\t        settings_element.options.push(option);\n\t      }\n\n\t      settings_element.items = values;\n\t    } else {\n\t      settings_element.options = JSON.parse(data_raw);\n\n\t      for (const opt of settings_element.options) {\n\t        settings_element.items.push(opt[field_value]);\n\t      }\n\t    }\n\t  };\n\n\t  if (tag_name === 'select') {\n\t    init_select();\n\t  } else {\n\t    init_textbox();\n\t  }\n\n\t  return Object.assign({}, defaults, settings_element, settings_user);\n\t}\n\n\t/**\n\t * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n\t * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n\t *\n\t * param query should be {}\n\t */\n\tfunction getDom(query) {\n\t  if (query.jquery) {\n\t    return query[0];\n\t  }\n\n\t  if (query instanceof HTMLElement) {\n\t    return query;\n\t  }\n\n\t  if (query.indexOf('<') > -1) {\n\t    let div = document.createElement('div');\n\t    div.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\n\t    return div.firstChild;\n\t  }\n\n\t  return document.querySelector(query);\n\t}\n\tfunction escapeQuery(query) {\n\t  return query.replace(/['\"\\\\]/g, '\\\\$&');\n\t}\n\t/**\n\t * Dispatch an event\n\t *\n\t */\n\n\tfunction triggerEvent(dom_el, event_name) {\n\t  var event = document.createEvent('HTMLEvents');\n\t  event.initEvent(event_name, true, false);\n\t  dom_el.dispatchEvent(event);\n\t}\n\t/**\n\t * Apply CSS rules to a dom element\n\t *\n\t */\n\n\tfunction applyCSS(dom_el, css) {\n\t  Object.assign(dom_el.style, css);\n\t}\n\t/**\n\t * Add css classes\n\t *\n\t */\n\n\tfunction addClasses(elmts, ...classes) {\n\t  var norm_classes = classesArray(classes);\n\t  elmts = castAsArray(elmts);\n\t  elmts.map(el => {\n\t    norm_classes.map(cls => {\n\t      el.classList.add(cls);\n\t    });\n\t  });\n\t}\n\t/**\n\t * Remove css classes\n\t *\n\t */\n\n\tfunction removeClasses(elmts, ...classes) {\n\t  var norm_classes = classesArray(classes);\n\t  elmts = castAsArray(elmts);\n\t  elmts.map(el => {\n\t    norm_classes.map(cls => {\n\t      el.classList.remove(cls);\n\t    });\n\t  });\n\t}\n\t/**\n\t * Return arguments\n\t *\n\t */\n\n\tfunction classesArray(args) {\n\t  var classes = [];\n\n\t  for (let _classes of args) {\n\t    if (typeof _classes === 'string') {\n\t      _classes = _classes.trim().split(/[\\11\\12\\14\\15\\40]/);\n\t    }\n\n\t    if (Array.isArray(_classes)) {\n\t      classes = classes.concat(_classes);\n\t    }\n\t  }\n\n\t  return classes.filter(Boolean);\n\t}\n\t/**\n\t * Create an array from arg if it's not already an array\n\t *\n\t */\n\n\tfunction castAsArray(arg) {\n\t  if (!Array.isArray(arg)) {\n\t    arg = [arg];\n\t  }\n\n\t  return arg;\n\t}\n\t/**\n\t * Get the closest node to the evt.target matching the selector\n\t * Stops at wrapper\n\t *\n\t */\n\n\tfunction parentMatch(target, selector, wrapper) {\n\t  if (wrapper && !wrapper.contains(target)) {\n\t    return;\n\t  }\n\n\t  while (target && target.matches) {\n\t    if (target.matches(selector)) {\n\t      return target;\n\t    }\n\n\t    target = target.parentNode;\n\t  }\n\t}\n\t/**\n\t * Get the first or last item from an array\n\t *\n\t * > 0 - right (last)\n\t * < 0 - left (first)\n\t *\n\t */\n\n\tfunction getTail(list, direction) {\n\t  if (direction > 0) {\n\t    return list[list.length - 1];\n\t  }\n\n\t  return list[0];\n\t}\n\t/**\n\t * Return true if an object is empty\n\t *\n\t */\n\n\tfunction isEmptyObject(obj) {\n\t  return Object.keys(obj).length === 0;\n\t}\n\t/**\n\t * Get the index of an element amongst sibling nodes of the same type\n\t *\n\t */\n\n\tfunction nodeIndex(el, amongst) {\n\t  if (!el) return -1;\n\t  amongst = amongst || el.nodeName;\n\t  var i = 0;\n\n\t  while (el = el.previousElementSibling) {\n\t    if (el.matches(amongst)) {\n\t      i++;\n\t    }\n\t  }\n\n\t  return i;\n\t}\n\t/**\n\t * Set attributes of an element\n\t *\n\t */\n\n\tfunction setAttr(el, attrs) {\n\t  for (const attr in attrs) {\n\t    el.setAttribute(attr, attrs[attr]);\n\t  }\n\t}\n\n\tvar instance_i = 0;\n\tclass TomSelect extends MicroPlugin(MicroEvent) {\n\t  constructor(input_arg, settings) {\n\t    super();\n\t    this.control_input = void 0;\n\t    this.wrapper = void 0;\n\t    this.dropdown = void 0;\n\t    this.control = void 0;\n\t    this.dropdown_content = void 0;\n\t    this.order = 0;\n\t    this.settings = void 0;\n\t    this.input = void 0;\n\t    this.tabIndex = void 0;\n\t    this.is_select_tag = void 0;\n\t    this.rtl = void 0;\n\t    this.inputId = void 0;\n\t    this._destroy = void 0;\n\t    this.sifter = void 0;\n\t    this.tab_key = false;\n\t    this.isOpen = false;\n\t    this.isDisabled = false;\n\t    this.isRequired = void 0;\n\t    this.isInvalid = false;\n\t    this.isLocked = false;\n\t    this.isFocused = false;\n\t    this.isInputHidden = false;\n\t    this.isSetup = false;\n\t    this.ignoreFocus = false;\n\t    this.hasOptions = false;\n\t    this.currentResults = null;\n\t    this.lastValue = '';\n\t    this.caretPos = 0;\n\t    this.loading = 0;\n\t    this.loadedSearches = {};\n\t    this.activeOption = null;\n\t    this.activeItems = [];\n\t    this.optgroups = {};\n\t    this.options = {};\n\t    this.userOptions = {};\n\t    this.items = [];\n\t    this.renderCache = {\n\t      'item': {},\n\t      'option': {}\n\t    };\n\t    instance_i++;\n\t    var dir;\n\t    var input = getDom(input_arg);\n\n\t    if (input.tomselect) {\n\t      throw new Error('Tom Select already initialized on this element');\n\t    }\n\n\t    input.tomselect = this; // detect rtl environment\n\n\t    var computedStyle = window.getComputedStyle && window.getComputedStyle(input, null);\n\t    dir = computedStyle.getPropertyValue('direction'); // setup default state\n\n\t    this.settings = getSettings(input, settings);\n\t    this.input = input;\n\t    this.tabIndex = input.tabIndex || 0;\n\t    this.is_select_tag = input.tagName.toLowerCase() === 'select';\n\t    this.rtl = /rtl/i.test(dir);\n\t    this.inputId = getId(input, 'tomselect-' + instance_i);\n\t    this.isRequired = input.required; // search system\n\n\t    this.sifter = new Sifter(this.options, {\n\t      diacritics: this.settings.diacritics\n\t    });\n\t    this.setupOptions(this.settings.options, this.settings.optgroups);\n\t    delete this.settings.optgroups;\n\t    delete this.settings.options; // option-dependent defaults\n\n\t    this.settings.mode = this.settings.mode || (this.settings.maxItems === 1 ? 'single' : 'multi');\n\n\t    if (typeof this.settings.hideSelected !== 'boolean') {\n\t      this.settings.hideSelected = this.settings.mode === 'multi';\n\t    }\n\n\t    if (typeof this.settings.hidePlaceholder !== 'boolean') {\n\t      this.settings.hidePlaceholder = this.settings.mode !== 'multi';\n\t    } // set up createFilter callback\n\n\n\t    var filter = this.settings.createFilter;\n\n\t    if (typeof filter !== 'function') {\n\t      if (typeof filter === 'string') {\n\t        filter = new RegExp(filter);\n\t      }\n\n\t      if (filter instanceof RegExp) {\n\t        this.settings.createFilter = input => filter.test(input);\n\t      } else {\n\t        this.settings.createFilter = () => true;\n\t      }\n\t    }\n\n\t    this.initializePlugins(this.settings.plugins);\n\t    this.setupCallbacks();\n\t    this.setupTemplates();\n\t    this.setup();\n\t  } // methods\n\t  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n\t  /**\n\t   * Creates all elements and sets up event bindings.\n\t   *\n\t   */\n\n\n\t  setup() {\n\t    var self = this;\n\t    var settings = self.settings;\n\t    var wrapper;\n\t    var control;\n\t    var control_input;\n\t    var dropdown;\n\t    var dropdown_content;\n\t    var inputMode;\n\t    var classes;\n\t    var classes_plugins;\n\t    var input = self.input;\n\t    var control_id;\n\t    const passive_event = {\n\t      passive: true\n\t    };\n\t    const listboxId = self.inputId + '-ts-dropdown';\n\t    inputMode = self.settings.mode;\n\t    classes = input.getAttribute('class') || '';\n\t    wrapper = getDom('<div>');\n\t    addClasses(wrapper, settings.wrapperClass, classes, inputMode);\n\t    control = getDom('<div class=\"items\">');\n\t    addClasses(control, settings.inputClass);\n\t    wrapper.append(control);\n\t    dropdown = self.render('dropdown');\n\t    addClasses(dropdown, settings.dropdownClass, inputMode);\n\t    dropdown_content = getDom(`<div role=\"listbox\" id=\"${listboxId}\" tabindex=\"-1\">`);\n\t    addClasses(dropdown_content, settings.dropdownContentClass);\n\t    dropdown.append(dropdown_content);\n\t    getDom(settings.dropdownParent || wrapper).appendChild(dropdown);\n\n\t    if (settings.controlInput) {\n\t      control_input = getDom(settings.controlInput);\n\t    } else {\n\t      control_input = getDom('<input type=\"text\" autocomplete=\"off\" size=\"1\" />'); // set attributes\n\n\t      var attrs = ['autocorrect', 'autocapitalize', 'autocomplete'];\n\n\t      for (const attr of attrs) {\n\t        if (input.getAttribute(attr)) {\n\t          setAttr(control_input, {\n\t            [attr]: input.getAttribute(attr)\n\t          });\n\t        }\n\t      }\n\t    }\n\n\t    if (!settings.controlInput) {\n\t      control_input.tabIndex = input.disabled ? -1 : self.tabIndex;\n\t      control.appendChild(control_input);\n\t    }\n\n\t    setAttr(control_input, {\n\t      role: 'combobox',\n\t      haspopup: 'listbox',\n\t      'aria-expanded': 'false',\n\t      'aria-controls': listboxId\n\t    });\n\t    control_id = getId(control_input, self.inputId + '-tomselected');\n\t    let query = \"label[for='\" + escapeQuery(self.inputId) + \"']\";\n\t    let label = document.querySelector(query);\n\n\t    if (label) {\n\t      setAttr(label, {\n\t        for: control_id\n\t      });\n\t      let label_id = getId(label, self.inputId + '-ts-label');\n\t      setAttr(dropdown_content, {\n\t        'aria-labelledby': label_id\n\t      });\n\t    }\n\n\t    if (self.settings.copyClassesToDropdown) {\n\t      addClasses(dropdown, classes);\n\t    }\n\n\t    wrapper.style.width = input.style.width;\n\n\t    if (self.plugins.names.length) {\n\t      classes_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n\t      addClasses([wrapper, dropdown], classes_plugins);\n\t    }\n\n\t    if ((settings.maxItems === null || settings.maxItems > 1) && self.is_select_tag) {\n\t      setAttr(input, {\n\t        multiple: 'multiple'\n\t      });\n\t    }\n\n\t    if (self.settings.placeholder) {\n\t      setAttr(control_input, {\n\t        placeholder: settings.placeholder\n\t      });\n\t    } // if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n\n\n\t    if (!self.settings.splitOn && self.settings.delimiter) {\n\t      self.settings.splitOn = new RegExp('\\\\s*' + escape_regex(self.settings.delimiter) + '+\\\\s*');\n\t    } // debounce user defined load() if loadThrottle > 0\n\t    // after initializePlugins() so plugins can create/modify user defined loaders\n\n\n\t    if (this.settings.load && this.settings.loadThrottle) {\n\t      this.settings.load = loadDebounce(this.settings.load, this.settings.loadThrottle);\n\t    }\n\n\t    self.control = control;\n\t    self.control_input = control_input;\n\t    self.wrapper = wrapper;\n\t    self.dropdown = dropdown;\n\t    self.dropdown_content = dropdown_content;\n\t    self.control_input.type = input.type; // clicking on an option should select it\n\n\t    addEvent(dropdown, 'click', evt => {\n\t      const option = parentMatch(evt.target, '[data-selectable]');\n\n\t      if (option) {\n\t        self.onOptionSelect(evt, option);\n\t      }\n\t    });\n\t    addEvent(control, 'click', evt => {\n\t      var target_match = parentMatch(evt.target, '.' + self.settings.itemClass, control);\n\n\t      if (target_match && self.onItemSelect(evt, target_match)) {\n\t        return;\n\t      } // retain focus (see control_input mousedown)\n\n\n\t      if (control_input.value != '') {\n\t        return;\n\t      }\n\n\t      self.onClick(evt);\n\t    }); // retain focus by preventing native handling. if the\n\t    // event target is the input it should not be modified.\n\t    // otherwise, text selection within the input won't work.\n\n\t    addEvent(control_input, 'mousedown', e => {\n\t      if (control_input.value !== '') {\n\t        e.stopPropagation();\n\t      }\n\t    });\n\t    addEvent(control_input, 'keydown', e => self.onKeyDown(e));\n\t    addEvent(control_input, 'keyup', e => self.onKeyUp(e));\n\t    addEvent(control_input, 'keypress', e => self.onKeyPress(e));\n\t    addEvent(control_input, 'resize', () => self.positionDropdown(), passive_event);\n\t    addEvent(control_input, 'blur', e => self.onBlur(e));\n\t    addEvent(control_input, 'focus', e => self.onFocus(e));\n\t    addEvent(control_input, 'paste', e => self.onPaste(e));\n\n\t    const doc_mousedown = e => {\n\t      // blur if target is outside of this instance\n\t      // dropdown is not always inside wrapper\n\t      if (!wrapper.contains(e.target) && !dropdown.contains(e.target)) {\n\t        if (self.isFocused) {\n\t          self.blur();\n\t        }\n\n\t        self.inputState();\n\t        return;\n\t      } // clicking anywhere in the control should not blur the control_input & close the dropdown\n\n\n\t      preventDefault(e, true);\n\t    };\n\n\t    var win_scroll = () => {\n\t      if (self.isOpen) {\n\t        self.positionDropdown();\n\t      }\n\t    };\n\n\t    addEvent(document, 'mousedown', doc_mousedown);\n\t    addEvent(window, 'sroll', win_scroll, passive_event);\n\t    addEvent(window, 'resize', win_scroll, passive_event);\n\n\t    self._destroy = () => {\n\t      document.removeEventListener('mousedown', doc_mousedown);\n\t      window.removeEventListener('sroll', win_scroll);\n\t      window.removeEventListener('resize', win_scroll);\n\t    }; // store original html and tab index so that they can be\n\t    // restored when the destroy() method is called.\n\n\n\t    this.revertSettings = {\n\t      innerHTML: input.innerHTML,\n\t      tabIndex: input.tabIndex\n\t    };\n\t    input.tabIndex = -1;\n\t    setAttr(input, {\n\t      hidden: 'hidden'\n\t    });\n\t    input.insertAdjacentElement('afterend', self.wrapper);\n\t    self.setValue(settings.items);\n\t    delete settings.items;\n\t    addEvent(input, 'invalid', e => {\n\t      preventDefault(e);\n\n\t      if (!self.isInvalid) {\n\t        self.isInvalid = true;\n\t        self.refreshState();\n\t      }\n\t    });\n\t    self.updateOriginalInput();\n\t    self.refreshItems();\n\t    self.refreshState();\n\t    self.inputState();\n\t    self.isSetup = true;\n\n\t    if (input.disabled) {\n\t      self.disable();\n\t    }\n\n\t    self.on('change', this.onChange);\n\t    addClasses(input, 'tomselected');\n\t    self.trigger('initialize'); // preload options\n\n\t    if (settings.preload === true) {\n\t      self.load('');\n\t    }\n\t  }\n\t  /**\n\t   * Register options and optgroups\n\t   *\n\t   */\n\n\n\t  setupOptions(options = [], optgroups = []) {\n\t    // build options table\n\t    for (const option of options) {\n\t      this.registerOption(option);\n\t    } // build optgroup table\n\n\n\t    for (const optgroup of optgroups) {\n\t      this.registerOptionGroup(optgroup);\n\t    }\n\t  }\n\t  /**\n\t   * Sets up default rendering functions.\n\t   */\n\n\n\t  setupTemplates() {\n\t    var self = this;\n\t    var field_label = self.settings.labelField;\n\t    var field_optgroup = self.settings.optgroupLabelField;\n\t    var templates = {\n\t      'optgroup': (data, escape) => {\n\t        let optgroup = document.createElement('div');\n\t        optgroup.className = 'optgroup';\n\t        optgroup.appendChild(data.options);\n\t        return optgroup;\n\t      },\n\t      'optgroup_header': (data, escape) => {\n\t        return '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\n\t      },\n\t      'option': (data, escape) => {\n\t        return '<div>' + escape(data[field_label]) + '</div>';\n\t      },\n\t      'item': (data, escape) => {\n\t        return '<div>' + escape(data[field_label]) + '</div>';\n\t      },\n\t      'option_create': (data, escape) => {\n\t        return '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\n\t      },\n\t      'no_results': (data, escape) => {\n\t        return '<div class=\"no-results\">No results found</div>';\n\t      },\n\t      'loading': (data, escape) => {\n\t        return '<div class=\"spinner\"></div>';\n\t      },\n\t      'not_loading': () => {},\n\t      'dropdown': () => {\n\t        return '<div></div>';\n\t      }\n\t    };\n\t    self.settings.render = Object.assign({}, templates, self.settings.render);\n\t  }\n\t  /**\n\t   * Maps fired events to callbacks provided\n\t   * in the settings used when creating the control.\n\t   */\n\n\n\t  setupCallbacks() {\n\t    var key, fn;\n\t    var callbacks = {\n\t      'initialize': 'onInitialize',\n\t      'change': 'onChange',\n\t      'item_add': 'onItemAdd',\n\t      'item_remove': 'onItemRemove',\n\t      'clear': 'onClear',\n\t      'option_add': 'onOptionAdd',\n\t      'option_remove': 'onOptionRemove',\n\t      'option_clear': 'onOptionClear',\n\t      'optgroup_add': 'onOptionGroupAdd',\n\t      'optgroup_remove': 'onOptionGroupRemove',\n\t      'optgroup_clear': 'onOptionGroupClear',\n\t      'dropdown_open': 'onDropdownOpen',\n\t      'dropdown_close': 'onDropdownClose',\n\t      'type': 'onType',\n\t      'load': 'onLoad',\n\t      'focus': 'onFocus',\n\t      'blur': 'onBlur'\n\t    };\n\n\t    for (key in callbacks) {\n\t      fn = this.settings[callbacks[key]];\n\t      if (fn) this.on(key, fn);\n\t    }\n\t  }\n\t  /**\n\t   * Triggered when the main control element\n\t   * has a click event.\n\t   *\n\t   */\n\n\n\t  onClick(e) {\n\t    var self = this;\n\n\t    if (self.activeItems.length > 0) {\n\t      self.clearActiveItems();\n\t      self.focus();\n\t      return;\n\t    }\n\n\t    if (self.isFocused && self.isOpen) {\n\t      self.blur();\n\t    } else {\n\t      self.focus();\n\t    }\n\t  }\n\t  /**\n\t   * @deprecated v1.7\n\t   *\n\t   */\n\n\n\t  onMouseDown(e) {}\n\t  /**\n\t   * Triggered when the value of the control has been changed.\n\t   * This should propagate the event to the original DOM\n\t   * input / select element.\n\t   */\n\n\n\t  onChange() {\n\t    triggerEvent(this.input, 'input');\n\t    triggerEvent(this.input, 'change');\n\t  }\n\t  /**\n\t   * Triggered on <input> paste.\n\t   *\n\t   */\n\n\n\t  onPaste(e) {\n\t    var self = this;\n\n\t    if (self.isFull() || self.isInputHidden || self.isLocked) {\n\t      preventDefault(e);\n\t      return;\n\t    } // If a regex or string is included, this will split the pasted\n\t    // input and create Items for each separate value\n\n\n\t    if (self.settings.splitOn) {\n\t      // Wait for pasted text to be recognized in value\n\t      setTimeout(() => {\n\t        var pastedText = self.inputValue();\n\n\t        if (!pastedText.match(self.settings.splitOn)) {\n\t          return;\n\t        }\n\n\t        var splitInput = pastedText.trim().split(self.settings.splitOn);\n\n\t        for (const piece of splitInput) {\n\t          self.createItem(piece);\n\t        }\n\t      }, 0);\n\t    }\n\t  }\n\t  /**\n\t   * Triggered on <input> keypress.\n\t   *\n\t   */\n\n\n\t  onKeyPress(e) {\n\t    var self = this;\n\n\t    if (self.isLocked) {\n\t      preventDefault(e);\n\t      return;\n\t    }\n\n\t    var character = String.fromCharCode(e.keyCode || e.which);\n\n\t    if (self.settings.create && self.settings.mode === 'multi' && character === self.settings.delimiter) {\n\t      self.createItem();\n\t      preventDefault(e);\n\t      return;\n\t    }\n\t  }\n\t  /**\n\t   * Triggered on <input> keydown.\n\t   *\n\t   */\n\n\n\t  onKeyDown(e) {\n\t    var self = this;\n\n\t    if (self.isLocked) {\n\t      if (e.keyCode !== KEY_TAB) {\n\t        preventDefault(e);\n\t      }\n\n\t      return;\n\t    }\n\n\t    switch (e.keyCode) {\n\t      // ctrl+A: select all\n\t      case KEY_A:\n\t        if (isKeyDown(KEY_SHORTCUT, e)) {\n\t          self.selectAll();\n\t          return;\n\t        }\n\n\t        break;\n\t      // esc: close dropdown\n\n\t      case KEY_ESC:\n\t        if (self.isOpen) {\n\t          preventDefault(e, true);\n\t          self.close();\n\t        }\n\n\t        self.clearActiveItems();\n\t        return;\n\t      // down: open dropdown or move selection down\n\n\t      case KEY_DOWN:\n\t        if (!self.isOpen && self.hasOptions) {\n\t          self.open();\n\t        } else if (self.activeOption) {\n\t          let next = self.getAdjacent(self.activeOption, 1);\n\t          if (next) self.setActiveOption(next);\n\t        }\n\n\t        preventDefault(e);\n\t        return;\n\t      // up: move selection up\n\n\t      case KEY_UP:\n\t        if (self.activeOption) {\n\t          let prev = self.getAdjacent(self.activeOption, -1);\n\t          if (prev) self.setActiveOption(prev);\n\t        }\n\n\t        preventDefault(e);\n\t        return;\n\t      // doc_src select active option\n\n\t      case KEY_RETURN:\n\t        if (self.isOpen && self.activeOption) {\n\t          self.onOptionSelect(e, self.activeOption);\n\t          preventDefault(e); // if the option_create=null, the dropdown might be closed\n\t        } else if (self.settings.create && self.createItem()) {\n\t          preventDefault(e);\n\t        }\n\n\t        return;\n\t      // left: modifiy item selection to the left\n\n\t      case KEY_LEFT:\n\t        self.advanceSelection(-1, e);\n\t        return;\n\t      // right: modifiy item selection to the right\n\n\t      case KEY_RIGHT:\n\t        self.advanceSelection(1, e);\n\t        return;\n\t      // tab: select active option and/or create item\n\n\t      case KEY_TAB:\n\t        if (self.settings.selectOnTab) {\n\t          if (self.isOpen && self.activeOption) {\n\t            self.tab_key = true;\n\t            self.onOptionSelect(e, self.activeOption); // prevent default [tab] behaviour of jump to the next field\n\t            // if select isFull, then the dropdown won't be open and [tab] will work normally\n\n\t            preventDefault(e);\n\t            self.tab_key = false;\n\t          }\n\n\t          if (self.settings.create && self.createItem()) {\n\t            preventDefault(e);\n\t          }\n\t        }\n\n\t        return;\n\t      // delete|backspace: delete items\n\n\t      case KEY_BACKSPACE:\n\t      case KEY_DELETE:\n\t        self.deleteSelection(e);\n\t        return;\n\t    } // don't enter text in the control_input when active items are selected\n\n\n\t    if (self.isInputHidden && !isKeyDown(KEY_SHORTCUT, e)) {\n\t      preventDefault(e);\n\t    }\n\t  }\n\t  /**\n\t   * Triggered on <input> keyup.\n\t   *\n\t   */\n\n\n\t  onKeyUp(e) {\n\t    var self = this;\n\n\t    if (self.isLocked) {\n\t      preventDefault(e);\n\t      return;\n\t    }\n\n\t    var value = self.inputValue();\n\n\t    if (self.lastValue !== value) {\n\t      self.lastValue = value;\n\n\t      if (self.settings.shouldLoad.call(self, value)) {\n\t        self.load(value);\n\t      }\n\n\t      self.refreshOptions();\n\t      self.trigger('type', value);\n\t    }\n\t  }\n\t  /**\n\t   * Triggered on <input> focus.\n\t   *\n\t   */\n\n\n\t  onFocus(e) {\n\t    var self = this;\n\t    var wasFocused = self.isFocused;\n\n\t    if (self.isDisabled) {\n\t      self.blur();\n\t      preventDefault(e);\n\t      return;\n\t    }\n\n\t    if (self.ignoreFocus) return;\n\t    self.isFocused = true;\n\t    if (self.settings.preload === 'focus') self.load('');\n\t    if (!wasFocused) self.trigger('focus');\n\n\t    if (!self.activeItems.length) {\n\t      self.showInput();\n\t      self.setActiveItem();\n\t      self.refreshOptions(!!self.settings.openOnFocus);\n\t    }\n\n\t    self.refreshState();\n\t  }\n\t  /**\n\t   * Triggered on <input> blur.\n\t   *\n\t   */\n\n\n\t  onBlur(e) {\n\t    var self = this;\n\t    if (!self.isFocused) return;\n\t    self.isFocused = false;\n\t    self.ignoreFocus = false;\n\n\t    var deactivate = () => {\n\t      self.close();\n\t      self.setActiveItem();\n\t      self.setCaret(self.items.length);\n\t      self.trigger('blur');\n\t    };\n\n\t    if (self.settings.create && self.settings.createOnBlur) {\n\t      self.createItem(null, false, deactivate);\n\t    } else {\n\t      deactivate();\n\t    }\n\t  }\n\t  /**\n\t   * Triggered when the user clicks on an option\n\t   * in the autocomplete dropdown menu.\n\t   *\n\t   */\n\n\n\t  onOptionSelect(evt, option) {\n\t    var value,\n\t        self = this;\n\n\t    if (!option) {\n\t      return;\n\t    } // should not be possible to trigger a option under a disabled optgroup\n\n\n\t    if (option.parentElement && option.parentElement.matches('[data-disabled]')) {\n\t      return;\n\t    }\n\n\t    if (option.classList.contains('create')) {\n\t      self.createItem(null, true, () => {\n\t        if (self.settings.closeAfterSelect) {\n\t          self.close();\n\t        }\n\t      });\n\t    } else {\n\t      value = option.dataset.value;\n\n\t      if (typeof value !== 'undefined') {\n\t        self.lastQuery = null;\n\t        self.addItem(value);\n\n\t        if (self.settings.closeAfterSelect) {\n\t          self.close();\n\t        } else if (!self.settings.hideSelected && evt.type && /mouse/.test(evt.type)) {\n\t          self.setActiveOption(self.getOption(value));\n\t        }\n\t      }\n\t    }\n\t  }\n\t  /**\n\t   * Triggered when the user clicks on an item\n\t   * that has been selected.\n\t   *\n\t   */\n\n\n\t  onItemSelect(evt, item) {\n\t    var self = this;\n\n\t    if (!self.isLocked && self.settings.mode === 'multi') {\n\t      preventDefault(evt);\n\t      self.setActiveItem(item, evt);\n\t      return true;\n\t    }\n\n\t    return false;\n\t  }\n\t  /**\n\t   * Determines whether or not to invoke\n\t   * the user-provided option provider / loader\n\t   *\n\t   * Note, there is a subtle difference between\n\t   * this.canLoad() and this.settings.shouldLoad();\n\t   *\n\t   *\t- settings.shouldLoad() is a user-input validator.\n\t   *\tWhen false is returned, the not_loading template\n\t   *\twill be added to the dropdown\n\t   *\n\t   *\t- canLoad() is lower level validator that checks\n\t   * \tthe Tom Select instance. There is no inherent user\n\t   *\tfeedback when canLoad returns false\n\t   *\n\t   */\n\n\n\t  canLoad(value) {\n\t    if (!this.settings.load) return false;\n\t    if (this.loadedSearches.hasOwnProperty(value)) return false;\n\t    return true;\n\t  }\n\t  /**\n\t   * Invokes the user-provided option provider / loader.\n\t   *\n\t   */\n\n\n\t  load(value) {\n\t    const self = this;\n\t    if (!self.canLoad(value)) return;\n\t    addClasses(self.wrapper, self.settings.loadingClass);\n\t    self.loading++;\n\t    const callback = self.loadCallback.bind(self, value);\n\t    self.settings.load.call(self, value, callback);\n\t  }\n\t  /**\n\t   * Invoked by the user-provided option provider\n\t   *\n\t   */\n\n\n\t  loadCallback(value, options, optgroups) {\n\t    const self = this;\n\t    self.loading = Math.max(self.loading - 1, 0);\n\t    self.lastQuery = null;\n\t    self.clearActiveOption(); // when new results load, focus should be on first option\n\n\t    self.setupOptions(options, optgroups);\n\t    self.refreshOptions(self.isFocused && !self.isInputHidden);\n\n\t    if (!self.loading) {\n\t      removeClasses(self.wrapper, self.settings.loadingClass);\n\t    }\n\n\t    self.trigger('load', options, optgroups);\n\t  }\n\t  /**\n\t   * Sets the input field of the control to the specified value.\n\t   *\n\t   */\n\n\n\t  setTextboxValue(value = '') {\n\t    var input = this.control_input;\n\t    var changed = input.value !== value;\n\n\t    if (changed) {\n\t      input.value = value;\n\t      triggerEvent(input, 'update');\n\t      this.lastValue = value;\n\t    }\n\t  }\n\t  /**\n\t   * Returns the value of the control. If multiple items\n\t   * can be selected (e.g. <select multiple>), this returns\n\t   * an array. If only one item can be selected, this\n\t   * returns a string.\n\t   *\n\t   */\n\n\n\t  getValue() {\n\t    if (this.is_select_tag && this.input.hasAttribute('multiple')) {\n\t      return this.items;\n\t    }\n\n\t    return this.items.join(this.settings.delimiter);\n\t  }\n\t  /**\n\t   * Resets the selected items to the given value.\n\t   *\n\t   */\n\n\n\t  setValue(value, silent) {\n\t    var events = silent ? [] : ['change'];\n\t    debounce_events(this, events, () => {\n\t      this.clear(silent);\n\t      this.addItems(value, silent);\n\t    });\n\t  }\n\t  /**\n\t   * Resets the number of max items to the given value\n\t   *\n\t   */\n\n\n\t  setMaxItems(value) {\n\t    if (value === 0) value = null; //reset to unlimited items.\n\n\t    this.settings.maxItems = value;\n\t    this.refreshState();\n\t  }\n\t  /**\n\t   * Sets the selected item.\n\t   *\n\t   */\n\n\n\t  setActiveItem(item, e) {\n\t    var self = this;\n\t    var eventName;\n\t    var i, begin, end, swap;\n\t    var last;\n\t    if (self.settings.mode === 'single') return; // clear the active selection\n\n\t    if (!item) {\n\t      self.clearActiveItems();\n\n\t      if (self.isFocused) {\n\t        self.showInput();\n\t      }\n\n\t      return;\n\t    } // modify selection\n\n\n\t    eventName = e && e.type.toLowerCase();\n\n\t    if (eventName === 'click' && isKeyDown('shiftKey', e) && self.activeItems.length) {\n\t      last = self.getLastActive();\n\t      begin = Array.prototype.indexOf.call(self.control.children, last);\n\t      end = Array.prototype.indexOf.call(self.control.children, item);\n\n\t      if (begin > end) {\n\t        swap = begin;\n\t        begin = end;\n\t        end = swap;\n\t      }\n\n\t      for (i = begin; i <= end; i++) {\n\t        item = self.control.children[i];\n\n\t        if (self.activeItems.indexOf(item) === -1) {\n\t          self.setActiveItemClass(item);\n\t        }\n\t      }\n\n\t      preventDefault(e);\n\t    } else if (eventName === 'click' && isKeyDown(KEY_SHORTCUT, e) || eventName === 'keydown' && isKeyDown('shiftKey', e)) {\n\t      if (item.classList.contains('active')) {\n\t        self.removeActiveItem(item);\n\t      } else {\n\t        self.setActiveItemClass(item);\n\t      }\n\t    } else {\n\t      self.clearActiveItems();\n\t      self.setActiveItemClass(item);\n\t    } // ensure control has focus\n\n\n\t    self.hideInput();\n\n\t    if (!self.isFocused) {\n\t      self.focus();\n\t    }\n\t  }\n\t  /**\n\t   * Set the active and last-active classes\n\t   *\n\t   */\n\n\n\t  setActiveItemClass(item) {\n\t    var last_active = this.control.querySelector('.last-active');\n\t    if (last_active) removeClasses(last_active, 'last-active');\n\t    addClasses(item, 'active last-active');\n\n\t    if (this.activeItems.indexOf(item) == -1) {\n\t      this.activeItems.push(item);\n\t    }\n\t  }\n\t  /**\n\t   * Remove active item\n\t   *\n\t   */\n\n\n\t  removeActiveItem(item) {\n\t    var idx = this.activeItems.indexOf(item);\n\t    this.activeItems.splice(idx, 1);\n\t    removeClasses(item, 'active');\n\t  }\n\t  /**\n\t   * Clears all the active items\n\t   *\n\t   */\n\n\n\t  clearActiveItems() {\n\t    removeClasses(this.activeItems, 'active');\n\t    this.activeItems = [];\n\t  }\n\t  /**\n\t   * Sets the selected item in the dropdown menu\n\t   * of available options.\n\t   *\n\t   */\n\n\n\t  setActiveOption(option) {\n\t    var height_menu, height_item, y;\n\n\t    if (option === this.activeOption) {\n\t      return;\n\t    }\n\n\t    this.clearActiveOption();\n\t    if (!option) return;\n\t    this.activeOption = option;\n\t    setAttr(this.control_input, {\n\t      'aria-activedescendant': option.getAttribute('id')\n\t    });\n\t    setAttr(option, {\n\t      'aria-selected': 'true'\n\t    });\n\t    addClasses(option, 'active');\n\t    height_menu = this.dropdown_content.clientHeight;\n\t    let scrollTop = this.dropdown_content.scrollTop || 0;\n\t    height_item = this.activeOption.offsetHeight;\n\t    y = this.activeOption.getBoundingClientRect().top - this.dropdown_content.getBoundingClientRect().top + scrollTop;\n\n\t    if (y + height_item > height_menu + scrollTop) {\n\t      this.dropdown_content.scrollTop = y - height_menu + height_item;\n\t    } else if (y < scrollTop) {\n\t      this.dropdown_content.scrollTop = y;\n\t    }\n\t  }\n\t  /**\n\t   * Clears the active option\n\t   *\n\t   */\n\n\n\t  clearActiveOption() {\n\t    if (this.activeOption) {\n\t      removeClasses(this.activeOption, 'active');\n\t      this.activeOption.removeAttribute('aria-selected');\n\t    }\n\n\t    this.activeOption = null;\n\t    this.control_input.removeAttribute('aria-activedescendant');\n\t  }\n\t  /**\n\t   * Selects all items (CTRL + A).\n\t   */\n\n\n\t  selectAll() {\n\t    if (this.settings.mode === 'single') return;\n\t    this.activeItems = this.controlChildren();\n\n\t    if (this.activeItems.length) {\n\t      addClasses(this.activeItems, 'active');\n\t      this.hideInput();\n\t      this.close();\n\t    }\n\n\t    this.focus();\n\t  }\n\t  /**\n\t   * Determines if the control_input should be in a hidden or visible state\n\t   *\n\t   */\n\n\n\t  inputState() {\n\t    var self = this;\n\t    if (self.settings.controlInput) return;\n\n\t    if (self.activeItems.length > 0 || !self.isFocused && this.settings.hidePlaceholder && self.items.length > 0) {\n\t      self.setTextboxValue();\n\t      self.isInputHidden = true;\n\t      addClasses(self.wrapper, 'input-hidden');\n\t    } else {\n\t      self.isInputHidden = false;\n\t      removeClasses(self.wrapper, 'input-hidden');\n\t    }\n\t  }\n\t  /**\n\t   * Hides the input element out of view, while\n\t   * retaining its focus.\n\t   * @deprecated 1.3\n\t   */\n\n\n\t  hideInput() {\n\t    this.inputState();\n\t  }\n\t  /**\n\t   * Restores input visibility.\n\t   * @deprecated 1.3\n\t   */\n\n\n\t  showInput() {\n\t    this.inputState();\n\t  }\n\t  /**\n\t   * Get the input value\n\t   */\n\n\n\t  inputValue() {\n\t    return this.control_input.value.trim();\n\t  }\n\t  /**\n\t   * Gives the control focus.\n\t   */\n\n\n\t  focus() {\n\t    var self = this;\n\t    if (self.isDisabled) return;\n\t    self.ignoreFocus = true;\n\t    self.control_input.focus();\n\t    setTimeout(() => {\n\t      self.ignoreFocus = false;\n\t      self.onFocus();\n\t    }, 0);\n\t  }\n\t  /**\n\t   * Forces the control out of focus.\n\t   *\n\t   */\n\n\n\t  blur() {\n\t    this.control_input.blur();\n\t    this.onBlur(null);\n\t  }\n\t  /**\n\t   * Returns a function that scores an object\n\t   * to show how good of a match it is to the\n\t   * provided query.\n\t   *\n\t   * @return {function}\n\t   */\n\n\n\t  getScoreFunction(query) {\n\t    return this.sifter.getScoreFunction(query, this.getSearchOptions());\n\t  }\n\t  /**\n\t   * Returns search options for sifter (the system\n\t   * for scoring and sorting results).\n\t   *\n\t   * @see https://github.com/orchidjs/sifter.js\n\t   * @return {object}\n\t   */\n\n\n\t  getSearchOptions() {\n\t    var settings = this.settings;\n\t    var sort = settings.sortField;\n\n\t    if (typeof settings.sortField === 'string') {\n\t      sort = [{\n\t        field: settings.sortField\n\t      }];\n\t    }\n\n\t    return {\n\t      fields: settings.searchField,\n\t      conjunction: settings.searchConjunction,\n\t      sort: sort,\n\t      nesting: settings.nesting\n\t    };\n\t  }\n\t  /**\n\t   * Searches through available options and returns\n\t   * a sorted array of matches.\n\t   *\n\t   */\n\n\n\t  search(query) {\n\t    var i, result, calculateScore;\n\t    var self = this;\n\t    var settings = self.settings;\n\t    var options = this.getSearchOptions(); // validate user-provided result scoring function\n\n\t    if (settings.score) {\n\t      calculateScore = self.settings.score.call(self, query);\n\n\t      if (typeof calculateScore !== 'function') {\n\t        throw new Error('Tom Select \"score\" setting must be a function that returns a function');\n\t      }\n\t    } // perform search\n\n\n\t    if (query !== self.lastQuery) {\n\t      self.lastQuery = query;\n\t      result = self.sifter.search(query, Object.assign(options, {\n\t        score: calculateScore\n\t      }));\n\t      self.currentResults = result;\n\t    } else {\n\t      result = Object.assign({}, self.currentResults);\n\t    } // filter out selected items\n\n\n\t    if (settings.hideSelected) {\n\t      for (i = result.items.length - 1; i >= 0; i--) {\n\t        if (self.items.indexOf(hash_key(result.items[i].id)) !== -1) {\n\t          result.items.splice(i, 1);\n\t        }\n\t      }\n\t    }\n\n\t    return result;\n\t  }\n\t  /**\n\t   * Refreshes the list of available options shown\n\t   * in the autocomplete dropdown menu.\n\t   *\n\t   */\n\n\n\t  refreshOptions(triggerDropdown = true) {\n\t    var i, j, k, n, groups_order, optgroup, optgroups, html, has_create_option;\n\t    var active, create;\n\t    var groups;\n\t    var self = this;\n\t    var query = self.inputValue();\n\t    var results = self.search(query);\n\t    var active_before_hash = self.activeOption && hash_key(self.activeOption.dataset.value);\n\t    var show_dropdown = self.settings.shouldOpen || false; // build markup\n\n\t    n = results.items.length;\n\n\t    if (typeof self.settings.maxOptions === 'number') {\n\t      n = Math.min(n, self.settings.maxOptions);\n\t    }\n\n\t    if (n > 0) {\n\t      show_dropdown = true;\n\t    } // render and group available options individually\n\n\n\t    groups = {};\n\t    groups_order = [];\n\n\t    for (i = 0; i < n; i++) {\n\t      // get option dom element, don't re-render if we\n\t      let option = self.options[results.items[i].id];\n\t      let opt_value = hash_key(option[self.settings.valueField]);\n\t      let option_el = self.getOption(opt_value);\n\n\t      if (!option_el) {\n\t        option_el = self.render('option', option);\n\t      } // toggle 'selected' class\n\n\n\t      if (!self.settings.hideSelected) {\n\t        option_el.classList.toggle('selected', self.items.includes(opt_value));\n\t      }\n\n\t      optgroup = option[self.settings.optgroupField] || '';\n\t      optgroups = Array.isArray(optgroup) ? optgroup : [optgroup];\n\n\t      for (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n\t        optgroup = optgroups[j];\n\n\t        if (!self.optgroups.hasOwnProperty(optgroup)) {\n\t          optgroup = '';\n\t        }\n\n\t        if (!groups.hasOwnProperty(optgroup)) {\n\t          groups[optgroup] = document.createDocumentFragment();\n\t          groups_order.push(optgroup);\n\t        } // a child could only have one parent, so if you have more parents clone the child\n\n\n\t        if (j > 0) {\n\t          option_el = option_el.cloneNode(true);\n\t          removeClasses(option_el, 'active');\n\t          option_el.removeAttribute('aria-selected');\n\t        }\n\n\t        groups[optgroup].appendChild(option_el);\n\t      }\n\t    } // sort optgroups\n\n\n\t    if (this.settings.lockOptgroupOrder) {\n\t      groups_order.sort((a, b) => {\n\t        var a_order = self.optgroups[a] && self.optgroups[a].$order || 0;\n\t        var b_order = self.optgroups[b] && self.optgroups[b].$order || 0;\n\t        return a_order - b_order;\n\t      });\n\t    } // render optgroup headers & join groups\n\n\n\t    html = document.createDocumentFragment();\n\n\t    for (optgroup of groups_order) {\n\t      if (self.optgroups.hasOwnProperty(optgroup) && groups[optgroup].children.length) {\n\t        let group_options = document.createDocumentFragment();\n\t        group_options.append(self.render('optgroup_header', self.optgroups[optgroup]));\n\t        group_options.append(groups[optgroup]);\n\t        let group_html = self.render('optgroup', {\n\t          group: self.optgroups[optgroup],\n\t          options: group_options\n\t        });\n\t        html.append(group_html);\n\t      } else {\n\t        html.append(groups[optgroup]);\n\t      }\n\t    }\n\n\t    self.dropdown_content.innerHTML = '';\n\t    self.dropdown_content.append(html); // highlight matching terms inline\n\n\t    if (self.settings.highlight) {\n\t      removeHighlight(self.dropdown_content);\n\n\t      if (results.query.length && results.tokens.length) {\n\t        for (const tok of results.tokens) {\n\t          highlight(self.dropdown_content, tok.regex);\n\t        }\n\t      }\n\t    } // helper method for adding templates to dropdown\n\n\n\t    var add_template = template => {\n\t      let content = self.render(template, {\n\t        input: query\n\t      });\n\n\t      if (content) {\n\t        show_dropdown = true;\n\t        self.dropdown_content.insertBefore(content, self.dropdown_content.firstChild);\n\t      }\n\n\t      return content;\n\t    }; // invalid query\n\n\n\t    if (!self.settings.shouldLoad.call(self, query)) {\n\t      add_template('not_loading'); // add loading message\n\t    } else if (self.loading) {\n\t      add_template('loading'); // add no_results message\n\t    } else if (results.items.length === 0) {\n\t      add_template('no_results');\n\t    } // add create option\n\n\n\t    has_create_option = self.canCreate(query);\n\n\t    if (has_create_option) {\n\t      create = add_template('option_create');\n\t    } // activate\n\n\n\t    self.hasOptions = results.items.length > 0 || has_create_option;\n\n\t    if (show_dropdown) {\n\t      if (results.items.length > 0) {\n\t        active = active_before_hash && self.getOption(active_before_hash);\n\n\t        if (!active && self.settings.mode === 'single' && self.items.length) {\n\t          active = self.getOption(self.items[0]);\n\t        }\n\n\t        if (!active || !self.dropdown_content.contains(active)) {\n\t          let active_index = 0;\n\n\t          if (create && !self.settings.addPrecedence) {\n\t            active_index = 1;\n\t          }\n\n\t          active = self.selectable()[active_index];\n\t        }\n\t      } else {\n\t        active = create;\n\t      }\n\n\t      self.setActiveOption(active);\n\n\t      if (triggerDropdown && !self.isOpen) {\n\t        self.open();\n\t      }\n\t    } else {\n\t      self.clearActiveOption();\n\n\t      if (triggerDropdown && self.isOpen) {\n\t        self.close(false); // if create_option=null, we wan't the dropdown to close but not reset the textbox value\n\t      }\n\t    }\n\t  }\n\t  /**\n\t   * Return list of selectable options\n\t   *\n\t   */\n\n\n\t  selectable() {\n\t    return this.dropdown_content.querySelectorAll('[data-selectable]');\n\t  }\n\t  /**\n\t   * Adds an available option. If it already exists,\n\t   * nothing will happen. Note: this does not refresh\n\t   * the options list dropdown (use `refreshOptions`\n\t   * for that).\n\t   *\n\t   * Usage:\n\t   *\n\t   *   this.addOption(data)\n\t   *\n\t   */\n\n\n\t  addOption(data) {\n\t    var value,\n\t        self = this;\n\n\t    if (Array.isArray(data)) {\n\t      for (const dat of data) {\n\t        self.addOption(dat);\n\t      }\n\n\t      return;\n\t    }\n\n\t    if (value = self.registerOption(data)) {\n\t      self.userOptions[value] = true;\n\t      self.lastQuery = null;\n\t      self.trigger('option_add', value, data);\n\t    }\n\t  }\n\t  /**\n\t   * Registers an option to the pool of options.\n\t   *\n\t   */\n\n\n\t  registerOption(data) {\n\t    var key = hash_key(data[this.settings.valueField]);\n\t    if (key === null || this.options.hasOwnProperty(key)) return false;\n\t    data.$order = data.$order || ++this.order;\n\t    data.$id = this.inputId + '-opt-' + data.$order;\n\t    this.options[key] = data;\n\t    return key;\n\t  }\n\t  /**\n\t   * Registers an option group to the pool of option groups.\n\t   *\n\t   * @return {boolean|string}\n\t   */\n\n\n\t  registerOptionGroup(data) {\n\t    var key = hash_key(data[this.settings.optgroupValueField]);\n\t    if (key === null) return false;\n\t    data.$order = data.$order || ++this.order;\n\t    this.optgroups[key] = data;\n\t    return key;\n\t  }\n\t  /**\n\t   * Registers a new optgroup for options\n\t   * to be bucketed into.\n\t   *\n\t   */\n\n\n\t  addOptionGroup(id, data) {\n\t    var hashed_id;\n\t    data[this.settings.optgroupValueField] = id;\n\n\t    if (hashed_id = this.registerOptionGroup(data)) {\n\t      this.trigger('optgroup_add', hashed_id, data);\n\t    }\n\t  }\n\t  /**\n\t   * Removes an existing option group.\n\t   *\n\t   */\n\n\n\t  removeOptionGroup(id) {\n\t    if (this.optgroups.hasOwnProperty(id)) {\n\t      delete this.optgroups[id];\n\t      this.clearCache();\n\t      this.trigger('optgroup_remove', id);\n\t    }\n\t  }\n\t  /**\n\t   * Clears all existing option groups.\n\t   */\n\n\n\t  clearOptionGroups() {\n\t    this.optgroups = {};\n\t    this.clearCache();\n\t    this.trigger('optgroup_clear');\n\t  }\n\t  /**\n\t   * Updates an option available for selection. If\n\t   * it is visible in the selected items or options\n\t   * dropdown, it will be re-rendered automatically.\n\t   *\n\t   */\n\n\n\t  updateOption(value, data) {\n\t    var self = this;\n\t    var item, item_new;\n\t    var value_new, index_item, cache_items, cache_options, order_old;\n\t    value = hash_key(value);\n\t    value_new = hash_key(data[self.settings.valueField]); // sanity checks\n\n\t    if (value === null) return;\n\t    if (!self.options.hasOwnProperty(value)) return;\n\t    if (typeof value_new !== 'string') throw new Error('Value must be set in option data');\n\t    order_old = self.options[value].$order; // update references\n\n\t    if (value_new !== value) {\n\t      delete self.options[value];\n\t      index_item = self.items.indexOf(value);\n\n\t      if (index_item !== -1) {\n\t        self.items.splice(index_item, 1, value_new);\n\t      }\n\t    }\n\n\t    data.$order = data.$order || order_old;\n\t    self.options[value_new] = data; // invalidate render cache\n\n\t    cache_items = self.renderCache['item'];\n\t    cache_options = self.renderCache['option'];\n\n\t    if (cache_items) {\n\t      delete cache_items[value];\n\t      delete cache_items[value_new];\n\t    }\n\n\t    if (cache_options) {\n\t      delete cache_options[value];\n\t      delete cache_options[value_new];\n\t    } // update the item if it's selected\n\n\n\t    if (self.items.indexOf(value_new) !== -1) {\n\t      item = self.getItem(value);\n\t      item_new = self.render('item', data);\n\t      if (item.classList.contains('active')) addClasses(item_new, 'active');\n\t      item.parentNode.insertBefore(item_new, item);\n\t      item.remove();\n\t    } // invalidate last query because we might have updated the sortField\n\n\n\t    self.lastQuery = null; // update dropdown contents\n\n\t    if (self.isOpen) {\n\t      self.refreshOptions(false);\n\t    }\n\t  }\n\t  /**\n\t   * Removes a single option.\n\t   *\n\t   */\n\n\n\t  removeOption(value, silent) {\n\t    var self = this;\n\t    value = hash_key(value);\n\t    var cache_items = self.renderCache['item'];\n\t    var cache_options = self.renderCache['option'];\n\t    if (cache_items) delete cache_items[value];\n\t    if (cache_options) delete cache_options[value];\n\t    delete self.userOptions[value];\n\t    delete self.options[value];\n\t    self.lastQuery = null;\n\t    self.trigger('option_remove', value);\n\t    self.removeItem(value, silent);\n\t  }\n\t  /**\n\t   * Clears all options.\n\t   */\n\n\n\t  clearOptions() {\n\t    this.loadedSearches = {};\n\t    this.userOptions = {};\n\t    this.clearCache();\n\t    var selected = {};\n\n\t    for (let key in this.options) {\n\t      if (this.options.hasOwnProperty(key) && this.items.indexOf(key) >= 0) {\n\t        selected[key] = this.options[key];\n\t      }\n\t    }\n\n\t    this.options = this.sifter.items = selected;\n\t    this.lastQuery = null;\n\t    this.trigger('option_clear');\n\t  }\n\t  /**\n\t   * Returns the dom element of the option\n\t   * matching the given value.\n\t   *\n\t   * @returns {object}\n\t   */\n\n\n\t  getOption(value) {\n\t    value = hash_key(value);\n\n\t    if (value) {\n\t      const option = this.dropdown_content.querySelector(`[data-selectable][data-value=\"${addSlashes(value)}\"]`);\n\n\t      if (option) {\n\t        return option;\n\t      }\n\t    }\n\n\t    if (this.renderCache['option'].hasOwnProperty(value)) {\n\t      return this.renderCache['option'][value];\n\t    }\n\t  }\n\t  /**\n\t   * Returns the dom element of the next or previous dom element of the same type\n\t   * Note: adjacent options may not be adjacent DOM elements (optgroups)\n\t   *\n\t   */\n\n\n\t  getAdjacent(option, direction, type = 'option') {\n\t    var self = this,\n\t        all;\n\n\t    if (!option) {\n\t      return;\n\t    }\n\n\t    if (type == 'item') {\n\t      all = self.controlChildren();\n\t    } else {\n\t      all = self.dropdown_content.querySelectorAll('[data-selectable]');\n\t    }\n\n\t    for (let i = 0; i < all.length; i++) {\n\t      if (all[i] != option) {\n\t        continue;\n\t      }\n\n\t      if (direction > 0) {\n\t        return all[i + 1];\n\t      }\n\n\t      return all[i - 1];\n\t    }\n\t  }\n\t  /**\n\t   * Returns the dom element of the item\n\t   * matching the given value.\n\t   *\n\t   */\n\n\n\t  getItem(value) {\n\t    value = hash_key(value);\n\n\t    if (value) {\n\t      value = addSlashes(value);\n\t      return this.control.querySelector(`[data-value=\"${value}\"]`);\n\t    }\n\t  }\n\t  /**\n\t   * \"Selects\" multiple items at once. Adds them to the list\n\t   * at the current caret position.\n\t   *\n\t   */\n\n\n\t  addItems(values, silent) {\n\t    var self = this;\n\t    self.buffer = document.createDocumentFragment();\n\n\t    for (const child of self.control.children) {\n\t      self.buffer.appendChild(child);\n\t    }\n\n\t    var items = Array.isArray(values) ? values : [values];\n\t    items = items.filter(x => self.items.indexOf(x) === -1);\n\n\t    for (let i = 0, n = items.length; i < n; i++) {\n\t      self.isPending = i < n - 1;\n\t      self.addItem(items[i], silent);\n\t    }\n\n\t    var control = self.control;\n\t    control.insertBefore(self.buffer, control.firstChild);\n\t    self.buffer = null;\n\t  }\n\t  /**\n\t   * \"Selects\" an item. Adds it to the list\n\t   * at the current caret position.\n\t   *\n\t   */\n\n\n\t  addItem(value, silent) {\n\t    var events = silent ? [] : ['change'];\n\t    debounce_events(this, events, () => {\n\t      var item;\n\t      var self = this;\n\t      var inputMode = self.settings.mode;\n\t      var wasFull;\n\t      value = hash_key(value);\n\n\t      if (self.items.indexOf(value) !== -1) {\n\t        if (inputMode === 'single') {\n\t          self.close();\n\t        }\n\n\t        if (inputMode === 'single' || !self.settings.duplicates) {\n\t          return;\n\t        }\n\t      }\n\n\t      if (!self.options.hasOwnProperty(value)) return;\n\t      if (inputMode === 'single') self.clear(silent);\n\t      if (inputMode === 'multi' && self.isFull()) return;\n\t      item = self.render('item', self.options[value]);\n\n\t      if (self.control.contains(item)) {\n\t        // duplicates\n\t        item = item.cloneNode(true);\n\t      }\n\n\t      wasFull = self.isFull();\n\t      self.items.splice(self.caretPos, 0, value);\n\t      self.insertAtCaret(item);\n\n\t      if (self.isSetup) {\n\t        let options = self.selectable(); // update menu / remove the option (if this is not one item being added as part of series)\n\n\t        if (!self.isPending) {\n\t          let option = self.getOption(value);\n\t          let next = self.getAdjacent(option, 1);\n\t          self.refreshOptions(self.isFocused && inputMode !== 'single');\n\n\t          if (next) {\n\t            self.setActiveOption(next);\n\t          }\n\t        } // hide the menu if the maximum number of items have been selected or no options are left\n\n\n\t        if (!options.length || self.isFull()) {\n\t          self.close();\n\t        } else if (!self.isPending) {\n\t          self.positionDropdown();\n\t        }\n\n\t        self.trigger('item_add', value, item);\n\n\t        if (!self.isPending) {\n\t          self.updateOriginalInput({\n\t            silent: silent\n\t          });\n\t        }\n\t      }\n\n\t      if (!self.isPending || !wasFull && self.isFull()) {\n\t        self.refreshState();\n\t      }\n\t    });\n\t  }\n\t  /**\n\t   * Removes the selected item matching\n\t   * the provided value.\n\t   *\n\t   */\n\n\n\t  removeItem(value, silent) {\n\t    var i,\n\t        idx,\n\t        self = this;\n\t    var item = self.getItem(value);\n\t    if (!item) return;\n\t    value = hash_key(item.dataset.value);\n\t    i = self.items.indexOf(value);\n\n\t    if (i !== -1) {\n\t      item.remove();\n\n\t      if (item.classList.contains('active')) {\n\t        idx = self.activeItems.indexOf(item);\n\t        self.activeItems.splice(idx, 1);\n\t        removeClasses(item, 'active');\n\t      }\n\n\t      self.items.splice(i, 1);\n\t      self.lastQuery = null;\n\n\t      if (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n\t        self.removeOption(value, silent);\n\t      }\n\n\t      if (i < self.caretPos) {\n\t        self.setCaret(self.caretPos - 1);\n\t      }\n\n\t      self.updateOriginalInput({\n\t        silent: silent\n\t      });\n\t      self.refreshState();\n\t      self.positionDropdown();\n\t      self.trigger('item_remove', value, item);\n\t    }\n\t  }\n\t  /**\n\t   * Invokes the `create` method provided in the\n\t   * TomSelect options that should provide the data\n\t   * for the new item, given the user input.\n\t   *\n\t   * Once this completes, it will be added\n\t   * to the item list.\n\t   *\n\t   */\n\n\n\t  createItem(input, triggerDropdown = true, callback) {\n\t    var self = this;\n\t    var caret = self.caretPos;\n\t    var output;\n\t    input = input || self.inputValue();\n\t    if (typeof callback !== 'function') callback = () => {};\n\n\t    if (!self.canCreate(input)) {\n\t      callback();\n\t      return false;\n\t    }\n\n\t    self.lock();\n\t    var created = false;\n\n\t    var create = data => {\n\t      self.unlock();\n\t      if (!data || typeof data !== 'object') return callback();\n\t      var value = hash_key(data[self.settings.valueField]);\n\n\t      if (typeof value !== 'string') {\n\t        return callback();\n\t      }\n\n\t      self.setTextboxValue();\n\t      self.addOption(data);\n\t      self.setCaret(caret);\n\t      self.addItem(value);\n\t      self.refreshOptions(triggerDropdown && self.settings.mode !== 'single');\n\t      callback(data);\n\t      created = true;\n\t    };\n\n\t    if (typeof self.settings.create === 'function') {\n\t      output = self.settings.create.call(this, input, create);\n\t    } else {\n\t      output = {\n\t        [self.settings.labelField]: input,\n\t        [self.settings.valueField]: input\n\t      };\n\t    }\n\n\t    if (!created) {\n\t      create(output);\n\t    }\n\n\t    return true;\n\t  }\n\t  /**\n\t   * Re-renders the selected item lists.\n\t   */\n\n\n\t  refreshItems() {\n\t    var self = this;\n\t    self.lastQuery = null;\n\n\t    if (self.isSetup) {\n\t      self.addItems(self.items);\n\t    }\n\n\t    self.updateOriginalInput();\n\t    self.refreshState();\n\t  }\n\t  /**\n\t   * Updates all state-dependent attributes\n\t   * and CSS classes.\n\t   */\n\n\n\t  refreshState() {\n\t    var self = this;\n\t    self.refreshValidityState();\n\t    var isFull = self.isFull();\n\t    var isLocked = self.isLocked;\n\t    self.wrapper.classList.toggle('rtl', self.rtl);\n\t    var classList = self.control.classList;\n\t    classList.toggle('focus', self.isFocused);\n\t    classList.toggle('disabled', self.isDisabled);\n\t    classList.toggle('required', self.isRequired);\n\t    classList.toggle('invalid', self.isInvalid);\n\t    classList.toggle('locked', isLocked);\n\t    classList.toggle('full', isFull);\n\t    classList.toggle('not-full', !isFull);\n\t    classList.toggle('input-active', self.isFocused && !self.isInputHidden);\n\t    classList.toggle('dropdown-active', self.isOpen);\n\t    classList.toggle('has-options', isEmptyObject(self.options));\n\t    classList.toggle('has-items', self.items.length > 0);\n\t  }\n\t  /**\n\t   * Update the `required` attribute of both input and control input.\n\t   *\n\t   * The `required` property needs to be activated on the control input\n\t   * for the error to be displayed at the right place. `required` also\n\t   * needs to be temporarily deactivated on the input since the input is\n\t   * hidden and can't show errors.\n\t   */\n\n\n\t  refreshValidityState() {\n\t    var self = this;\n\n\t    if (!self.input.checkValidity) {\n\t      return;\n\t    } // if required, make sure the input required attribute = true so checkValidity() will work\n\n\n\t    if (this.isRequired) {\n\t      self.input.required = true;\n\t    }\n\n\t    var invalid = !self.input.checkValidity();\n\t    self.isInvalid = invalid;\n\t    self.control_input.required = invalid;\n\n\t    if (this.isRequired) {\n\t      self.input.required = !invalid;\n\t    }\n\t  }\n\t  /**\n\t   * Determines whether or not more items can be added\n\t   * to the control without exceeding the user-defined maximum.\n\t   *\n\t   * @returns {boolean}\n\t   */\n\n\n\t  isFull() {\n\t    return this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\n\t  }\n\t  /**\n\t   * Refreshes the original <select> or <input>\n\t   * element to reflect the current state.\n\t   *\n\t   */\n\n\n\t  updateOriginalInput(opts = {}) {\n\t    var i,\n\t        value,\n\t        option,\n\t        self = this;\n\n\t    if (self.is_select_tag) {\n\t      // remove selected attribute from options whose values are not in self.items\n\t      self.input.querySelectorAll('option[selected]').forEach(option => {\n\t        if (self.items.indexOf(option.value) == -1) {\n\t          option.selected = false;\n\t          option.removeAttribute('selected');\n\t        }\n\t      }); // order selected <option> tags for values in self.items\n\n\t      for (i = self.items.length - 1; i >= 0; i--) {\n\t        value = self.items[i];\n\t        var option = self.options[value].$option;\n\n\t        if (!option) {\n\t          const label = self.options[value][self.settings.labelField] || '';\n\t          option = getDom('<option value=\"' + escape_html(value) + '\">' + escape_html(label) + '</option>');\n\t          self.options[value].$option = option;\n\t        }\n\n\t        option.selected = true;\n\t        setAttr(option, {\n\t          selected: 'true'\n\t        });\n\t        self.input.prepend(option);\n\t      }\n\t    } else {\n\t      self.input.value = self.getValue();\n\t    }\n\n\t    if (self.isSetup) {\n\t      if (!opts.silent) {\n\t        self.trigger('change', self.getValue());\n\t      }\n\t    }\n\t  }\n\t  /**\n\t   * Shows the autocomplete dropdown containing\n\t   * the available options.\n\t   */\n\n\n\t  open() {\n\t    var self = this;\n\t    if (self.isLocked || self.isOpen || self.settings.mode === 'multi' && self.isFull()) return;\n\t    self.isOpen = true;\n\t    setAttr(self.control_input, {\n\t      'aria-expanded': 'true'\n\t    });\n\t    self.refreshState();\n\t    applyCSS(self.dropdown, {\n\t      visibility: 'hidden',\n\t      display: 'block'\n\t    });\n\t    self.positionDropdown();\n\t    applyCSS(self.dropdown, {\n\t      visibility: 'visible',\n\t      display: 'block'\n\t    });\n\t    self.focus();\n\t    self.trigger('dropdown_open', self.dropdown);\n\t  }\n\t  /**\n\t   * Closes the autocomplete dropdown menu.\n\t   */\n\n\n\t  close(setTextboxValue = true) {\n\t    var self = this;\n\t    var trigger = self.isOpen;\n\n\t    if (setTextboxValue) {\n\t      // before blur() to prevent form onchange event\n\t      self.setTextboxValue();\n\n\t      if (self.settings.mode === 'single' && self.items.length) {\n\t        self.hideInput(); // Do not trigger blur while inside a blur event,\n\t        // this fixes some weird tabbing behavior in FF and IE.\n\t        // See #selectize.js#1164\n\n\t        if (!self.tab_key) {\n\t          self.blur(); // close keyboard on iOS\n\t        }\n\t      }\n\t    }\n\n\t    self.isOpen = false;\n\t    setAttr(self.control_input, {\n\t      'aria-expanded': 'false'\n\t    });\n\t    applyCSS(self.dropdown, {\n\t      display: 'none'\n\t    });\n\t    self.clearActiveOption();\n\t    self.refreshState();\n\t    if (trigger) self.trigger('dropdown_close', self.dropdown);\n\t  }\n\t  /**\n\t   * Calculates and applies the appropriate\n\t   * position of the dropdown if dropdownParent = 'body'.\n\t   * Otherwise, position is determined by css\n\t   */\n\n\n\t  positionDropdown() {\n\t    if (this.settings.dropdownParent !== 'body') {\n\t      return;\n\t    }\n\n\t    var context = this.control;\n\t    var rect = context.getBoundingClientRect();\n\t    var top = context.offsetHeight + rect.top + window.scrollY;\n\t    var left = rect.left + window.scrollX;\n\t    applyCSS(this.dropdown, {\n\t      width: rect.width + 'px',\n\t      top: top + 'px',\n\t      left: left + 'px'\n\t    });\n\t  }\n\t  /**\n\t   * Resets / clears all selected items\n\t   * from the control.\n\t   *\n\t   */\n\n\n\t  clear(silent) {\n\t    var self = this;\n\t    if (!self.items.length) return;\n\t    var items = self.controlChildren();\n\n\t    for (const item of items) {\n\t      item.remove();\n\t    }\n\n\t    self.items = [];\n\t    self.lastQuery = null;\n\t    self.setCaret(0);\n\t    self.setActiveItem();\n\t    self.updateOriginalInput({\n\t      silent: silent\n\t    });\n\t    self.refreshState();\n\t    self.showInput();\n\t    self.trigger('clear');\n\t  }\n\t  /**\n\t   * A helper method for inserting an element\n\t   * at the current caret position.\n\t   *\n\t   */\n\n\n\t  insertAtCaret(el) {\n\t    var self = this;\n\t    var caret = Math.min(self.caretPos, self.items.length);\n\t    var target = self.buffer || self.control;\n\n\t    if (caret === 0) {\n\t      target.insertBefore(el, target.firstChild);\n\t    } else {\n\t      target.insertBefore(el, target.children[caret]);\n\t    }\n\n\t    self.setCaret(caret + 1);\n\t  }\n\t  /**\n\t   * Removes the current selected item(s).\n\t   *\n\t   */\n\n\n\t  deleteSelection(e) {\n\t    var direction, selection, values, caret, tail;\n\t    var self = this;\n\t    direction = e && e.keyCode === KEY_BACKSPACE ? -1 : 1;\n\t    selection = getSelection(self.control_input); // determine items that will be removed\n\n\t    values = [];\n\n\t    if (self.activeItems.length) {\n\t      tail = getTail(self.activeItems, direction);\n\t      caret = nodeIndex(tail);\n\n\t      if (direction > 0) {\n\t        caret++;\n\t      }\n\n\t      for (const item of self.activeItems) {\n\t        values.push(item.dataset.value);\n\t      }\n\t    } else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\n\t      if (direction < 0 && selection.start === 0 && selection.length === 0) {\n\t        values.push(self.items[self.caretPos - 1]);\n\t      } else if (direction > 0 && selection.start === self.inputValue().length) {\n\t        values.push(self.items[self.caretPos]);\n\t      }\n\t    } // allow the callback to abort\n\n\n\t    if (!values.length || typeof self.settings.onDelete === 'function' && self.settings.onDelete.call(self, values, e) === false) {\n\t      return false;\n\t    }\n\n\t    preventDefault(e, true); // perform removal\n\n\t    if (typeof caret !== 'undefined') {\n\t      self.setCaret(caret);\n\t    }\n\n\t    while (values.length) {\n\t      self.removeItem(values.pop());\n\t    }\n\n\t    self.showInput();\n\t    self.positionDropdown();\n\t    self.refreshOptions(false);\n\t    return true;\n\t  }\n\t  /**\n\t   * Selects the previous / next item (depending on the `direction` argument).\n\t   *\n\t   * > 0 - right\n\t   * < 0 - left\n\t   *\n\t   */\n\n\n\t  advanceSelection(direction, e) {\n\t    var idx,\n\t        last_active,\n\t        adjacent,\n\t        self = this;\n\t    if (self.rtl) direction *= -1;\n\t    if (self.inputValue().length) return; // add or remove to active items\n\n\t    if (isKeyDown(KEY_SHORTCUT, e) || isKeyDown('shiftKey', e)) {\n\t      last_active = self.getLastActive(direction);\n\n\t      if (last_active) {\n\t        if (!last_active.classList.contains('active')) {\n\t          adjacent = last_active;\n\t        } else {\n\t          adjacent = self.getAdjacent(last_active, direction, 'item');\n\t        } // if no active item, get items adjacent to the control input\n\n\t      } else if (direction > 0) {\n\t        adjacent = self.control_input.nextElementSibling;\n\t      } else {\n\t        adjacent = self.control_input.previousElementSibling;\n\t      }\n\n\t      if (adjacent) {\n\t        if (adjacent.classList.contains('active')) {\n\t          self.removeActiveItem(last_active);\n\t        }\n\n\t        self.setActiveItemClass(adjacent); // mark as last_active !! after removeActiveItem() on last_active\n\t      } // move caret to the left or right\n\n\t    } else if (self.isFocused && !self.activeItems.length) {\n\t      self.setCaret(self.caretPos + direction); // move caret before or after selected items\n\t    } else {\n\t      last_active = self.getLastActive(direction);\n\n\t      if (last_active) {\n\t        idx = nodeIndex(last_active);\n\t        self.setCaret(direction > 0 ? idx + 1 : idx);\n\t        self.setActiveItem();\n\t      }\n\t    }\n\t  }\n\t  /**\n\t   * Get the last active item\n\t   *\n\t   */\n\n\n\t  getLastActive(direction) {\n\t    let last_active = this.control.querySelector('.last-active');\n\n\t    if (last_active) {\n\t      return last_active;\n\t    }\n\n\t    var result = this.control.querySelectorAll('.active');\n\n\t    if (result) {\n\t      return getTail(result, direction);\n\t    }\n\t  }\n\t  /**\n\t   * Moves the caret to the specified index.\n\t   *\n\t   * The input must be moved by leaving it in place and moving the\n\t   * siblings, due to the fact that focus cannot be restored once lost\n\t   * on mobile webkit devices\n\t   *\n\t   */\n\n\n\t  setCaret(new_pos) {\n\t    var self = this;\n\n\t    if (self.settings.mode === 'single' || self.settings.controlInput) {\n\t      new_pos = self.items.length;\n\t    } else {\n\t      new_pos = Math.max(0, Math.min(self.items.length, new_pos));\n\n\t      if (new_pos != self.caretPos && !self.isPending) {\n\t        self.controlChildren().forEach((child, j) => {\n\t          if (j < new_pos) {\n\t            self.control_input.insertAdjacentElement('beforebegin', child);\n\t          } else {\n\t            self.control.appendChild(child);\n\t          }\n\t        });\n\t      }\n\t    }\n\n\t    self.caretPos = new_pos;\n\t  }\n\t  /**\n\t   * Return list of item dom elements\n\t   *\n\t   */\n\n\n\t  controlChildren() {\n\t    return Array.from(this.control.getElementsByClassName(this.settings.itemClass));\n\t  }\n\t  /**\n\t   * Disables user input on the control. Used while\n\t   * items are being asynchronously created.\n\t   */\n\n\n\t  lock() {\n\t    this.close();\n\t    this.isLocked = true;\n\t    this.refreshState();\n\t  }\n\t  /**\n\t   * Re-enables user input on the control.\n\t   */\n\n\n\t  unlock() {\n\t    this.isLocked = false;\n\t    this.refreshState();\n\t  }\n\t  /**\n\t   * Disables user input on the control completely.\n\t   * While disabled, it cannot receive focus.\n\t   */\n\n\n\t  disable() {\n\t    var self = this;\n\t    self.input.disabled = true;\n\t    self.control_input.disabled = true;\n\t    self.control_input.tabIndex = -1;\n\t    self.isDisabled = true;\n\t    self.lock();\n\t  }\n\t  /**\n\t   * Enables the control so that it can respond\n\t   * to focus and user input.\n\t   */\n\n\n\t  enable() {\n\t    var self = this;\n\t    self.input.disabled = false;\n\t    self.control_input.disabled = false;\n\t    self.control_input.tabIndex = self.tabIndex;\n\t    self.isDisabled = false;\n\t    self.unlock();\n\t  }\n\t  /**\n\t   * Completely destroys the control and\n\t   * unbinds all event listeners so that it can\n\t   * be garbage collected.\n\t   */\n\n\n\t  destroy() {\n\t    var self = this;\n\t    var revertSettings = self.revertSettings;\n\t    self.trigger('destroy');\n\t    self.off();\n\t    self.wrapper.remove();\n\t    self.dropdown.remove();\n\t    self.input.innerHTML = revertSettings.innerHTML;\n\t    self.input.tabIndex = revertSettings.tabIndex;\n\t    removeClasses(self.input, 'tomselected');\n\t    self.input.removeAttribute('hidden');\n\t    self.input.required = this.isRequired;\n\n\t    self._destroy();\n\n\t    delete self.input.tomselect;\n\t  }\n\t  /**\n\t   * A helper method for rendering \"item\" and\n\t   * \"option\" templates, given the data.\n\t   *\n\t   */\n\n\n\t  render(templateName, data) {\n\t    var value, id, html;\n\t    var self = this;\n\n\t    if (templateName === 'option' || templateName === 'item') {\n\t      value = hash_key(data[self.settings.valueField]); // pull markup from cache if it exists\n\n\t      if (self.renderCache[templateName].hasOwnProperty(value)) {\n\t        return self.renderCache[templateName][value];\n\t      }\n\t    }\n\n\t    var template = self.settings.render[templateName];\n\n\t    if (typeof template !== 'function') {\n\t      return null;\n\t    } // render markup\n\n\n\t    html = template.call(this, data, escape_html);\n\n\t    if (!html) {\n\t      return html;\n\t    }\n\n\t    html = getDom(html); // add mandatory attributes\n\n\t    if (templateName === 'option' || templateName === 'option_create') {\n\t      if (data[self.settings.disabledField]) {\n\t        setAttr(html, {\n\t          'aria-disabled': 'true'\n\t        });\n\t      } else {\n\t        setAttr(html, {\n\t          'data-selectable': ''\n\t        });\n\t      }\n\t    } else if (templateName === 'optgroup') {\n\t      id = data.group[self.settings.optgroupValueField];\n\t      setAttr(html, {\n\t        'data-group': id\n\t      });\n\n\t      if (data.group[self.settings.disabledField]) {\n\t        setAttr(html, {\n\t          'data-disabled': ''\n\t        });\n\t      }\n\t    }\n\n\t    if (templateName === 'option' || templateName === 'item') {\n\t      setAttr(html, {\n\t        'data-value': value\n\t      }); // make sure we have some classes if a template is overwritten\n\n\t      if (templateName === 'item') {\n\t        addClasses(html, self.settings.itemClass);\n\t      } else {\n\t        addClasses(html, self.settings.optionClass);\n\t        setAttr(html, {\n\t          role: 'option',\n\t          id: data.$id\n\t        });\n\t      } // update cache\n\n\n\t      self.renderCache[templateName][value] = html;\n\t    }\n\n\t    return html;\n\t  }\n\t  /**\n\t   * Clears the render cache for a template. If\n\t   * no template is given, clears all render\n\t   * caches.\n\t   *\n\t   */\n\n\n\t  clearCache(templateName) {\n\t    var self = this;\n\n\t    if (templateName === void 0) {\n\t      self.renderCache = {\n\t        'item': {},\n\t        'option': {}\n\t      };\n\t    } else {\n\t      self.renderCache[templateName] = {};\n\t    }\n\t  }\n\t  /**\n\t   * Determines whether or not to display the\n\t   * create item prompt, given a user input.\n\t   *\n\t   */\n\n\n\t  canCreate(input) {\n\t    return this.settings.create && input.length && this.settings.createFilter.call(this, input);\n\t  }\n\t  /**\n\t   * Wraps this.`method` so that `new_fn` can be invoked 'before', 'after', or 'instead' of the original method\n\t   *\n\t   * this.hook('instead','onKeyDown',function( arg1, arg2 ...){\n\t   *\n\t   * });\n\t   */\n\n\n\t  hook(when, method, new_fn) {\n\t    var self = this;\n\t    var orig_method = self[method];\n\n\t    self[method] = function () {\n\t      var result, result_new;\n\n\t      if (when === 'after') {\n\t        result = orig_method.apply(self, arguments);\n\t      }\n\n\t      result_new = new_fn.apply(self, arguments);\n\n\t      if (when === 'instead') {\n\t        return result_new;\n\t      }\n\n\t      if (when === 'before') {\n\t        result = orig_method.apply(self, arguments);\n\t      }\n\n\t      return result;\n\t    };\n\t  }\n\n\t}\n\n\t/**\n\t * Plugin: \"change_listener\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('change_listener', function (options) {\n\t  var self = this;\n\t  var changed = false;\n\t  addEvent(self.input, 'change', () => {\n\t    // prevent infinite loops\n\t    if (changed) {\n\t      changed = false;\n\t      return;\n\t    }\n\n\t    changed = true;\n\t    var settings = getSettings(self.input, {});\n\t    self.setupOptions(settings.options, settings.optgroups);\n\t    self.setValue(settings.items);\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"restore_on_backspace\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('checkbox_options', function (options) {\n\t  var self = this;\n\t  var orig_onOptionSelect = self.onOptionSelect;\n\t  self.settings.hideSelected = false; // update the checkbox for an option\n\n\t  var UpdateCheckbox = function UpdateCheckbox(option) {\n\t    setTimeout(() => {\n\t      var checkbox = option.querySelector('input');\n\n\t      if (option.classList.contains('selected')) {\n\t        checkbox.checked = true;\n\t      } else {\n\t        checkbox.checked = false;\n\t      }\n\t    }, 1);\n\t  }; // add checkbox to option template\n\n\n\t  self.hook('after', 'setupTemplates', () => {\n\t    var orig_render_option = self.settings.render.option;\n\n\t    self.settings.render.option = function (data) {\n\t      var rendered = getDom(orig_render_option.apply(self, arguments));\n\t      var checkbox = document.createElement('input');\n\t      checkbox.addEventListener('click', function (evt) {\n\t        preventDefault(evt);\n\t      });\n\t      checkbox.type = 'checkbox';\n\t      var value = hash_key(data[self.settings.valueField]);\n\n\t      if (self.items.indexOf(value) > -1) {\n\t        checkbox.checked = true;\n\t      }\n\n\t      rendered.prepend(checkbox);\n\t      return rendered;\n\t    };\n\t  }); // uncheck when item removed\n\n\t  self.on('item_remove', value => {\n\t    var option = self.getOption(value);\n\n\t    if (option) {\n\t      // if dropdown hasn't been opened yet, the option won't exist\n\t      option.classList.remove('selected'); // selected class won't be removed yet\n\n\t      UpdateCheckbox(option);\n\t    }\n\t  }); // remove items when selected option is clicked\n\n\t  self.hook('instead', 'onOptionSelect', function (evt, option) {\n\t    if (option.classList.contains('selected')) {\n\t      option.classList.remove('selected');\n\t      self.removeItem(option.dataset.value);\n\t      self.refreshOptions();\n\t      preventDefault(evt, true);\n\t      return;\n\t    }\n\n\t    orig_onOptionSelect.apply(self, arguments);\n\t    UpdateCheckbox(option);\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"dropdown_header\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('clear_button', function (options) {\n\t  var self = this;\n\t  options = Object.assign({\n\t    className: 'clear-button',\n\t    title: 'Clear All',\n\t    html: data => {\n\t      return `<div class=\"${data.className}\" title=\"${data.title}\">&times;</div>`;\n\t    }\n\t  }, options);\n\t  self.hook('after', 'setup', () => {\n\t    var button = getDom(options.html(options));\n\t    button.addEventListener('click', evt => {\n\t      while (self.items.length > 0) {\n\t        self.removeItem(self.items[0], true);\n\t      }\n\n\t      self.updateOriginalInput();\n\t      evt.preventDefault();\n\t      evt.stopPropagation();\n\t    });\n\t    self.control.appendChild(button);\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"drag_drop\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('drag_drop', function (options) {\n\t  var self = this;\n\t  if (!$.fn.sortable) throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\n\t  if (self.settings.mode !== 'multi') return;\n\t  var orig_lock = self.lock;\n\t  var orig_unlock = self.unlock;\n\t  self.hook('instead', 'lock', function () {\n\t    var sortable = self.control.dataset.sortable;\n\t    if (sortable) sortable.disable();\n\t    return orig_lock.apply(self, arguments);\n\t  });\n\t  self.hook('instead', 'unlock', function () {\n\t    var sortable = self.control.dataset.sortable;\n\t    if (sortable) sortable.enable();\n\t    return orig_unlock.apply(self, arguments);\n\t  });\n\t  self.hook('after', 'setup', () => {\n\t    var $control = $(self.control).sortable({\n\t      items: '[data-value]',\n\t      forcePlaceholderSize: true,\n\t      disabled: self.isLocked,\n\t      start: (e, ui) => {\n\t        ui.placeholder.css('width', ui.helper.css('width'));\n\t        $control.css({\n\t          overflow: 'visible'\n\t        });\n\t      },\n\t      stop: () => {\n\t        $control.css({\n\t          overflow: 'hidden'\n\t        });\n\t        var values = [];\n\t        $control.children('[data-value]').each(function () {\n\t          values.push($(this).attr('data-value'));\n\t        });\n\t        self.setValue(values);\n\t      }\n\t    });\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"dropdown_header\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('dropdown_header', function (options) {\n\t  var self = this;\n\t  options = Object.assign({\n\t    title: 'Untitled',\n\t    headerClass: 'dropdown-header',\n\t    titleRowClass: 'dropdown-header-title',\n\t    labelClass: 'dropdown-header-label',\n\t    closeClass: 'dropdown-header-close',\n\t    html: data => {\n\t      return '<div class=\"' + data.headerClass + '\">' + '<div class=\"' + data.titleRowClass + '\">' + '<span class=\"' + data.labelClass + '\">' + data.title + '</span>' + '<a class=\"' + data.closeClass + '\">&times;</a>' + '</div>' + '</div>';\n\t    }\n\t  }, options);\n\t  self.hook('after', 'setup', () => {\n\t    var header = getDom(options.html(options));\n\t    var close_link = header.querySelector('.' + options.closeClass);\n\n\t    if (close_link) {\n\t      close_link.addEventListener('click', evt => {\n\t        preventDefault(evt, true);\n\t        self.close();\n\t      });\n\t    }\n\n\t    self.dropdown.insertBefore(header, self.dropdown.firstChild);\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"dropdown_input\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('dropdown_input', function () {\n\t  var self = this;\n\t  var input = self.settings.controlInput || '<input type=\"text\" autocomplete=\"off\" class=\"dropdown-input\" />';\n\t  input = getDom(input);\n\n\t  if (self.settings.placeholder) {\n\t    setAttr(input, {\n\t      placeholder: self.settings.placeholder\n\t    });\n\t  }\n\n\t  self.settings.controlInput = input;\n\t  self.settings.shouldOpen = true; // make sure the input is shown even if there are no options to display in the dropdown\n\n\t  self.hook('after', 'setup', () => {\n\t    // set tabIndex on wrapper\n\t    setAttr(self.wrapper, {\n\t      tabindex: self.input.disabled ? '-1' : self.tabIndex\n\t    }); // keyboard navigation\n\n\t    addEvent(self.wrapper, 'keypress', evt => {\n\t      if (self.control.contains(evt.target)) {\n\t        return;\n\t      }\n\n\t      if (self.dropdown.contains(evt.target)) {\n\t        return;\n\t      } // open dropdown on enter when wrapper is tab-focused\n\n\n\t      switch (evt.keyCode) {\n\t        case KEY_RETURN:\n\t          self.onClick(evt);\n\t          return;\n\t      }\n\t    });\n\t    let div = getDom('<div class=\"dropdown-input-wrap\">');\n\t    div.appendChild(input);\n\t    self.dropdown.insertBefore(div, self.dropdown.firstChild);\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"input_autogrow\" (Tom Select)\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('input_autogrow', function () {\n\t  var self = this;\n\t  self.hook('after', 'setup', () => {\n\t    var test_input = document.createElement('span');\n\t    var control = self.control_input;\n\t    test_input.style.cssText = 'position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ';\n\t    self.wrapper.appendChild(test_input);\n\t    var transfer_styles = ['letterSpacing', 'fontSize', 'fontFamily', 'fontWeight', 'textTransform'];\n\n\t    for (const style_name of transfer_styles) {\n\t      test_input.style[style_name] = control.style[style_name];\n\t    }\n\t    /**\n\t     * Set the control width\n\t     *\n\t     */\n\n\n\t    var resize = () => {\n\t      if (self.items.length > 0) {\n\t        test_input.textContent = control.value;\n\t        control.style.width = test_input.clientWidth + 'px';\n\t      } else {\n\t        control.style.width = '';\n\t      }\n\t    };\n\n\t    resize();\n\t    self.on('update item_add item_remove', resize);\n\t    addEvent(control, 'input', resize);\n\t    addEvent(control, 'keyup', resize);\n\t    addEvent(control, 'blur', resize);\n\t    addEvent(control, 'update', resize);\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"input_autogrow\" (Tom Select)\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('no_backspace_delete', function () {\n\t  var self = this;\n\t  var orig_deleteSelection = self.deleteSelection;\n\t  this.hook('instead', 'deleteSelection', function () {\n\t    if (self.activeItems.length) {\n\t      return orig_deleteSelection.apply(self, arguments);\n\t    }\n\n\t    return false;\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"input_autogrow\" (Tom Select)\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('no_active_items', function (options) {\n\t  this.hook('instead', 'setActiveItem', () => {});\n\t  this.hook('instead', 'selectAll', () => {});\n\t});\n\n\t/**\n\t * Plugin: \"optgroup_columns\" (Tom Select.js)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('optgroup_columns', function () {\n\t  var self = this;\n\t  var orig_keydown = self.onKeyDown;\n\t  self.hook('instead', 'onKeyDown', function (evt) {\n\t    var index, option, options, optgroup;\n\n\t    if (!self.isOpen || !(evt.keyCode === KEY_LEFT || evt.keyCode === KEY_RIGHT)) {\n\t      return orig_keydown.apply(self, arguments);\n\t    }\n\n\t    optgroup = parentMatch(self.activeOption, '[data-group]');\n\t    index = nodeIndex(self.activeOption, '[data-selectable]');\n\n\t    if (evt.keyCode === KEY_LEFT) {\n\t      optgroup = optgroup.previousSibling;\n\t    } else {\n\t      optgroup = optgroup.nextSibling;\n\t    }\n\n\t    if (!optgroup) {\n\t      return;\n\t    }\n\n\t    options = optgroup.querySelectorAll('[data-selectable]');\n\t    option = options[Math.min(options.length - 1, index)];\n\n\t    if (option) {\n\t      self.setActiveOption(option);\n\t    }\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"remove_button\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('remove_button', function (options) {\n\t  options = Object.assign({\n\t    label: '&times;',\n\t    title: 'Remove',\n\t    className: 'remove',\n\t    append: true\n\t  }, options); //options.className = 'remove-single';\n\n\t  var self = this; // override the render method to add remove button to each item\n\n\t  if (!options.append) {\n\t    return;\n\t  }\n\n\t  var html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\t  self.hook('after', 'setupTemplates', () => {\n\t    var orig_render_item = self.settings.render.item;\n\n\t    self.settings.render.item = function () {\n\t      var rendered = getDom(orig_render_item.apply(self, arguments));\n\t      var close_button = getDom(html);\n\t      rendered.appendChild(close_button);\n\t      addEvent(close_button, 'mousedown', evt => {\n\t        preventDefault(evt, true);\n\t      });\n\t      addEvent(close_button, 'click', evt => {\n\t        // propagating will trigger the dropdown to show for single mode\n\t        preventDefault(evt, true);\n\t        if (self.isLocked) return;\n\t        var value = rendered.dataset.value;\n\t        self.removeItem(value);\n\t        self.refreshOptions(false);\n\t      });\n\t      return rendered;\n\t    };\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"restore_on_backspace\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('restore_on_backspace', function (options) {\n\t  var self = this;\n\n\t  options.text = options.text || function (option) {\n\t    return option[self.settings.labelField];\n\t  };\n\n\t  self.on('item_remove', function (value) {\n\t    if (self.control_input.value.trim() === '') {\n\t      var option = self.options[value];\n\n\t      if (option) {\n\t        self.setTextboxValue(options.text.call(self, option));\n\t      }\n\t    }\n\t  });\n\t});\n\n\t/**\n\t * Plugin: \"restore_on_backspace\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\tTomSelect.define('virtual_scroll', function (options) {\n\t  const self = this;\n\t  const orig_canLoad = self.canLoad;\n\t  const orig_clearActiveOption = self.clearActiveOption;\n\t  const orig_loadCallback = self.loadCallback;\n\t  var pagination = {};\n\t  var dropdown_content;\n\t  var loading_more = false;\n\n\t  if (!self.settings.firstUrl) {\n\t    throw 'virtual_scroll plugin requires a firstUrl() method';\n\t  } // in order for virtual scrolling to work,\n\t  // options need to be ordered the same way they're returned from the remote data source\n\n\n\t  self.settings.sortField = [{\n\t    field: '$order'\n\t  }, {\n\t    field: '$score'\n\t  }]; // can we load more results for given query?\n\n\t  function canLoadMore(query) {\n\t    if (typeof self.settings.maxOptions === 'number' && dropdown_content.children.length >= self.settings.maxOptions) {\n\t      return;\n\t    }\n\n\t    if (query in pagination && pagination[query]) {\n\t      return true;\n\t    }\n\n\t    return false;\n\t  } // set the next url that will be\n\n\n\t  self.setNextUrl = function (value, next_url) {\n\t    pagination[value] = next_url;\n\t  }; // getUrl() to be used in settings.load()\n\n\n\t  self.getUrl = function (query) {\n\t    if (query in pagination) {\n\t      const next_url = pagination[query];\n\t      pagination[query] = false;\n\t      return next_url;\n\t    } // if the user goes back to a previous query\n\t    // we need to load the first page again\n\n\n\t    pagination = {};\n\t    return self.settings.firstUrl(query);\n\t  }; // don't clear the active option (and cause unwanted dropdown scroll)\n\t  // while loading more results\n\n\n\t  self.hook('instead', 'clearActiveOption', () => {\n\t    if (loading_more) {\n\t      return;\n\t    }\n\n\t    return orig_clearActiveOption.call(self);\n\t  }); // override the canLoad method\n\n\t  self.hook('instead', 'canLoad', query => {\n\t    // first time the query has been seen\n\t    if (!(query in pagination)) {\n\t      return orig_canLoad.call(this, query);\n\t    }\n\n\t    return canLoadMore(query);\n\t  }); // wrap the load\n\n\t  self.hook('instead', 'loadCallback', (value, options, optgroups) => {\n\t    if (!loading_more) {\n\t      self.clearOptions();\n\t    }\n\n\t    orig_loadCallback.call(self, value, options, optgroups);\n\t    loading_more = false;\n\t  }); // add templates to dropdown\n\t  //\tloading_more if we have another url in the queue\n\t  //\tno_more_results if we don't have another url in the queue\n\n\t  self.hook('after', 'refreshOptions', () => {\n\t    const query = self.lastValue;\n\t    var option;\n\n\t    if (canLoadMore(query)) {\n\t      option = self.render('loading_more', {\n\t        query: query\n\t      });\n\t      if (option) option.setAttribute('data-selectable', ''); // so that navigating dropdown with [down] keypresses can navigate to this node\n\t    } else if (query in pagination && !dropdown_content.querySelector('.no-results')) {\n\t      option = self.render('no_more_results', {\n\t        query: query\n\t      });\n\t    }\n\n\t    if (option) {\n\t      addClasses(option, self.settings.optionClass);\n\t      dropdown_content.append(option);\n\t    }\n\t  }); // add scroll listener and default templates\n\n\t  self.hook('after', 'setup', () => {\n\t    dropdown_content = self.dropdown_content; // default templates\n\n\t    self.settings.render = Object.assign({}, {\n\t      loading_more: function (data, escape) {\n\t        return `<div class=\"loading-more-results\">Loading more results ... </div>`;\n\t      },\n\t      no_more_results: function (data, escape) {\n\t        return `<div class=\"no-more-results\">No more results</div>`;\n\t      }\n\t    }, self.settings.render); // watch dropdown content scroll position\n\n\t    dropdown_content.addEventListener('scroll', function () {\n\t      const scroll_percent = dropdown_content.clientHeight / (dropdown_content.scrollHeight - dropdown_content.scrollTop);\n\n\t      if (scroll_percent < 0.95) {\n\t        return;\n\t      } // !important: this will get checked again in load() but we still need to check here otherwise loading_more will be set to true\n\n\n\t      if (!canLoadMore(self.lastValue)) {\n\t        return;\n\t      } // don't call load() too much\n\n\n\t      if (loading_more) return;\n\t      loading_more = true;\n\t      self.load.call(self, self.lastValue);\n\t    });\n\t  });\n\t});\n\n\treturn TomSelect;\n\n})));\nvar tomSelect=function(el,opts){return new TomSelect(el,opts);} \n//# sourceMappingURL=tom-select.complete.js.map\n","module.exports = __WEBPACK_EXTERNAL_MODULE__254__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","export default __webpack_public_path__ + \"envision-icons.svg\";","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nconst Util = (() => {\n   const Util = {\n      getSelectorFromElement(element) {\n         let selector = element.getAttribute('data-target');\n         if (!selector || selector === '#') {\n            selector = element.getAttribute('href') || '';\n         }\n         try {\n            return document.querySelectorAll(selector).length > 0\n               ? selector\n               : null;\n         } catch (error) {\n            return null;\n         }\n      },\n\n      isPlainObject(obj) {\n         if (typeof obj == 'object' && obj !== null) {\n            const proto = Object.getPrototypeOf(obj);\n            return proto === Object.prototype || proto === null;\n         }\n         return false;\n      },\n\n      normalizeOptions(options, defaults) {\n         // Delete all options not available in defaults,\n         // always return an object.\n         options = this.isPlainObject(options) ? options : {};\n\n         if (!this.isPlainObject(defaults)) {\n            console.error('defaults is not an object');\n            return options;\n         }\n\n         for (let key in options) {\n            if (!Object.prototype.hasOwnProperty.call(defaults, key)) {\n               delete options[key];\n            }\n         }\n         return options;\n      },\n   };\n\n   return Util;\n})();\n\nexport default Util;\n","export const getNodes = function (elements) {\n   const nodes = [];\n   if (typeof elements === 'string') {\n      let domNodes = document.querySelectorAll(elements);\n      if (domNodes && domNodes.length > 0) {\n         // NodeList\n         for (let i = 0; i < domNodes.length; i++) {\n            nodes.push(domNodes[i]);\n         }\n      }\n   } else if (typeof elements === 'object') {\n      if (elements.nodeType === 1) {\n         // Single element\n         nodes.push(elements);\n      } else if (elements.length > 0) {\n         // NodeList\n         for (let i = 0; i < elements.length; i++) {\n            nodes.push(elements[i]);\n         }\n      }\n   }\n   return nodes;\n};\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport TomSelect from 'tom-select';\nimport Util from './util/util';\nimport { getNodes } from './util/nodes';\n\nconst lang = {\n   sv: {\n      add: 'Lgg till',\n      remove_button: 'Ta bort val',\n      clear_button: 'Ta bort alla val',\n      no_results: 'Inga alternativ matchar',\n   },\n   en: {\n      add: 'Add',\n      remove_button: 'Remove',\n      clear_button: 'Clear all',\n      no_results: 'No results found',\n   },\n};\n\nconst defaults = {\n   staticConfig: {\n      wrapperClass: 'env-select',\n      inputClass: 'env-select__input',\n      dropdownClass: 'env-select__dropdown',\n      dropdownContentClass: 'env-select__dropdown__content',\n      itemClass: 'env-select__item',\n      optionClass: 'env-select__dropdown__option',\n      sortField: {\n         field: 'text',\n         direction: 'asc',\n      },\n      plugins: {\n         remove_button: {\n            title: `${lang.sv.remove_button}`,\n            className: 'env-select__item__remove',\n         },\n         clear_button: {\n            title: `${lang.sv.clear_button}`,\n            className: 'env-select__input__clear',\n         },\n      },\n      render: {\n         option_create: function (data, escape) {\n            return `<div class=\"create\">${\n               this.settings.i18n.add\n            } <strong>${escape(data.input)}</strong>&hellip;</div>`;\n         },\n         no_results: function () {\n            return `<div class=\"no-results\">${this.settings.i18n.no_results}</div>`;\n         },\n         loading: function () {\n            return (\n               '<div class=\"env-select__spinner env-spinner-bounce\">' +\n               '<div class=\"env-bounce1\"></div><div class=\"env-bounce2\"></div>' +\n               '<div class=\"env-bounce3\"></div></div>'\n            );\n         },\n      },\n   },\n   userConfig: {\n      valueField: 'value',\n      labelField: 'text',\n      searchField: ['text'],\n      maxItems: null,\n      options: null,\n      items: null,\n      create: false,\n      clearButton: true,\n      placeholder: null,\n      createFilter: function (input) {\n         input = input.toLowerCase();\n         return !(input in this.options);\n      },\n      preload: false,\n\n      load: null, // function() { ... }\n      onInitialize: null, // function() { ... }\n      onChange: null, // function(value) { ... }\n      onItemAdd: null, // function(value, $item) { ... }\n      onItemRemove: null, // function(value) { ... }\n      onClear: null, // function() { ... }\n      onOptionAdd: null, // function(value, data) { ... }\n      onOptionRemove: null, // function(value) { ... }\n      onOptionClear: null, // function() { ... }\n      onDropdownOpen: null, // function(dropdown) { ... }\n      onDropdownClose: null, // function(dropdown) { ... }\n      onType: null, // function(str) { ... }\n      onFocus: null, // function(str) { ... }\n      onBlur: null, // function(str) { ... },\n      onLoad: null, // function(options, optgroup) { ... },\n      i18n: 'sv',\n   },\n};\n\nconst SelectPlugin = function (el, settings) {\n   this.el = el;\n   this.settings = settings;\n\n   // Initialize\n   this.el.classList.remove('env-form-input');\n   let select = new TomSelect(this.el, this.settings);\n\n   // API\n   this.addOptions = select.addOption.bind(select);\n   this.load = select.load.bind(select);\n   this.getOption = select.getOption.bind(select);\n   this.updateOption = select.updateOption.bind(select);\n   this.removeOption = select.removeOption.bind(select);\n   this.getItem = select.getItem.bind(select);\n   this.addItem = select.addItem.bind(select);\n   this.refreshOptions = select.refreshOptions.bind(select);\n   this.getValue = select.getValue.bind(select);\n   this.setValue = select.setValue.bind(select);\n   this.destroy = function () {\n      select.destroy();\n      for (let key in this) {\n         if (Object.prototype.hasOwnProperty.call(this, key)) {\n            delete this[key];\n         }\n      }\n      select = null;\n   };\n\n   return this;\n};\n\nconst getSettings = (settings) => {\n   // Remove unwanted settings\n   settings = Util.normalizeOptions(settings, defaults.userConfig);\n\n   // Merge user settings with envision and user defaults\n   settings = Object.assign(\n      {},\n      defaults.staticConfig,\n      defaults.userConfig,\n      settings\n   );\n\n   if (!settings.clearButton) {\n      // Custom option clearButton will activate\n      // clear_button plugin. If set to false, remove\n      // plugin from settings\n      delete settings.plugins.clear_button;\n   }\n\n   // Must remove from settings to use HTML markup\n\n   if (!settings.items) {\n      delete settings.items;\n   }\n   if (!settings.placeholder) {\n      delete settings.placeholder;\n   }\n   if (!settings.options) {\n      delete settings.options;\n   }\n\n   // Handle language option\n   // May be set to string 'sv', 'en' - use lang variable\n   // or set to object with custom text.\n   if (\n      typeof settings.i18n === 'string' &&\n      Object.prototype.hasOwnProperty.call(lang, settings.i18n)\n   ) {\n      settings.i18n = Object.assign({}, lang[settings.i18n]);\n   } else if (Util.isPlainObject(settings.i18n)) {\n      settings.i18n = Object.assign({}, lang['sv'], settings.i18n);\n   } else {\n      settings.i18n = Object.assign({}, lang['sv']);\n   }\n\n   // Translate plugin texts\n   for (let name in settings.plugins) {\n      if (settings.plugins[name].title && settings.i18n[name]) {\n         settings.plugins[name].title = settings.i18n[name];\n      }\n   }\n\n   return settings;\n};\n\n// Plugin / extension for envision library\nexport default (elements, settings) => {\n   const nodes = getNodes(elements);\n   settings = getSettings(settings);\n\n   if (nodes.length > 0) {\n      const selects = nodes\n         .filter((node) => !node.classList.contains('tomselected'))\n         .map((node) => new SelectPlugin(node, settings));\n      return selects;\n   }\n};\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nconst CssUtil = (() => {\n   const CssUtil = {\n      reflow(element) {\n         return element.offsetHeight;\n      },\n\n      isTouch() {\n         return window.matchMedia('(pointer: coarse)').matches;\n      },\n\n      getToggleSpeed(el, durationCustomProperty) {\n         let speed = 300,\n            duration;\n         if (el) {\n            duration = getComputedStyle(el).getPropertyValue(\n               durationCustomProperty\n            );\n         } else {\n            duration = getComputedStyle(\n               document.documentElement\n            ).getPropertyValue(durationCustomProperty);\n         }\n         if (duration && parseFloat(duration) > 0) {\n            if (duration.includes('ms')) {\n               speed = parseInt(duration, 10);\n            } else if (duration.includes('s')) {\n               speed = parseFloat(duration) * 1000;\n            }\n         }\n         return speed;\n      },\n   };\n\n   return CssUtil;\n})();\n\nexport default CssUtil;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\nimport $ from 'jquery';\nimport CssUtil from './util/css-util';\n\nconst ARIA_EXPANDED = 'aria-expanded';\nconst DURATION_CUSTOM_PROP = '--env-collapse-toggle-duration';\nconst MODIFIER_BASE = 'env-accordion--';\nconst NAME = 'envAccordion';\nconst SHOW = MODIFIER_BASE + 'show';\nconst PARENT = 'data-parent';\n\nclass Accordion {\n   constructor(element) {\n      this.el = element;\n      this.$el = $(element);\n      if (this.$el.hasClass(SHOW)) {\n         this.$el.removeClass(SHOW).show();\n      }\n      this.speed = CssUtil.getToggleSpeed(this.$el[0], DURATION_CUSTOM_PROP);\n   }\n\n   toggle() {\n      if (this.$el.attr(ARIA_EXPANDED) === 'true') {\n         this.hide();\n      } else {\n         this.show();\n      }\n   }\n\n   show() {\n      $(this.$el.attr(PARENT))\n         .find(`[${ARIA_EXPANDED}=\"true\"]`)\n         .each(\n            ((i, el) => {\n               this._hide($(el), this.speed);\n            }).bind(this)\n         );\n      this.$el.attr(ARIA_EXPANDED, true).stop().slideDown(this.speed);\n   }\n\n   hide() {\n      this._hide(this.$el, this.speed);\n   }\n\n   _hide($el, speed) {\n      $el.attr(ARIA_EXPANDED, false)\n         .stop()\n         .slideUp(speed, () => {\n            $el.removeClass(SHOW);\n         });\n   }\n\n   static _jQuery(config) {\n      return this.each(function () {\n         const data = new Accordion(this);\n\n         if (typeof config === 'string') {\n            if (data[config] === undefined) {\n               throw new Error(`No method named \"${config}\"`);\n            }\n            data[config]();\n            return;\n         }\n\n         data.toggle();\n      });\n   }\n}\n\nif (typeof document !== 'undefined') {\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = Accordion._jQuery;\n   $.fn[NAME].Constructor = Accordion;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Accordion._jQuery;\n   };\n\n   $(document).on('click', '[data-env-accordion]', function (e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const target = $this.attr('href') || $this.attr('data-target');\n      const $target = $(target);\n\n      $target[NAME]();\n   });\n}\n\nexport default Accordion;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\nimport CssUtil from './util/css-util';\n\nconst ARIA_EXPANDED = 'aria-expanded';\nconst MODIFIER_BASE = 'env-collapse--';\nconst DURATION_CUSTOM_PROP = '--env-collapse-toggle-duration';\nconst NAME = 'envCollapse';\nconst EXPANDED = MODIFIER_BASE + 'expanded';\nconst SHOW = MODIFIER_BASE + 'show';\n\nclass Collapse {\n   constructor(element) {\n      this.el = element;\n      this.$el = $(element);\n      this.$trigger = $(\n         `[data-env-collapse][href=\"#${element.id}\"], [data-env-collapse][data-target=\"#${element.id}\"]`\n      );\n      this.speed = CssUtil.getToggleSpeed(\n         this.$trigger[0],\n         DURATION_CUSTOM_PROP\n      );\n   }\n\n   toggle() {\n      if (this.$el.is(':animated')) {\n         return;\n      } else if (this.$el.hasClass(SHOW)) {\n         this.hide();\n      } else {\n         this.show();\n      }\n   }\n\n   show() {\n      if (this.$trigger.length) {\n         this.$trigger.addClass(EXPANDED).attr(ARIA_EXPANDED, true);\n      }\n      this.$el.stop().slideDown(this.speed).addClass(SHOW);\n   }\n\n   hide() {\n      if (this.$trigger.length) {\n         this.$trigger.removeClass(EXPANDED).attr(ARIA_EXPANDED, false);\n      }\n      this.$el.stop().slideUp(this.speed).removeClass(SHOW);\n   }\n\n   static _jQuery(config) {\n      return this.each(function () {\n         const data = new Collapse(this);\n\n         if (typeof config === 'string') {\n            if (data[config] === undefined) {\n               throw new Error(`No method named \"${config}\"`);\n            }\n            data[config]();\n            return;\n         }\n\n         data.toggle();\n      });\n   }\n}\n\nif (typeof document !== 'undefined') {\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = Collapse._jQuery;\n   $.fn[NAME].Constructor = Collapse;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Collapse._jQuery;\n   };\n\n   $(document).on('click', '[data-env-collapse]', function (e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const target = $this.attr('href') || $this.attr('data-target');\n      const $target = $(target);\n\n      if ($target.is(':animated')) {\n         return;\n      }\n\n      $target[NAME]();\n   });\n}\n\nexport default Collapse;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\n\nconst NAME = 'envDropdown';\nconst ENV_DROPDOWN_OPEN = 'env-is-open';\nconst TOGGLE_DROPDOWN = '[data-dropdown]';\nconst ENV_DROPDOWN = '.env-dropdown';\nconst ENV_CLICK_EVENT = 'click.env-dropdown';\nconst ENV_KEYDOWN_EVENT = 'keydown.env-dropdown';\nconst ENV_KEYUP_EVENT = 'keyup.env-dropdown';\nconst ENV_DROPDOWN_MENU = '.env-dropdown__menu';\nconst RIGHT_MOUSE_BUTTON = 2;\nconst KEYS = {\n   ESCAPE_KEY: 'Escape',\n   ARROWDOWN: 'ArrowDown',\n   ARROWUP: 'ArrowUp',\n   SPACE: 32,\n   TAB_KEY: 'Tab',\n};\nconst REGEXP_KEYDOWN = new RegExp(\n   `${KEYS.ARROWUP}|${KEYS.ARROWDOWN}|${KEYS.ESCAPE_KEY}`\n);\n\nclass Dropdown {\n   constructor(element) {\n      this.el = element;\n      this.$el = $(element);\n      this._id = this.el.id;\n   }\n\n   toggle() {\n      if (this.$el.hasClass(ENV_DROPDOWN_OPEN)) {\n         this.hide();\n      } else {\n         this.show();\n      }\n   }\n\n   show() {\n      this.$el.addClass(ENV_DROPDOWN_OPEN);\n\n      this.$el.find(TOGGLE_DROPDOWN).attr('aria-expanded', 'true');\n\n      this._bindEvents();\n   }\n\n   hide() {\n      this.$el.removeClass(ENV_DROPDOWN_OPEN);\n\n      this.$el.find(TOGGLE_DROPDOWN).attr('aria-expanded', 'false');\n\n      this._unbindEvents();\n   }\n\n   _bindEvents() {\n      const ENV_CLICK = `${ENV_CLICK_EVENT}-${this.el.id}`;\n      const ENV_KEYDOWN = `${ENV_KEYDOWN_EVENT}-${this.el.id}`;\n\n      $(document)\n         .off(ENV_CLICK)\n         .on(ENV_CLICK, (event) => {\n            if (!$(event.target).hasClass(ENV_DROPDOWN_MENU)) {\n               this.hide();\n            }\n         });\n\n      this.$el.off(ENV_KEYDOWN).one(ENV_KEYDOWN, (event) => {\n         if (event.key === KEYS.ESCAPE_KEY) {\n            this.hide();\n         }\n      });\n   }\n\n   _unbindEvents() {\n      $(document).off(`${ENV_CLICK_EVENT}-${this.el.id}`);\n      this.$el.off(`${ENV_KEYDOWN_EVENT}-${this.el.id}`);\n   }\n\n   static _jQuery(config) {\n      return this.each(function () {\n         const $this = $(this);\n         let data = $this.data('env.dropdown');\n\n         if (!data) {\n            data = new Dropdown(this);\n            $this.data('env.dropdown', data);\n         }\n\n         if (typeof config === 'string') {\n            const method = data[config];\n            if (method === undefined) {\n               throw new Error(`No method named \"${config}\"`);\n            }\n            method.call(data);\n            return;\n         }\n\n         data.toggle();\n      });\n   }\n}\n\nfunction selectMenuItem(event, $items) {\n   if (!$items.length) {\n      return;\n   }\n\n   let index = $items.index(event.target);\n\n   if (event.key === KEYS.ARROWUP && index > 0) {\n      index--;\n   }\n\n   if (event.key === KEYS.ARROWDOWN && index < $items.length - 1) {\n      index++;\n   }\n\n   index = index === -1 ? 0 : index;\n\n   $items[index].focus();\n}\n\nfunction clearMenus(event) {\n   if (event) {\n      if (\n         event.button === RIGHT_MOUSE_BUTTON ||\n         (event.type === 'keyup' && event.key !== KEYS.TAB_KEY)\n      ) {\n         return;\n      }\n   }\n\n   const $toggles = $(TOGGLE_DROPDOWN);\n\n   for (let i = 0, len = $toggles.length; i < len; i++) {\n      const data = $($toggles[i]).closest(ENV_DROPDOWN).data('env.dropdown');\n\n      if (!data) {\n         continue;\n      }\n      const dropdownMenu = data.$el.find(ENV_DROPDOWN_MENU)[0];\n\n      if (event) {\n         if (\n            event.originalEvent.path.includes(\n               document.documentElement.getElementsByClassName(\n                  'env-dropdown env-is-open'\n               )[0]\n            )\n         ) {\n            continue;\n         }\n\n         if (\n            event.type === 'keyup' &&\n            event.key === KEYS.TAB_KEY &&\n            dropdownMenu.contains(event.originalEvent.target)\n         ) {\n            continue;\n         }\n      }\n\n      data.hide();\n   }\n}\n\nfunction keydownHandler(event) {\n   if (!REGEXP_KEYDOWN.test(event.key)) {\n      return;\n   }\n\n   const isActive = $(this).closest(ENV_DROPDOWN).hasClass(ENV_DROPDOWN_OPEN);\n\n   if (!isActive && event.key === KEYS.ESCAPE_KEY) {\n      return;\n   }\n\n   event.preventDefault();\n   event.stopPropagation();\n\n   const getToggleButton = () =>\n      this.matches(TOGGLE_DROPDOWN)\n         ? this\n         : $(this).closest(ENV_DROPDOWN).find(TOGGLE_DROPDOWN)[0];\n\n   if (event.key === KEYS.ESCAPE_KEY) {\n      clearMenus();\n      getToggleButton().focus();\n\n      return;\n   }\n\n   if (\n      !isActive &&\n      (event.key === KEYS.ARROWUP || event.key === KEYS.ARROWDOWN)\n   ) {\n      getToggleButton().click();\n      return;\n   }\n\n   if (!isActive || event.which === KEYS.SPACE) {\n      clearMenus();\n\n      return;\n   }\n\n   const $dropdown = $(this).closest(ENV_DROPDOWN);\n\n   selectMenuItem(event, $dropdown.find('.env-dropdown__item'));\n}\n\nif (typeof document !== 'undefined') {\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = Dropdown._jQuery;\n   $.fn[NAME].Constructor = Dropdown;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Dropdown._jQuery;\n   };\n\n   $(document).on('click', TOGGLE_DROPDOWN, function (e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const $target = $($this.data('target'));\n\n      $target[NAME]();\n   });\n\n   $(document).on(ENV_KEYDOWN_EVENT, TOGGLE_DROPDOWN, keydownHandler);\n\n   $(document).on(ENV_KEYDOWN_EVENT, ENV_DROPDOWN_MENU, keydownHandler);\n\n   $(document).on(ENV_KEYUP_EVENT, clearMenus);\n}\n\nexport default Dropdown;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\nimport CssUtil from './util/css-util';\nimport Util from './util/util';\n\nconst DATA_KEY = 'env.image-slider';\nconst EVENT_KEY = `.${DATA_KEY}`;\nconst NAME = 'envImageslider';\nconst DATA_API_KEY = '.data-api';\nconst ARROW_LEFT_KEYCODE = 37;\nconst ARROW_RIGHT_KEYCODE = 39;\nconst TOUCHEVENT_WAIT = 500;\nconst SLIDE_WIDTH_PX = 80;\n\nconst DEFAULTS = {\n   buttons: true,\n   imageSlider: false,\n   interval: 5000,\n   keyboard: true,\n   pause: 'hover',\n   slide: false,\n   swipe: true,\n   wrap: true,\n};\n\nconst SELECTORS = {\n   ACTIVE: '.env-image-slider__item--active',\n   ACTIVE_DOT: '.env-is-active',\n   ACTIVE_ITEM: '.env-image-slider__item--active.env-image-slider__item',\n   DATA_SLIDE: '[data-move], [data-move-to], [data-image-slider-touch]',\n   DATA_IMAGE_SLIDER: '[data-image-slider]',\n   INDICATORS: '.env-image-slider__indicators',\n   INNER: '.env-image-slider__inner',\n   NEXT_PREV: '.env-image-slider--next, .env-image-slider--prev',\n   ITEM: '.env-image-slider__item',\n   THUMBNAILS: '.env-image-slider__thumbnails',\n};\n\nconst ClassName = {\n   ACTIVE: 'env-image-slider__item--active',\n   ACTIVE_DOT: 'env-is-active',\n   IMAGESLIDER: 'env-image-slider',\n   LEFT: 'env-image-slider__item--left',\n   NEXT: 'env-image-slider__item--next',\n   PREV: 'env-image-slider__item--prev',\n   RIGHT: 'env-image-slider__item--right',\n   SLIDE: 'env-image-slider--slide',\n};\n\nconst Direction = {\n   LEFT: 'left',\n   NEXT: 'next',\n   PREV: 'prev',\n   RIGHT: 'right',\n};\n\nconst Events = {\n   CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n   KEYDOWN: `keydown${EVENT_KEY}`,\n   LOAD_DATA_API: `load${EVENT_KEY}${DATA_API_KEY}`,\n   MOUSEENTER: `mouseenter${EVENT_KEY}`,\n   MOUSELEAVE: `mouseleave${EVENT_KEY}`,\n   SLID: `slid${EVENT_KEY}`,\n   SLIDE: `slide${EVENT_KEY}`,\n   TOUCHEND: `touchend${EVENT_KEY}`,\n   TOUCHMOVE: `touchmove${EVENT_KEY}`,\n   TOUCHSTART: `touchstart${EVENT_KEY}`,\n};\n\nclass Imageslider {\n   constructor(element, config) {\n      this.$el = $(element);\n      this.$images = this.$el.find(SELECTORS.ITEM);\n\n      this._isSliding = false;\n      this._isPaused = false;\n      this._interval = null;\n\n      this._activeElement = null;\n      this._indicatorsElement = this.$el.find(SELECTORS.INDICATORS)[0];\n      this._thumbnailElements = this.$el.find(SELECTORS.THUMBNAILS)[0];\n      this.config = $.extend({}, DEFAULTS, this.$el.data(), config);\n\n      if (this.$images.length > 1 && config.buttons) {\n         this._addSlideButtons();\n      }\n\n      this._bindEvents();\n   }\n\n   next() {\n      if (!this._isSliding) {\n         this._slide(Direction.NEXT);\n      }\n   }\n\n   prev() {\n      if (!this._isSliding) {\n         this._slide(Direction.PREV);\n      }\n   }\n\n   nextWhenVisible() {\n      if (!document.hidden) {\n         this.next();\n      }\n   }\n\n   pause(event) {\n      if (!event) {\n         this._isPaused = true;\n      }\n\n      clearInterval(this._interval);\n      this._interval = null;\n   }\n\n   cycle(event) {\n      if (!event) {\n         this._isPaused = false;\n      }\n\n      if (this._interval) {\n         clearInterval(this._interval);\n         this._interval = null;\n      }\n\n      if (this.config.interval && !this._isPaused) {\n         this._interval = setInterval(\n            (document.visibilityState ? this.nextWhenVisible : this.next).bind(\n               this\n            ),\n            this.config.interval\n         );\n      }\n   }\n\n   goTo(index) {\n      this._activeElement = this.$el.find(SELECTORS.ACTIVE_ITEM)[0];\n\n      const activeIndex = this._getItemIndex(this._activeElement);\n\n      if (index > this.$images.length - 1 || index < 0) {\n         return;\n      }\n\n      if (this._isSliding) {\n         return;\n      }\n\n      if (activeIndex === index) {\n         this.pause();\n         this.cycle();\n         return;\n      }\n\n      const direction = index > activeIndex ? Direction.NEXT : Direction.PREV;\n\n      this._slide(direction, this.$images[index]);\n      return;\n   }\n\n   startTouchSlide(event) {\n      this.touchstartx = event.originalEvent.touches[0].pageX;\n   }\n\n   moveTouchSlide(event) {\n      this.touchmovex = event.originalEvent.touches[0].pageX;\n\n      this.movex = -(this.touchstartx - this.touchmovex);\n\n      this.moved = false;\n      const activeItem = this.$el.find(SELECTORS.ACTIVE).children();\n      activeItem.css('transform', `translate3d(${this.movex}px, 0, 0)`);\n\n      if (this.movex > SLIDE_WIDTH_PX) {\n         this.prev();\n         this.moved = true;\n         setTimeout(() => {\n            activeItem.css('transform', 'translate3d(0, 0, 0)');\n         }, TOUCHEVENT_WAIT);\n      } else if (this.movex < -SLIDE_WIDTH_PX) {\n         this.next();\n         this.moved = true;\n         setTimeout(() => {\n            activeItem.css('transform', 'translate3d(0, 0, 0)');\n         }, TOUCHEVENT_WAIT);\n      }\n   }\n\n   endTouchSlide() {\n      if (!this.moved) {\n         this.$el\n            .find(SELECTORS.ACTIVE)\n            .children()\n            .css('transform', 'translate3d(0, 0, 0)');\n      }\n   }\n\n   dispose() {\n      this.$el.off(EVENT_KEY).removeData(DATA_KEY);\n\n      this.$el = null;\n      this.$images = null;\n      this._interval = null;\n      this._isPaused = null;\n      this._isSliding = null;\n      this._activeElement = null;\n      this._indicatorsElement = null;\n      this._thumbnailElements = null;\n   }\n\n   _addSlideButtons() {\n      const sliderId = this.$el[0].id;\n      const buttonHTML = `<button type='button' class='env-image-slider--prev' data-move='prev' data-target='#${sliderId}'>\n               <svg class='env-image-slider__previous-icon env-icon env-icon-small'>\n               <use xlink:href='/sitevision/envision-icons.svg#icon-arrow-left'></use>\n               </svg>\n               <span class='env-assistive-text'>Previous</span>\n            </button>\n            <button type='button' class='env-image-slider--next' data-move='next' data-target='#${sliderId}'>\n               <svg class='env-image-slider__next-icon env-icon env-icon-small'>\n               <use xlink:href='/sitevision/envision-icons.svg#icon-arrow-right'></use>\n               </svg>\n               <span class='env-assistive-text'>Next</span>\n            </button>`;\n      $(`#${sliderId}`).find(SELECTORS.INNER).append(buttonHTML);\n   }\n\n   _getItemByDirection(direction, activeElement) {\n      const isNextDirection = direction === Direction.NEXT;\n      const activeIndex = this._getItemIndex(activeElement);\n      const lastImageIndex = this.$images.length - 1;\n      const isGoingToWrap =\n         (!isNextDirection && activeIndex === 0) ||\n         (isNextDirection && activeIndex === lastImageIndex);\n\n      if (isGoingToWrap && !this.config.wrap) {\n         return activeElement;\n      }\n\n      const delta = isNextDirection ? 1 : -1;\n      const itemIndex = (activeIndex + delta) % this.$images.length;\n\n      return itemIndex === -1\n         ? this.$images[lastImageIndex]\n         : this.$images[itemIndex];\n   }\n\n   _bindEvents() {\n      if (this.config.keyboard) {\n         this.$el.on(Events.KEYDOWN, (event) => this._keydown(event));\n      }\n\n      if (\n         this.config.pause === 'hover' &&\n         this.config.imageSlider === 'cycle'\n      ) {\n         this.$el\n            .on(Events.MOUSEENTER, (event) => this.pause(event))\n            .on(Events.MOUSELEAVE, (event) => this.cycle(event));\n         if (CssUtil.isTouch()) {\n            this.$el.on(Events.TOUCHEND, () => {\n               this.pause();\n               if (this.touchTimeout) {\n                  clearTimeout(this.touchTimeout);\n               }\n               this.touchTimeout = setTimeout(\n                  (event) => this.cycle(event),\n                  TOUCHEVENT_WAIT,\n                  this.config.interval\n               );\n            });\n         }\n      }\n      if (this.config.swipe) {\n         this._bindTouchSlider();\n      }\n   }\n\n   _bindTouchSlider() {\n      const container = this.$el.find(SELECTORS.INNER);\n      container.on(Events.TOUCHSTART, (event) => {\n         this.startTouchSlide(event);\n      });\n\n      container.on(Events.TOUCHMOVE, (event) => {\n         this.moveTouchSlide(event);\n      });\n\n      container.on(Events.TOUCHEND, () => {\n         this.endTouchSlide(event);\n      });\n   }\n\n   _keydown(event) {\n      if (/input|textarea/i.test(event.target.tagName)) {\n         return;\n      }\n\n      switch (event.which) {\n         case ARROW_LEFT_KEYCODE:\n            event.preventDefault();\n            this.prev();\n            break;\n         case ARROW_RIGHT_KEYCODE:\n            event.preventDefault();\n            this.next();\n            break;\n         default:\n            return;\n      }\n   }\n\n   _getItemIndex(element) {\n      return this.$images.index(element);\n   }\n\n   _triggerSlideEvent(targetElement, eventDirectionName) {\n      const targetIndex = this._getItemIndex(targetElement);\n      const fromIndex = this._getItemIndex(\n         this.$el.find(SELECTORS.ACTIVE_ITEM)[0]\n      );\n      const slideEvent = $.Event(Events.SLIDE, {\n         targetElement,\n         direction: eventDirectionName,\n         from: fromIndex,\n         to: targetIndex,\n      });\n\n      this.$el.trigger(slideEvent);\n\n      return slideEvent;\n   }\n\n   _setActiveIndicatorElement(element) {\n      if (this._indicatorsElement) {\n         $(this._indicatorsElement)\n            .find(SELECTORS.ACTIVE_DOT)\n            .removeClass(ClassName.ACTIVE_DOT);\n\n         const nextIndicator = this._indicatorsElement.children[\n            this._getItemIndex(element)\n         ];\n\n         if (nextIndicator) {\n            $(nextIndicator).addClass(ClassName.ACTIVE_DOT);\n         }\n      } else if (this._thumbnailElements) {\n         $(this._thumbnailElements)\n            .find(SELECTORS.ACTIVE)\n            .removeClass(ClassName.ACTIVE);\n\n         const nextIndicator = this._thumbnailElements.children[\n            this._getItemIndex(element)\n         ].firstElementChild;\n\n         if (nextIndicator) {\n            $(nextIndicator).addClass(ClassName.ACTIVE);\n         }\n      }\n   }\n\n   _slide(direction, element) {\n      const activeElement = this.$el.find(SELECTORS.ACTIVE_ITEM)[0];\n      const activeElementIndex = this._getItemIndex(activeElement);\n      const nextElement =\n         element ||\n         (activeElement && this._getItemByDirection(direction, activeElement));\n      const nextElementIndex = this._getItemIndex(nextElement);\n\n      let directionalClassName;\n      let orderClassName;\n      let eventDirectionName;\n\n      if (direction === Direction.NEXT) {\n         directionalClassName = ClassName.LEFT;\n         orderClassName = ClassName.NEXT;\n         eventDirectionName = Direction.LEFT;\n      } else {\n         directionalClassName = ClassName.RIGHT;\n         orderClassName = ClassName.PREV;\n         eventDirectionName = Direction.RIGHT;\n      }\n\n      const $nextElement = $(nextElement);\n\n      if (nextElement && $nextElement.hasClass(ClassName.ACTIVE)) {\n         this._isSliding = false;\n         return;\n      }\n\n      const slideEvent = this._triggerSlideEvent(\n         nextElement,\n         eventDirectionName\n      );\n\n      if (slideEvent.isDefaultPrevented()) {\n         return;\n      }\n\n      if (!activeElement || !nextElement) {\n         return;\n      }\n\n      this._isSliding = true;\n\n      this._setActiveIndicatorElement(nextElement);\n\n      const slidEvent = $.Event(Events.SLID, {\n         relatedTarget: nextElement,\n         direction: eventDirectionName,\n         from: activeElementIndex,\n         to: nextElementIndex,\n      });\n\n      const $activeElement = $(activeElement);\n\n      if (this.$el.hasClass(ClassName.SLIDE)) {\n         $nextElement.addClass(orderClassName);\n\n         CssUtil.reflow(nextElement);\n\n         $activeElement.addClass(directionalClassName);\n         $nextElement.addClass(directionalClassName);\n\n         $activeElement.one('transitionend', () => {\n            $nextElement\n               .removeClass(`${directionalClassName} ${orderClassName}`)\n               .addClass(ClassName.ACTIVE);\n\n            $activeElement.removeClass(\n               `${ClassName.ACTIVE} ${orderClassName} ${directionalClassName}`\n            );\n\n            this._isSliding = false;\n\n            this.$el.trigger(slidEvent);\n         });\n      } else {\n         $activeElement.removeClass(ClassName.ACTIVE);\n         $nextElement.addClass(ClassName.ACTIVE);\n\n         this._isSliding = false;\n         this.$el.trigger(slideEvent);\n      }\n   }\n\n   static _jQueryInterface(config) {\n      return this.each(() => {\n         const $this = $(this);\n         let data = $this.data(DATA_KEY);\n\n         const _config = $.extend({}, DEFAULTS, $this.data());\n\n         if (typeof config === 'object') {\n            $.extend(_config, config);\n         }\n\n         const action = typeof config === 'string' ? config : _config.move;\n\n         if (!data) {\n            data = new Imageslider(this, _config);\n            $this.data(DATA_KEY, data);\n         }\n\n         if (typeof config === 'number') {\n            data.goTo(config);\n         } else if (typeof action === 'string') {\n            if (data[action] === undefined) {\n               throw new Error(`No method named \"${action}\"`);\n            }\n            data[action]();\n         } else if (_config.interval && _config.imageSlider === 'cycle') {\n            data.pause();\n            data.cycle();\n         }\n      });\n   }\n\n   static _dataApiClickHandler(event) {\n      // 'this' is current clicked element i.e. slide-right, slide-left or a indicator/thumbnail.\n      const selector = Util.getSelectorFromElement(this);\n\n      if (!selector) {\n         return;\n      }\n\n      const $target = $(selector).eq(0);\n\n      if (!$target.length || !$target.hasClass(ClassName.IMAGESLIDER)) {\n         return;\n      }\n\n      const config = $.extend({}, $target.data(), $(this).data());\n      const slideIndex = this.getAttribute('data-move-to');\n\n      if (slideIndex) {\n         config.interval = false;\n      }\n\n      Imageslider._jQueryInterface.call($target, config);\n\n      if (slideIndex) {\n         $target.data(DATA_KEY).goTo(slideIndex);\n      }\n\n      event.preventDefault();\n   }\n}\n\nif (typeof document !== 'undefined') {\n   $(document).on(\n      Events.CLICK_DATA_API,\n      SELECTORS.DATA_SLIDE,\n      Imageslider._dataApiClickHandler\n   );\n\n   $(window).on(Events.LOAD_DATA_API, () => {\n      const $imageSliders = $(SELECTORS.DATA_IMAGE_SLIDER);\n      $imageSliders.each((i, slider) => {\n         const $slider = $(slider);\n         Imageslider._jQueryInterface.call($slider, $slider.data());\n      });\n   });\n\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = Imageslider._jQueryInterface;\n   $.fn[NAME].Constructor = Imageslider;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Imageslider._jQueryInterface;\n   };\n}\n\nexport default Imageslider;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\n\nconst ANIMATION = 'env-animation-in-progress';\nconst BACKDROP = 'env-image-viewer__backdrop';\nconst BACKDROP_ANIMATION = 'env-image-viewer__backdrop--in';\nconst DATA_KEY = 'env.image-viewer';\nconst EVENT_KEY = `.${DATA_KEY}`;\nconst NAME = 'envImageviewer';\nconst DATA_API_KEY = '.data-api';\nconst ESCAPE_KEY = 27;\nconst ARROW_LEFT_KEYCODE = 37;\nconst ARROW_RIGHT_KEYCODE = 39;\nconst TAB_KEY = 9;\nconst SPINNER_TEMPLATE = `<div class=\"env-spinner\">\n                                <div class=\"env-rect1\"></div>\n                                <div class=\"env-rect2\"></div>\n                                <div class=\"env-rect3\"></div>\n                                <div class=\"env-rect4\"></div>\n                                <div class=\"env-rect5\"></div>\n                             </div>`;\n\nconst SELECTORS = {\n   ACTIVE_DOT: '.env-is-active',\n   DATA_MOVE_TO: '[data-move-to]',\n   DATA_MOVE: '[data-move]',\n   DATA_IMAGE_VIEWER: '[data-image-viewer]',\n   IMAGES: '.env-image-viewer__images',\n   INDICATORS: '.env-image-viewer__indicators',\n   DATA_SLIDE_TO: '[data-slide-to]',\n   SPINNER: '.env-spinner',\n};\n\nconst ClassName = {\n   ACTIVE_DOT: 'env-is-active',\n   HIDDEN: 'env-image-viewer--hidden',\n   SPINNER_HIDE: 'env-spinner--hide',\n};\n\nconst Events = {\n   CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n   TOUCHEND: `touchend${EVENT_KEY}`,\n   TOUCHMOVE: `touchmove${EVENT_KEY}`,\n   TOUCHSTART: `touchstart${EVENT_KEY}`,\n};\n\nclass Imageviewer {\n   constructor(element, $image) {\n      this.$el = $(element);\n      this.$images = this.$el.find(SELECTORS.IMAGES);\n      this._isShown = false;\n\n      this.config = $.extend({}, this.$el.data());\n      this.config.index = this.$images.index($image[0]);\n   }\n\n   next() {\n      this.show(this._getNextItemIndex());\n   }\n\n   prev() {\n      this.show(this._getPrevItemIndex());\n   }\n\n   show(index) {\n      this.config.index = Number(index);\n      const image = $(this.$images[index])[0];\n      const href = image.getAttribute('href');\n\n      if (this._isShown) {\n         $(SELECTORS.SPINNER).removeClass(ClassName.SPINNER_HIDE);\n         this.$btnContainer.addClass(ClassName.HIDDEN);\n\n         const $downloadingImage = this._loadImage(href);\n\n         this.$imgContainer.html($downloadingImage);\n         this._setActiveIndicatorElement();\n      } else {\n         this.$modal = $('<div/>', {\n            class: 'env-image-viewer__modal',\n         });\n\n         this.$btnContainer = $('<div/>', {\n            class: 'env-image-viewer__dialog',\n         });\n\n         this.$imgContainer = $('<div/>', {\n            class: 'env-image-viewer__modal-container',\n         });\n\n         this.$modal.append(this.$btnContainer);\n         this.$btnContainer.append(this.$imgContainer);\n         this.$modal.appendTo(document.body);\n\n         if (this.$images.length > 1) {\n            this.$btnContainer.append(this._getButtons());\n            this.$btnContainer.append(this._getIndicators());\n         }\n\n         this.$btnContainer.addClass(ClassName.HIDDEN);\n         const $downloadingImage = this._loadImage(href);\n\n         this.$imgContainer.html($downloadingImage);\n\n         this._isShown = true;\n\n         $('body').css('overflow', 'hidden');\n\n         this._bindContainerEvents();\n         this._bindEvents();\n         this._showBackdrop();\n\n         $(SPINNER_TEMPLATE).prependTo(this.$modal);\n      }\n   }\n\n   hide() {\n      const removeBackdropCallback = () => {\n         this.$backdrop.remove();\n         this.$modal.remove();\n         this.$btnContainer.remove();\n         this.$imgContainer.remove();\n         $('body').css('overflow', 'scroll');\n      };\n\n      this.$backdrop\n         .one('transitionend', removeBackdropCallback)\n         .removeClass(BACKDROP_ANIMATION);\n\n      this._isShown = false;\n   }\n\n   _loadImage(href) {\n      const $downloadingImage = $('<img>');\n      const $imageModal = $('.env-image-viewer__dialog');\n\n      $downloadingImage\n         .addClass('env-image-viewer__img')\n         .attr({\n            tabindex: '-1',\n            src: href,\n         })\n         .on('load', () => {\n            const imageHeight = $downloadingImage.height();\n            const imageWidth = $downloadingImage.width();\n            const windowHeight = window.innerHeight;\n            const heightModifier = 0.8;\n            const defaultWidth = 800;\n\n            if (imageWidth > defaultWidth) {\n               $imageModal.css({\n                  'max-width': '80%',\n               });\n            }\n\n            if (windowHeight < imageHeight) {\n               $downloadingImage.css({\n                  'max-height': windowHeight * heightModifier,\n               });\n            }\n\n            $(SELECTORS.SPINNER).addClass(ClassName.SPINNER_HIDE);\n            this.$btnContainer.removeClass(ClassName.HIDDEN);\n            this.$imgContainer.children().eq(0).trigger('focus');\n         });\n\n      return $downloadingImage;\n   }\n\n   _bindContainerEvents() {\n      this.$btnContainer.on(Events.CLICK_DATA_API, SELECTORS.DATA_MOVE, (e) => {\n         e.preventDefault();\n\n         if ($(e.currentTarget).data('move') === 'next') {\n            this.next();\n         } else {\n            this.prev();\n         }\n      });\n\n      this.$btnContainer.on(\n         Events.CLICK_DATA_API,\n         SELECTORS.DATA_MOVE_TO,\n         (e) => {\n            const viewerIndex = e.currentTarget.getAttribute('data-move-to');\n\n            if (viewerIndex) {\n               this.show(viewerIndex);\n            }\n         }\n      );\n   }\n\n   _getButtons() {\n      const buttonHTML = `<button type=\"button\" class=\"env-image-viewer--prev\" data-move=\"prev\">\n               <svg class=\"env-image-viewer__prev-icon env-icon env-icon-small\">\n               <use xlink:href=\"/sitevision/envision-icons.svg#icon-arrow-left\"></use>\n               </svg>\n               <span class=\"env-assistive-text\">Previous</span>\n            </button>\n            <button type=\"button\" class=\"env-image-viewer--next\" data-move=\"next\">\n               <svg class=\"env-image-viewer__next-icon env-icon env-icon-small\">\n               <use xlink:href=\"/sitevision/envision-icons.svg#icon-arrow-right\"></use>\n               </svg>\n               <span class=\"env-assistive-text\">Next</span>\n            </button>`;\n\n      return buttonHTML;\n   }\n\n   _getIndicators() {\n      const indicatorItems = this._getIndicatorItems();\n      return `<div class=\"env-image-viewer__indicators\">\n                  ${indicatorItems}\n               </div>`;\n   }\n\n   _getIndicatorItems() {\n      const activeElementIndex = this.config.index;\n      let items = '';\n\n      this.$images.each((index) => {\n         const isActive = index === activeElementIndex;\n         items += `<button type=\"button\" title=\"Move to image ${\n            index + 1\n         }\" data-move-to=\"${index}\" class=\"${\n            isActive ? 'env-is-active' : ''\n         }\"></button>`;\n      });\n\n      return items;\n   }\n\n   _showBackdrop() {\n      this.$backdrop = $('<div/>', {\n         class: BACKDROP,\n      });\n\n      this.$modal.on(Events.CLICK_DATA_API, (event) => {\n         if (this.$backdrop.hasClass(ANIMATION)) {\n            return;\n         }\n\n         if (event.target !== event.currentTarget) {\n            return;\n         }\n\n         if (!this._isShown) {\n            return;\n         }\n\n         this.hide();\n      });\n\n      this.$backdrop.appendTo(document.body);\n\n      this.$backdrop\n         .one('animationend', this._removeBackdropAnimation)\n         .addClass(`${BACKDROP_ANIMATION} ${ANIMATION}`);\n   }\n\n   _removeBackdropAnimation(e) {\n      $(e.currentTarget).removeClass(ANIMATION);\n   }\n\n   _bindEvents() {\n      const focusableElements = this.$modal.find('button');\n      const firstElement = focusableElements[0];\n      const lastElement = focusableElements[focusableElements.length - 1];\n\n      this.$modal.on('keydown', (event) =>\n         this._keydown(event, firstElement, lastElement)\n      );\n   }\n\n   _keydown(event, firstElement, lastElement) {\n      if (/input|textarea/i.test(event.target.tagName)) {\n         return;\n      }\n\n      switch (event.which) {\n         case ARROW_LEFT_KEYCODE:\n            event.preventDefault();\n            this.prev();\n            break;\n         case ARROW_RIGHT_KEYCODE:\n            event.preventDefault();\n            this.next();\n            break;\n         case ESCAPE_KEY:\n            event.preventDefault();\n            if (!this.$backdrop.hasClass(ANIMATION)) {\n               this.hide();\n            }\n            break;\n         case TAB_KEY:\n            if (event.target.tagName === 'IMG') {\n               event.preventDefault();\n               firstElement.focus();\n            } else if (event.shiftKey) {\n               if (event.target === firstElement) {\n                  event.preventDefault();\n                  lastElement.focus();\n               }\n            } else if (event.target === lastElement) {\n               event.preventDefault();\n               firstElement.focus();\n            }\n            break;\n         default:\n            return;\n      }\n   }\n\n   _getNextItemIndex() {\n      return this.config.index === this.$images.length - 1\n         ? 0\n         : this.config.index + 1;\n   }\n\n   _getPrevItemIndex() {\n      return this.config.index === 0\n         ? this.$images.length - 1\n         : this.config.index - 1;\n   }\n\n   _setActiveIndicatorElement() {\n      this._indicatorsElement = this.$btnContainer.find(\n         SELECTORS.INDICATORS\n      )[0];\n      if (this.$images.length > 0) {\n         this.$btnContainer\n            .find(SELECTORS.ACTIVE_DOT)\n            .removeClass(ClassName.ACTIVE_DOT);\n\n         const indicator = this.$btnContainer\n            .find(SELECTORS.INDICATORS)\n            .children()[this.config.index];\n\n         if (indicator) {\n            $(indicator).addClass(ClassName.ACTIVE_DOT);\n         }\n      }\n   }\n\n   static _jQuery($image) {\n      return this.each(() => {\n         const data = new Imageviewer(this, $image);\n         data.show(data.config.index);\n      });\n   }\n}\n\nif (typeof document !== 'undefined') {\n   $(document).on(\n      Events.CLICK_DATA_API,\n      SELECTORS.DATA_IMAGE_VIEWER,\n      function (e) {\n         e.preventDefault();\n         const $target = $(e.target);\n\n         if ($target.is('img')) {\n            $(this).envImageviewer($target.parent());\n         } else if ($target.is('a.env-image-viewer__images')) {\n            $(this).envImageviewer($target);\n         }\n      }\n   );\n\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = Imageviewer._jQuery;\n   $.fn[NAME].Constructor = Imageviewer;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Imageviewer._jQuery;\n   };\n}\n\nexport default Imageviewer;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\nimport CssUtil from './util/css-util';\n\nconst ANIMATION = 'env-animation-in-progress';\nconst BACKDROP = 'env-modal-dialog__backdrop';\nconst BACKDROP_ANIMATION = 'env-modal-dialog__backdrop--in';\nconst DATA_KEY = 'env.modal-dialog';\nconst DISMISS_SELECTOR = '[data-modal-dialog-dismiss]';\nconst ESCAPE_KEY = 27;\nconst FOCUSIN = 'focusin.env-modal-dialog';\nconst MODIFIER_BASE = 'env-modal-dialog--';\nconst ALERT_MODIFIER_BASE = 'env-modal-alert--';\nconst NAME = 'envDialog';\nconst SELECTORS = {\n   MODAL_DIALOG: '[data-modal-dialog]',\n   MODAL_ALERT: '[data-modal-alert]',\n};\nconst SHOW = 'show';\nconst TAB_KEY = 9;\n\nconst FOCUSABLE_ELEMENTS_SELECTOR =\n   'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex=\"0\"], [contenteditable]';\n\nconst EVENTS = {\n   HIDE: 'hide.env-modal-dialog',\n   HIDDEN: 'hidden.env-modal-dialog',\n   SHOW: 'show.env-modal-dialog',\n   SHOWN: 'shown.env-modal-dialog',\n};\n\nclass ModalDialog {\n   constructor(element) {\n      this.el = element;\n      this.$el = $(element);\n      this._isShown = false;\n   }\n\n   toggle() {\n      return this._isShown ? this.hide() : this.show();\n   }\n\n   show() {\n      if (this._isShown) {\n         return;\n      }\n\n      CssUtil.reflow(this.el); // Used to force reflow\n\n      const showEvent = $.Event(EVENTS.SHOW, {});\n\n      this.$el.trigger(showEvent);\n\n      const shownEvent = $.Event(EVENTS.SHOWN, {});\n\n      this.$el\n         .one('transitionend', () => {\n            this.$el.trigger(shownEvent);\n         })\n         .addClass(this._getModifierBase() + SHOW)\n         .removeAttr('aria-hidden')\n         .css('opacity', 1);\n\n      this._showBackdrop();\n\n      this._isShown = true;\n      this.$el.trigger('focus');\n\n      $('body').css('overflow', 'hidden');\n\n      this._bindEvents();\n   }\n\n   hide() {\n      if (!this._isShown) {\n         return;\n      }\n\n      const hideModalCallback = () => {\n         this.$el.removeClass(this._getModifierBase() + SHOW);\n         const hiddenEvent = $.Event(EVENTS.HIDDEN, {});\n         this.$el.trigger(hiddenEvent);\n      };\n\n      const removeBackdropCallback = () => {\n         this.$backdrop.remove();\n         $('body').css('overflow', '');\n      };\n\n      const hideEvent = $.Event(EVENTS.HIDE, {});\n\n      this.$el.trigger(hideEvent);\n\n      this.$el\n         .one('transitionend', hideModalCallback)\n         .attr('aria-hidden', 'true')\n         .css('opacity', 0)\n         .off('click', DISMISS_SELECTOR);\n\n      this.$backdrop\n         .one('transitionend', removeBackdropCallback)\n         .removeClass(BACKDROP_ANIMATION);\n\n      this._isShown = false;\n      this._unbindEvents();\n   }\n\n   _bindEvents() {\n      this.$el.on('click', DISMISS_SELECTOR, (event) => this.hide(event));\n\n      $(document)\n         .off(FOCUSIN)\n         .one(FOCUSIN, (event) => {\n            if (\n               document !== event.target &&\n               this.el !== event.target &&\n               !this.$el.has(event.target).length\n            ) {\n               this.$el.trigger('focus');\n            }\n         });\n\n      const focusableElements = this.$el.find(FOCUSABLE_ELEMENTS_SELECTOR);\n      const firstElement = focusableElements[0];\n      const lastElement = focusableElements[focusableElements.length - 1];\n\n      this.$el.on('keydown', (e) => {\n         if (e.which === TAB_KEY) {\n            if (e.shiftKey) {\n               if (e.target === firstElement) {\n                  e.preventDefault();\n                  lastElement.focus();\n               }\n            } else if (e.target === lastElement) {\n               e.preventDefault();\n               firstElement.focus();\n            }\n         }\n\n         if (e.which === ESCAPE_KEY) {\n            this.hide();\n         }\n      });\n   }\n\n   _getModifierBase() {\n      return this.$el.hasClass('env-modal-alert')\n         ? ALERT_MODIFIER_BASE\n         : MODIFIER_BASE;\n   }\n\n   _unbindEvents() {\n      this.$el.off('click keydown');\n      $(document).off(FOCUSIN);\n   }\n\n   _showBackdrop() {\n      this.$backdrop = $('<div/>', {\n         class: BACKDROP,\n      });\n\n      this.$el.on('mousedown', (event) => {\n         if (this.$backdrop.hasClass(ANIMATION)) {\n            return;\n         }\n\n         if (event.target !== event.currentTarget) {\n            return;\n         }\n\n         if (!this._isShown) {\n            return;\n         }\n\n         this.hide();\n      });\n\n      this.$backdrop.appendTo(document.body);\n\n      this.$backdrop\n         .one('animationend', this._removeBackdropAnimation)\n         .addClass(`${BACKDROP_ANIMATION} ${ANIMATION}`);\n   }\n\n   _removeBackdropAnimation(e) {\n      $(e.currentTarget).removeClass(ANIMATION);\n   }\n\n   static _jQuery(action) {\n      return this.each(() => {\n         const $this = $(this);\n         let data = $this.data(DATA_KEY);\n\n         if (!data) {\n            data = new ModalDialog(this);\n            $this.data(DATA_KEY, data);\n         }\n\n         if (typeof action === 'string') {\n            const method = data[action];\n            if (method === undefined) {\n               throw new Error(`No method named \"${action}\"`);\n            }\n            method.call(data);\n            return;\n         }\n\n         data.show();\n      });\n   }\n}\n\nif (typeof document !== 'undefined') {\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = ModalDialog._jQuery;\n   $.fn[NAME].Constructor = ModalDialog;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return ModalDialog._jQuery;\n   };\n\n   $(document).on(\n      'click',\n      SELECTORS.MODAL_ALERT + ',' + SELECTORS.MODAL_DIALOG,\n      function (e) {\n         e.preventDefault();\n\n         const $target = $($(this).data('target'));\n\n         $target[NAME]();\n      }\n   );\n}\n\nexport default ModalDialog;\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.16.1\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && typeof navigator !== 'undefined';\n\nvar timeoutDuration = function () {\n  var longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\n  for (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n    if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n      return 1;\n    }\n  }\n  return 0;\n}();\n\nfunction microtaskDebounce(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n    called = true;\n    window.Promise.resolve().then(function () {\n      called = false;\n      fn();\n    });\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nvar supportsMicroTasks = isBrowser && window.Promise;\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var window = element.ownerDocument.defaultView;\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body;\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body;\n    case '#document':\n      return element.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\n/**\n * Returns the reference node of the reference object, or the reference object itself.\n * @method\n * @memberof Popper.Utils\n * @param {Element|Object} reference - the reference element (the popper will be relative to this)\n * @returns {Element} parent\n */\nfunction getReferenceNode(reference) {\n  return reference && reference.referenceNode ? reference.referenceNode : reference;\n}\n\nvar isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nvar isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nfunction isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  var noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  var offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = element.ownerDocument.documentElement;\n    var scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return parseFloat(styles['border' + sideA + 'Width']) + parseFloat(styles['border' + sideB + 'Width']);\n}\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);\n}\n\nfunction getWindowSizes(document) {\n  var body = document.body;\n  var html = document.documentElement;\n  var computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } else {\n      rect = element.getBoundingClientRect();\n    }\n  } catch (e) {}\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  var width = sizes.width || element.clientWidth || result.width;\n  var height = sizes.height || element.clientHeight || result.height;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var isIE10 = isIE(10);\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = parseFloat(styles.borderTopWidth);\n  var borderLeftWidth = parseFloat(styles.borderLeftWidth);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if (fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = parseFloat(styles.marginTop);\n    var marginLeft = parseFloat(styles.marginLeft);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var html = element.ownerDocument.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = !excludeScroll ? getScroll(html) : 0;\n  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  var parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nfunction getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  var el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  // NOTE: 1 DOM access here\n\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, getReferenceNode(reference));\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(popper.ownerDocument),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  var isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0;\n  boundaries.top += isPaddingNumber ? padding : padding.top || 0;\n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;\n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, getReferenceNode(reference));\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var window = element.ownerDocument.defaultView;\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  var y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier['function']) {\n      // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n\n  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicitly asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\n/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nfunction getWindow(element) {\n  var ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nfunction getRoundedOffsets(data, shouldRound) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n  var round = Math.round,\n      floor = Math.floor;\n\n  var noRound = function noRound(v) {\n    return v;\n  };\n\n  var referenceWidth = round(reference.width);\n  var popperWidth = round(popper.width);\n\n  var isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  var isVariation = data.placement.indexOf('-') !== -1;\n  var sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  var bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  var horizontalToInteger = !shouldRound ? noRound : isVertical || isVariation || sameWidthParity ? round : floor;\n  var verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(bothOddWidth && !isVariation && shouldRound ? popper.left - 1 : popper.left),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right)\n  };\n}\n\nvar isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  var offsets = getRoundedOffsets(data, window.devicePixelRatio < 2 || !isFirefox);\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  var _data$offsets$arrow;\n\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var css = getStyleComputedProperty(data.instance.popper);\n  var popperMarginSide = parseFloat(css['margin' + sideCapitalized]);\n  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width']);\n  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    var flippedVariationByRef = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    // flips variation if popper content overflows boundaries\n    var flippedVariationByContent = !!options.flipVariationsByContent && (isVertical && variation === 'start' && overflowsRight || isVertical && variation === 'end' && overflowsLeft || !isVertical && variation === 'start' && overflowsBottom || !isVertical && variation === 'end' && overflowsTop);\n\n    var flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  var transformProp = getSupportedPropertyName('transform');\n  var popperStyles = data.instance.popper.style; // assignment to help minification\n  var top = popperStyles.top,\n      left = popperStyles.left,\n      transform = popperStyles[transformProp];\n\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedules an update. It will run on the next UI update available.\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nexport default Popper;\n//# sourceMappingURL=popper.js.map\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\nimport Popper from 'popper.js';\n\nconst NAME = 'envPopover';\nconst IDENTIFIER = 'env.popover';\nconst EVENT_NAMESPACE = `.${IDENTIFIER}`;\n\nconst attachmentMapping = {\n   top: 'top',\n   bottom: 'bottom',\n   left: 'left',\n   right: 'right',\n};\n\nconst DEFAULTS = {\n   clickOutside: false,\n   constraints: [],\n   container: 'body',\n   content: '',\n   delay: 0,\n   escapeContent: true,\n   placement: 'top',\n   template: `<div class=\"env-popover\" role=\"tooltip\">\n                  <div class=\"env-popover__arrow\"></div>\n                  <div class=\"env-popover__header\">\n                     <h4 class=\"env-text env-popover__header__title\"></h4>\n                  </div>\n                  <div class=\"env-popover__content\"></div>\n               </div>`,\n   title: '',\n   trigger: 'click',\n};\n\nclass Popover {\n   constructor(element, config) {\n      this.el = element;\n      this.$el = $(this.el);\n      this.config = $.extend({}, DEFAULTS, this.$el.data(), config);\n\n      this.bindEvents();\n   }\n\n   bindEvents() {\n      const triggers = this.config.trigger.split(' ');\n\n      triggers.forEach((trigger) => {\n         if (trigger === 'click') {\n            this.$el.on(this.config.trigger + EVENT_NAMESPACE, () => {\n               if (this.isShowing) {\n                  this.hide();\n               } else {\n                  this.show();\n               }\n            });\n         } else {\n            const hoverTrigger = trigger === 'hover';\n            const inEvent = hoverTrigger ? 'mouseenter' : 'focusin';\n            const outEvent = hoverTrigger ? 'mouseleave' : 'focusout';\n\n            this.$el\n               .on(inEvent + EVENT_NAMESPACE, () => {\n                  if (this.config.delay > 0) {\n                     if (this.hidetimeout) {\n                        clearTimeout(this.hidetimeout);\n                     }\n                     if (this.showtimeout) {\n                        clearTimeout(this.showtimeout);\n                     }\n                     if (!this.isShowing) {\n                        this.showtimeout = setTimeout(() => {\n                           this.show();\n                        }, this.config.delay);\n                     }\n                  } else if (!this.isShowing) {\n                     this.show();\n                  }\n               })\n               .on(outEvent + EVENT_NAMESPACE, () => {\n                  if (this.config.delay > 0) {\n                     this.hoverPopover();\n                     if (this.showtimeout) {\n                        clearTimeout(this.showtimeout);\n                     }\n                     if (this.isShowing) {\n                        this.hidetimeout = setTimeout(() => {\n                           this.hide();\n                        }, this.config.delay);\n                     }\n                  } else if (this.isShowing) {\n                     this.hide();\n                  }\n               });\n         }\n      });\n   }\n\n   hoverPopover() {\n      const $popoverElement = this.getPopoverElement();\n\n      $popoverElement.off('mouseenter').on('mouseenter', () => {\n         if (this.hidetimeout) {\n            clearTimeout(this.hidetimeout);\n         }\n         if (this.showtimeout) {\n            clearTimeout(this.showtimeout);\n         }\n         if (!this.isShowing) {\n            this.showtimeout = setTimeout(() => {\n               this.show();\n            }, this.config.delay);\n         }\n      });\n      $popoverElement.off('mouseleave').on('mouseleave', () => {\n         if (this.showtimeout) {\n            clearTimeout(this.showtimeout);\n         }\n         if (this.isShowing) {\n            this.hidetimeout = setTimeout(() => {\n               this.hide();\n            }, this.config.delay);\n         }\n      });\n   }\n\n   getPopoverElement() {\n      return (this.$popoverElement =\n         this.$popoverElement || $(this.config.template));\n   }\n\n   setText($popoverElement, selector, text) {\n      // prettier-ignore\n      $popoverElement\n            .find(selector)[this.config.escapeContent ? 'text' : 'html'](text);\n   }\n\n   setTitle($popoverElement) {\n      this.setText(\n         $popoverElement,\n         '.env-popover__header__title',\n         this.config.title\n      );\n   }\n\n   setContent($popoverElement) {\n      this.setText(\n         $popoverElement,\n         '.env-popover__content',\n         this.config.content\n      );\n   }\n\n   updateConfig(config) {\n      Object.assign(this.config, config);\n      return this;\n   }\n\n   render() {\n      const $popoverElement = this.getPopoverElement();\n\n      this.setTitle($popoverElement);\n      this.setContent($popoverElement);\n      this.setArrowPosition($popoverElement);\n   }\n\n   setArrowPosition($popoverElement) {\n      $popoverElement\n         .find('.env-popover__arrow')\n         .addClass(`env-popover__arrow--${this.config.placement}`);\n   }\n\n   hide() {\n      const $popoverElement = this.getPopoverElement();\n\n      $popoverElement.detach();\n\n      if (this.config.clickOutside) {\n         $('body').off(this.config.trigger + EVENT_NAMESPACE);\n      }\n\n      this.isShowing = false;\n   }\n\n   _cleanTipClass() {\n      this.$popoverElement\n         .find('.env-popover__arrow')\n         .removeClass((index, oldClassNames) => {\n            const modifier = oldClassNames\n               .replace(/env-popover__arrow/g, '')\n               .trim();\n\n            return `env-popover__arrow${modifier}`;\n         });\n   }\n\n   _handlePopperPlacementChange(data) {\n      this._cleanTipClass();\n      this._addAttachmentClass(attachmentMapping[data.placement]);\n   }\n\n   _addAttachmentClass(className) {\n      this.$popoverElement\n         .find('.env-popover__arrow')\n         .addClass(`env-popover__arrow--${className}`);\n   }\n\n   show() {\n      this.render();\n\n      const $popoverElement = this.getPopoverElement();\n\n      $('body').append($popoverElement);\n\n      this._popper = new Popper(this.el, $popoverElement[0], {\n         placement: attachmentMapping[this.config.placement],\n         modifiers: {\n            flip: {\n               behavior: 'flip',\n            },\n            arrow: {\n               element: '.env-popover__arrow',\n            },\n         },\n         onCreate: (data) => {\n            if (data.originalPlacement !== data.placement) {\n               this._handlePopperPlacementChange(data);\n            }\n         },\n         onUpdate: (data) => {\n            this._handlePopperPlacementChange(data);\n         },\n      });\n\n      this._popper.update();\n\n      if (this.config.clickOutside) {\n         $('body').on(\n            this.config.trigger + EVENT_NAMESPACE,\n            this.clickOutsideHandler.bind(this)\n         );\n      }\n\n      this.isShowing = true;\n   }\n\n   destroy() {\n      this.hide();\n\n      if (this._popper) {\n         this._popper.destroy();\n      }\n\n      this.$popoverElement = undefined;\n      this._popper = undefined;\n      this.isShowing = false;\n      this.$el.off();\n      this.$el.removeData(IDENTIFIER);\n   }\n\n   clickOutsideHandler(e) {\n      const target = e.target;\n      const $target = $(target);\n\n      if (\n         this.isShowing &&\n         !this.el.contains(target) &&\n         !$target.closest(this.$popoverElement).length\n      ) {\n         this.hide();\n      }\n   }\n\n   static _jQuery(config) {\n      return this.each(function () {\n         const $this = $(this);\n         let data = $this.data(IDENTIFIER);\n\n         if (!data && /destroy|hide/.test(config)) {\n            return;\n         }\n\n         if (!data) {\n            data = new Popover(\n               this,\n               typeof config === 'object' ? config : null\n            );\n            $this.data(IDENTIFIER, data);\n         }\n\n         if (typeof config === 'string') {\n            const method = data[config];\n\n            if (!method) {\n               throw new Error(`Invalid method name \"${config}\"`);\n            }\n\n            method.call(data);\n         }\n      });\n   }\n}\n\nif (typeof document !== 'undefined') {\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = Popover._jQuery;\n   $.fn[NAME].Constructor = Popover;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Popover._jQuery;\n   };\n}\n\nexport default Popover;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\nimport CssUtil from './util/css-util';\n\nconst HANDLE_INDEX = 'range-handle-index';\nconst HANDLES_SELECTOR = '.env-range-slider__handle';\nconst VALUE_HOLDERS_SELECTOR = '.env-range-slider__values__value';\nconst RANGE_SELECTOR = '.env-range-slider__range';\nconst TOUCH_MODIFIER = 'env-range-slider--touch';\nconst IDENTIFIER = 'env.range-slider';\nconst NAME = 'envRangeSlider';\nconst KEY_RIGHT = 39;\nconst KEY_LEFT = 37;\nconst KEY_DOWN = 40;\nconst KEY_UP = 38;\n\nconst EVENTS = {\n   SLIDE: 'slide',\n   STOP: 'slidestop',\n};\n\nconst DEFAULTS = {\n   min: 0,\n   max: 100,\n   step: 1,\n   values: [0, 0],\n   visibleValues: true,\n};\n\nclass RangeSlider {\n   constructor(element, config) {\n      this.config = $.extend({}, DEFAULTS, config);\n      this.$document = $(document);\n      this.el = element;\n      this.$el = $(element);\n      this.handles = this.$el.find(HANDLES_SELECTOR);\n      this.$range = this.$el.find(RANGE_SELECTOR);\n      this.isTouch = CssUtil.isTouch();\n\n      if (this.config.visibleValues) {\n         this.valueHolders = this.$el.find(VALUE_HOLDERS_SELECTOR);\n      }\n\n      this.handleEvents = {\n         mousedown: this._initSlide.bind(this),\n         touchstart: this._initSlide.bind(this),\n         keydown: this._initKeySlide.bind(this),\n         keyup: this._stopKeySlide.bind(this),\n      };\n   }\n\n   initialize() {\n      this._setupHandles();\n      this._refreshRange();\n      this._bindEvents();\n\n      if (this.isTouch) {\n         this.$el.addClass(TOUCH_MODIFIER);\n      }\n   }\n\n   values(values) {\n      if ($.isArray(values)) {\n         for (let i = 0; i < values.length; i += 1) {\n            this.config.values[i] = this._trimAlignValue(values[i]);\n         }\n         this._refreshRange();\n      }\n   }\n\n   _setupHandles() {\n      this.handles.each((i, handle) => {\n         $(handle).data(HANDLE_INDEX, i);\n      });\n   }\n\n   _refreshRange() {\n      let lastValPercent;\n      let valPercent;\n      let val;\n\n      this.handles.each((i, handle) => {\n         val = this._getValue(i);\n         /* eslint-disable no-magic-numbers */\n         valPercent =\n            ((val - this.config.min) / (this.config.max - this.config.min)) *\n            100;\n         /* eslint-enable no-magic-numbers */\n         $(handle).css('left', `${valPercent}%`);\n\n         if (i === 0) {\n            this.$range.css('left', `${valPercent}%`);\n\n            if (this.config.visibleValues) {\n               this.valueHolders.eq(i).text(val);\n            }\n         } else {\n            this.$range.css('width', `${valPercent - lastValPercent}%`);\n\n            if (this.config.visibleValues) {\n               this.valueHolders.eq(i).text(val);\n            }\n         }\n\n         lastValPercent = valPercent;\n      });\n   }\n\n   _bindEvents() {\n      this.handles.off();\n      this.handles.on(this.handleEvents);\n   }\n\n   _initSlide(e) {\n      const position = this._getPosition(e);\n      const normValue = this._normValueFromMouse(position);\n      let distance = this.config.max - this.config.min + 1;\n      let $closestHandle;\n      let index;\n      let val;\n      let thisDistance;\n\n      if (e.type === 'touchstart') {\n         this.$document.on(\n            `touchmove.${IDENTIFIER}`,\n            this._handleSlide.bind(this)\n         );\n         this.$document.one(\n            `touchend.${IDENTIFIER}`,\n            this._stopSlide.bind(this)\n         );\n      } else {\n         this.$document.on(\n            `mousemove.${IDENTIFIER}`,\n            this._handleSlide.bind(this)\n         );\n         this.$document.one(\n            `mouseup.${IDENTIFIER}`,\n            this._stopSlide.bind(this)\n         );\n      }\n\n      this.handles.each((i, handle) => {\n         val = this._getValue(i);\n         thisDistance = Math.abs(normValue - val);\n         if (\n            distance > thisDistance ||\n            (distance === thisDistance &&\n               (i === this._lastChangedValue || val === this.config.min))\n         ) {\n            distance = thisDistance;\n            $closestHandle = $(handle);\n            index = i;\n         }\n      });\n\n      this._handleIndex = index;\n\n      $closestHandle.trigger('focus');\n\n      const offset = $closestHandle.offset();\n      /* eslint-disable no-magic-numbers */\n      this._clickOffset = {\n         left: position.x - offset.left - $closestHandle.width() / 2,\n         top:\n            position.y -\n            offset.top -\n            $closestHandle.height() / 2 -\n            (parseInt($closestHandle.css('borderTopWidth'), 10) || 0) -\n            (parseInt($closestHandle.css('borderBottomWidth'), 10) || 0) +\n            (parseInt($closestHandle.css('marginTop'), 10) || 0),\n      };\n      /* eslint-enable no-magic-numbers */\n\n      this._slide(e, index, normValue);\n   }\n\n   _handleSlide(e) {\n      const normValue = this._normValueFromMouse(this._getPosition(e));\n      this._slide(e, this._handleIndex, normValue);\n\n      return false;\n   }\n\n   _slide(e, index, newVal) {\n      const otherVal = this._getValue(index ? 0 : 1);\n      const currentValue = this._getValue(index);\n      const newValues = this._getValues();\n      newVal =\n         index === 0 ? Math.min(otherVal, newVal) : Math.max(otherVal, newVal);\n      newValues[index] = newVal;\n\n      if (newVal === currentValue) {\n         return;\n      }\n\n      this._trigger(EVENTS.SLIDE, e, {\n         values: newValues,\n      });\n\n      this._setValue(index, newVal);\n   }\n\n   _stopSlide(e) {\n      this.$document.off(`mousemove.${IDENTIFIER} touchmove.${IDENTIFIER}`);\n\n      this._trigger(EVENTS.STOP, e, {\n         values: this._getValues(),\n      });\n\n      this._handleIndex = null;\n      this._clickOffset = null;\n\n      return false;\n   }\n\n   _initKeySlide(e) {\n      switch (e.keyCode) {\n         case KEY_UP:\n         case KEY_DOWN:\n         case KEY_LEFT:\n         case KEY_RIGHT:\n            e.preventDefault();\n            if (!this._keySliding) {\n               this._keySliding = true;\n            }\n            break;\n         default:\n            return;\n      }\n\n      const index = $(e.target).data(HANDLE_INDEX);\n      const curVal = this._getValue(index);\n      let newVal;\n\n      switch (event.keyCode) {\n         case KEY_UP:\n         case KEY_RIGHT:\n            if (curVal === this.config.max) {\n               return;\n            }\n            newVal = this._trimAlignValue(curVal + this.config.step);\n            break;\n         case KEY_DOWN:\n         case KEY_LEFT:\n            if (curVal === this.config.min) {\n               return;\n            }\n            newVal = this._trimAlignValue(curVal - this.config.step);\n            break;\n         default:\n      }\n\n      this._slide(e, index, newVal);\n   }\n\n   _stopKeySlide(e) {\n      if (this._keySliding) {\n         this._keySliding = false;\n         this._trigger(EVENTS.STOP, e, {\n            values: this._getValues(),\n         });\n      }\n   }\n\n   _normValueFromMouse(position) {\n      const pixelTotal = this.el.outerWidth();\n      const valueTotal = this.config.max - this.config.min;\n      const pixelMouse =\n         position.x -\n         this.el.offset().left -\n         (this._clickOffset ? this._clickOffset.left : 0);\n      let percentMouse = pixelMouse / pixelTotal;\n\n      if (percentMouse > 1) {\n         percentMouse = 1;\n      }\n\n      if (percentMouse < 0) {\n         percentMouse = 0;\n      }\n\n      const valueMouse = this.config.min + percentMouse * valueTotal;\n\n      return this._trimAlignValue(valueMouse);\n   }\n\n   _getPosition(e) {\n      const pos = {};\n\n      if (this.isTouch) {\n         const touches = e.originalEvent.touches[0];\n         pos.x = touches.pageX;\n         pos.y = touches.pageY;\n      } else {\n         pos.x = e.pageX;\n         pos.y = e.pageY;\n      }\n\n      return pos;\n   }\n\n   _trimAlignValue(val) {\n      if (val <= this.config.min) {\n         return this.config.min;\n      }\n\n      if (val >= this.config.max) {\n         return this.config.max;\n      }\n\n      const step = this.config.step;\n      const valModStep = (val - this.config.min) % step;\n      let alignValue = val - valModStep;\n      /* eslint-disable no-magic-numbers */\n      if (Math.abs(valModStep) * 2 >= step) {\n         alignValue += valModStep > 0 ? step : -step;\n      }\n\n      return parseFloat(alignValue.toFixed(5));\n      /* eslint-enable no-magic-numbers */\n   }\n\n   _getValues() {\n      return this.config.values.slice();\n   }\n\n   _getValue(index) {\n      return this.config.values[index];\n   }\n\n   _setValue(index, newValue) {\n      this.config.values[index] = this._trimAlignValue(newValue);\n      this._refreshRange();\n   }\n\n   _trigger(type, e, data) {\n      const el = this.el[0];\n      const cb = this.config[type];\n\n      e = $.Event(e);\n      e.type = type;\n      e.target = el;\n      this.$el.trigger(e, data);\n\n      if (cb) {\n         cb.call(el, e, data);\n      }\n   }\n\n   static _jQuery(config, ...args) {\n      return this.each(() => {\n         const $this = $(this);\n         let rangeSlider = $this.data(IDENTIFIER);\n\n         if (!rangeSlider) {\n            rangeSlider = new RangeSlider(this, config);\n            $this.data(IDENTIFIER, rangeSlider);\n         }\n\n         if (typeof config === 'string') {\n            const method = rangeSlider[config];\n            if (method === undefined) {\n               throw new Error(`No method named \"${config}\"`);\n            }\n\n            method.call(rangeSlider, ...args);\n         }\n\n         rangeSlider.initialize();\n      });\n   }\n}\n\nif (typeof document !== 'undefined') {\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = RangeSlider._jQuery;\n   $.fn[NAME].Constructor = RangeSlider;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return RangeSlider._jQuery;\n   };\n}\n\nexport default RangeSlider;\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT https://github.com/sitevision/envision/blob/master/LICENSE\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery';\n\nconst ARIA_SELECTED = 'aria-selected';\nconst ARIA_HIDDEN = 'aria-hidden';\nconst ENTER_KEY = 13;\nconst IDENTIFIER = 'env.tabs';\nconst IS_ACTIVE = 'env-tabs__link--active';\nconst NAME = 'envTabs';\nconst TAB_SELECTOR = '.env-tabs__link';\n\nconst DEFAULTS = {\n   active: 0,\n};\n\nclass Tabs {\n   constructor(element, config) {\n      this.el = element;\n      this.$el = $(element);\n      this.$tabs = this.$el.find(TAB_SELECTOR);\n      this.config = $.extend({}, DEFAULTS, config);\n      this.$panels = {};\n      this.$activeTab = undefined;\n\n      this._bindEvents();\n   }\n\n   initialize() {\n      this.$tabs.each((i, tab) => {\n         const $tab = $(tab);\n         const $panel = $($tab.attr('href'));\n         this.$panels[$tab.attr('id')] = $panel;\n\n         $tab.removeClass(IS_ACTIVE).attr(ARIA_SELECTED, false);\n\n         $panel.attr(ARIA_HIDDEN, true).hide();\n      });\n\n      this._setActive(this.$tabs.eq(this.config.active), false);\n   }\n\n   activate(index) {\n      this._setActive(this.$tabs.eq(index), true);\n   }\n\n   destroy() {\n      this.$tabs.off('click keydown');\n      this.$activeTab = undefined;\n      this.$tabs = undefined;\n      this.$panels = undefined;\n      this.$el.removeData(IDENTIFIER);\n   }\n\n   // Private\n\n   _bindEvents() {\n      this.$tabs.on('click', (e) => {\n         e.preventDefault();\n         this._setActive($(e.currentTarget), true);\n      });\n\n      this.$tabs.on('keydown', (e) => {\n         if (e.which === ENTER_KEY) {\n            this._setActive($(e.currentTarget), true);\n         }\n      });\n   }\n\n   _setActive($tab, initialized) {\n      this._resetActive();\n\n      $tab.addClass(IS_ACTIVE).attr(ARIA_SELECTED, true);\n\n      if (initialized) {\n         $tab.trigger('focus');\n      }\n\n      this._getPanelForTab($tab).attr(ARIA_HIDDEN, false).show();\n\n      this.$activeTab = $tab;\n   }\n\n   _getPanelForTab($tab) {\n      return this.$panels[$tab.attr('id')];\n   }\n\n   _resetActive() {\n      if (this.$activeTab) {\n         this.$activeTab.removeClass(IS_ACTIVE).attr(ARIA_SELECTED, false);\n\n         this._getPanelForTab(this.$activeTab).attr(ARIA_HIDDEN, true).hide();\n      }\n   }\n\n   static _jQuery(config, argument) {\n      return this.each(() => {\n         const $this = $(this);\n         let tabs = $this.data(IDENTIFIER);\n\n         if (!tabs) {\n            tabs = new Tabs(this, config);\n            $this.data(IDENTIFIER, tabs);\n            tabs.initialize();\n         } else if (typeof config === 'string') {\n            const method = tabs[config];\n\n            if (!method) {\n               throw new Error(`Invalid method name \"${config}\"`);\n            }\n\n            method.call(tabs, argument);\n         }\n      });\n   }\n}\n\nif (typeof document !== 'undefined') {\n   const NO_CONFLICT = $.fn[NAME];\n   $.fn[NAME] = Tabs._jQuery;\n   $.fn[NAME].Constructor = Tabs;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Tabs._jQuery;\n   };\n}\n\nexport default Tabs;\n"],"sourceRoot":""}